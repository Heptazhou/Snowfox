 browser/actors/EncryptedMediaParent.sys.mjs        |   3 +
 browser/actors/ScreenshotsComponentChild.sys.mjs   |   6 +
 browser/app/Makefile.in                            |   8 +-
 browser/app/macbuild/Contents/Info.plist.in        |   2 +-
 browser/app/moz.build                              |   2 +-
 browser/app/nsBrowserApp.cpp                       |   2 +-
 browser/app/profile/firefox.js                     | 160 +++++++-------
 .../{firefox.exe.manifest => snowfox.exe.manifest} |   4 +-
 browser/app/splash.rc                              |   4 +-
 browser/app/winlauncher/ErrorHandler.cpp           |   6 +-
 browser/base/content/aboutDialog.css               |  27 ++-
 browser/base/content/aboutDialog.js                |   9 +-
 browser/base/content/aboutDialog.xhtml             |   9 +-
 browser/base/content/overrides/app-license.html    |   6 +-
 browser/branding/branding-common.mozbuild          |   3 +-
 .../modules/FeatureCalloutMessages.sys.mjs         |   1 +
 .../enterprisepolicies/content/aboutPolicies.css   |   8 +
 .../enterprisepolicies/content/aboutPolicies.js    |  32 +--
 .../schemas/policies-schema.json                   |   2 -
 .../installerprefs/InstallerPrefs.sys.mjs          |   2 +-
 .../newtab/content-src/components/Logo/Logo.jsx    |   4 +-
 browser/components/newtab/css/activity-stream.css  |   2 +
 .../newtab/data/content/activity-stream.bundle.js  |   4 +-
 .../components/newtab/lib/ActivityStream.sys.mjs   |   2 +-
 browser/components/newtab/lib/cache.worker.js      |   2 +-
 browser/components/preferences/main.inc.xhtml      |   8 +-
 browser/components/preferences/main.js             |   2 +-
 browser/components/preferences/preferences.js      |   3 +
 browser/components/preferences/preferences.xhtml   |   3 +-
 browser/components/preferences/privacy.inc.xhtml   |   8 +-
 browser/components/preferences/privacy.js          |   4 +-
 .../content/aboutPrivateBrowsing.html              |   4 +-
 browser/components/screenshots/fileHelpers.mjs     |   8 +-
 browser/components/shell/ShellService.sys.mjs      |  13 +-
 browser/components/shell/nsWindowsShellService.cpp |   6 +-
 .../tabbrowser/content/tab-hover-preview.mjs       |  10 +
 .../urlbar/QuickActionsLoaderDefault.sys.mjs       |   2 +-
 .../urlbar/UrlbarProviderInterventions.sys.mjs     |   2 +
 .../unitconverters/UnitConverterTimezone.sys.mjs   |   8 +-
 browser/extensions/screenshots/build/shot.js       |   6 +-
 browser/installer/package-manifest.in              |   7 +-
 browser/installer/windows/Makefile.in              |   2 +-
 browser/installer/windows/app.tag                  |   2 +-
 browser/installer/windows/nsis/defines.nsi.in      |  14 +-
 browser/installer/windows/nsis/installer.nsi       |  25 ++-
 browser/installer/windows/nsis/shared.nsh          | 153 +++++++------
 browser/installer/windows/nsis/stub.nsi            |   4 +-
 browser/installer/windows/nsis/uninstaller.nsi     |  57 ++---
 .../locales/en-US/browser/appExtensionFields.ftl   |   2 +-
 .../browser/policies/policies-descriptions.ftl     |   2 +-
 .../en-US/browser/preferences/preferences.ftl      |   2 +-
 .../en-US/browser/profile/default-bookmarks.ftl    |   4 +-
 .../en-US/chrome/overrides/appstrings.properties   |  28 +--
 browser/locales/filter.py                          |   2 +-
 browser/locales/l10n.ini                           |   2 +-
 browser/locales/l10n.toml                          |   4 +-
 browser/locales/shipped-locales                    |  35 ---
 browser/moz.configure                              |   8 +-
 .../privatebrowsing/aboutPrivateBrowsing.css       |   3 +
 .../themes/shared/tabbrowser/tab-hover-preview.css |   2 +-
 build/moz.configure/init.configure                 |   4 +-
 build/moz.configure/rust.configure                 |   9 +
 build/moz.configure/windows.configure              |   2 +-
 build/templates.mozbuild                           |  10 +
 build/variables.py                                 |   7 +-
 config/rules.mk                                    |   2 +-
 .../client/aboutdebugging/src/actions/runtimes.js  |   1 +
 .../client/framework/browser-toolbox/window.js     |   2 +-
 devtools/client/jsonview/json-viewer.js            |   2 +-
 devtools/client/locales/en-US/aboutdebugging.ftl   |   2 +-
 devtools/client/locales/en-US/application.ftl      |   2 +-
 devtools/client/locales/en-US/memory.properties    |   2 +-
 .../client/locales/en-US/responsive.properties     |   2 +-
 devtools/client/memory/utils.js                    |   4 +-
 .../src/components/request-details/CachePanel.js   |   2 +-
 devtools/client/netmonitor/src/har/har-exporter.js |   2 +-
 .../src/widgets/RequestListContextMenu.js          |   2 +-
 devtools/client/storage/ui.js                      |   6 +-
 .../client/webconsole/components/Output/Message.js |   2 +-
 devtools/server/actors/thread.js                   |   3 +
 devtools/server/actors/utils/capture-screenshot.js |   7 +-
 devtools/server/actors/utils/sources-manager.js    |   2 +-
 .../server/actors/webconsole/commands/manager.js   |   2 +-
 .../actors/webconsole/listeners/console-api.js     |   3 +
 devtools/shared/loader/Loader.sys.mjs              |   2 +-
 devtools/shared/worker/worker.sys.mjs              |   4 +-
 dom/base/Document.cpp                              |   2 +-
 dom/base/nsScreen.cpp                              |   4 +-
 dom/locales/en-US/chrome/appstrings.properties     |   2 +-
 dom/locales/en-US/chrome/dom/dom.properties        |  12 +-
 dom/media/CubebUtils.cpp                           |   4 +-
 dom/media/MediaDevices.cpp                         |   2 +-
 dom/media/MediaInfo.h                              |   2 +-
 dom/media/MediaRecorder.h                          |   2 +-
 dom/media/webaudio/blink/Reverb.cpp                |   2 +-
 dom/media/webrtc/CubebDeviceEnumerator.cpp         |   2 +-
 dom/workers/RuntimeService.cpp                     |  11 +-
 dom/xml/resources/XMLPrettyPrint.css               |   3 +-
 gfx/thebes/PrintTargetPDF.cpp                      |   2 +-
 gfx/thebes/PrintTargetSkPDF.cpp                    |   2 +-
 gfx/thebes/gfxWindowsPlatform.cpp                  |   6 +-
 image/DecoderFactory.cpp                           |   6 +
 image/decoders/nsAVIFDecoder.cpp                   |   4 +
 image/decoders/nsJXLDecoder.cpp                    | 241 +++++++++++++++++++--
 image/decoders/nsJXLDecoder.h                      |  14 +-
 image/imgFrame.cpp                                 |   6 +-
 intl/components/src/Calendar.cpp                   |   4 +-
 js/src/octane/gbemu-part1.js                       |   8 +-
 js/src/octane/mandreel.js                          |   2 +-
 layout/style/TopLevelImageDocument.css             |   9 +-
 layout/style/res/ua.css                            |  17 ++
 mach                                               |   2 +-
 media/libcubeb/src/cubeb_alsa.c                    |   4 +-
 media/libcubeb/src/cubeb_winmm.c                   |  14 +-
 media/libsoundtouch/src/TDStretch.cpp              |   2 +-
 media/libvorbis/lib/vorbis_envelope.c              |   4 +-
 modules/libpref/init/StaticPrefList.yaml           | 129 ++++++-----
 modules/libpref/init/all.js                        |  44 ++--
 moz.build                                          |   1 +
 mozglue/misc/AwakeTimeStamp.cpp                    |   4 +
 mozglue/misc/AwakeTimeStamp.h                      |   1 +
 mozglue/misc/moz.build                             |   6 +-
 netwerk/protocol/http/nsHttpHandler.cpp            |  18 +-
 package.json                                       |   1 +
 python/mach/mach/telemetry.py                      |   4 +-
 python/mozbuild/mozbuild/action/exe_7z_archive.py  |   1 +
 python/mozbuild/mozbuild/backend/recursivemake.py  |  22 +-
 python/mozbuild/mozbuild/base.py                   |   4 +-
 python/mozbuild/mozbuild/mach_commands.py          |  11 +-
 .../html-build-viewer/build_resources.html         |   4 +-
 .../manager/pki/resources/content/clientauthask.js |   4 +-
 .../chromium-shim/base/file_version_info_win.cpp   |   4 +-
 services/settings/Utils.sys.mjs                    |   4 +-
 services/sync/modules/telemetry.sys.mjs            |   2 +-
 taskcluster/gecko_taskgraph/util/hash.py           |  10 +-
 .../taskcluster_taskgraph/taskgraph/util/hash.py   |   2 +-
 .../lib/libwinapi_mincore.a                        |   2 +-
 .../lib/libwinapi_onecore.a                        |   2 +-
 .../lib/libwinapi_onecoreuap.a                     |   2 +-
 .../lib/libwinapi_mincore.a                        |   2 +-
 .../lib/libwinapi_onecore.a                        |   2 +-
 .../lib/libwinapi_onecoreuap.a                     |   2 +-
 toolkit/actors/PictureInPictureChild.sys.mjs       |   6 +-
 .../aboutthirdparty/content/aboutThirdParty.js     |   2 +-
 .../components/certviewer/content/certDecoder.mjs  |  12 +-
 .../enterprisepolicies/WindowsGPOParser.sys.mjs    |   2 +-
 .../enterprisepolicies/macOSPoliciesParser.sys.mjs |   2 +-
 toolkit/components/extensions/Extension.sys.mjs    |   6 +-
 .../maintenanceservice/serviceinstall.cpp          |   6 +-
 toolkit/components/pdfjs/content/build/pdf.mjs     |   2 +-
 toolkit/components/pdfjs/content/web/viewer.css    |   4 +-
 toolkit/components/pdfjs/content/web/viewer.mjs    |  10 +-
 toolkit/components/printing/content/print.js       |   2 +-
 toolkit/components/remote/nsDBusRemoteClient.cpp   |   8 +-
 toolkit/components/remote/nsDBusRemoteServer.cpp   |  12 +-
 .../resistfingerprinting/RFPHelper.sys.mjs         |  20 ++
 .../components/resistfingerprinting/nsRFPService.h |   8 +-
 toolkit/components/search/OpenSearchEngine.sys.mjs |   2 +-
 .../components/url-classifier/SafeBrowsing.sys.mjs |   2 +-
 .../UrlClassifierHashCompleter.sys.mjs             |   2 +-
 .../UrlClassifierListManager.sys.mjs               |   8 +-
 toolkit/components/utils/ClientEnvironment.sys.mjs |   5 +-
 toolkit/content/aboutNetError.mjs                  |   2 +-
 toolkit/content/aboutRights-unbranded.xhtml        |   6 +-
 toolkit/content/aboutRights.xhtml                  |   4 +-
 toolkit/content/aboutSupport.js                    |   4 +-
 toolkit/content/aboutUrlClassifier.js              |  10 +-
 toolkit/content/aboutwebrtc/aboutWebrtc.mjs        |   8 +-
 toolkit/content/buildconfig.html                   |   2 +-
 toolkit/content/widgets/datekeeper.js              |   4 +-
 toolkit/content/widgets/datepicker.js              |   8 +-
 toolkit/content/widgets/datetimebox.js             |   4 +-
 .../windows/unittests/minidump_test.cc             |   4 +-
 .../src/tools/windows/symupload/symupload.cc       |   4 +-
 .../locales/en-US/toolkit/branding/brandings.ftl   |  10 +-
 toolkit/locales/en-US/toolkit/pdfviewer/viewer.ftl |   4 +-
 toolkit/modules/DateTimePickerPanel.sys.mjs        |   4 +-
 toolkit/moz.configure                              |  20 +-
 toolkit/mozapps/defaultagent/SetDefaultBrowser.cpp |   4 +-
 .../extensions/internal/AddonSettings.sys.mjs      |   2 +-
 toolkit/mozapps/installer/package-name.mk          |  12 +-
 toolkit/mozapps/installer/packager.mk              |   4 +
 toolkit/mozapps/installer/upload-files.mk          |   2 +-
 toolkit/mozapps/installer/windows/nsis/common.nsh  |   4 +-
 toolkit/mozapps/installer/windows/nsis/makensis.mk |   2 +-
 toolkit/themes/shared/aboutServiceWorkers.css      |   5 +
 toolkit/themes/shared/aboutSupport.css             |   8 +
 toolkit/themes/shared/in-content/common-shared.css |   1 +
 toolkit/xre/dllservices/ModuleVersionInfo.cpp      |   4 +-
 toolkit/xre/nsXREDirProvider.cpp                   |  24 +-
 tools/@types/package.json                          |   1 +
 .../eslint-plugin-spidermonkey-js/package.json     |   1 +
 widget/windows/WinHeaderOnlyUtils.h                |   6 +-
 xpcom/base/AvailableMemoryWatcherWin.cpp           |   6 +-
 xpcom/io/nsLocalFileWin.cpp                        |   4 +-
 195 files changed, 1120 insertions(+), 715 deletions(-)

diff --git a/browser/actors/EncryptedMediaParent.sys.mjs b/browser/actors/EncryptedMediaParent.sys.mjs
index 3ad70beebf6f..96d017b011a0 100644
--- a/browser/actors/EncryptedMediaParent.sys.mjs
+++ b/browser/actors/EncryptedMediaParent.sys.mjs
@@ -115,6 +115,9 @@ export class EncryptedMediaParent extends JSWindowActorParent {
 
       case "api-disabled":
       case "cdm-disabled":
+        if (!Services.prefs.getBoolPref("media.eme.showBrowserMessage", true)) {
+          return;
+        }
         this.handledMessages.add(status);
         notificationId = "drmContentDisabled";
         buttonCallback = () => {
diff --git a/browser/actors/ScreenshotsComponentChild.sys.mjs b/browser/actors/ScreenshotsComponentChild.sys.mjs
index 526f32b58488..609b4927da15 100644
--- a/browser/actors/ScreenshotsComponentChild.sys.mjs
+++ b/browser/actors/ScreenshotsComponentChild.sys.mjs
@@ -67,6 +67,8 @@ export class ScreenshotsComponentChild extends JSWindowActorChild {
         return this.getFullPageBounds();
       case "Screenshots:getVisibleBounds":
         return this.getVisibleBounds();
+      case "Screenshots:getDocumentOrigin":
+        return this.getDocumentOrigin();
       case "Screenshots:getDocumentTitle":
         return this.getDocumentTitle();
       case "Screenshots:GetMethodsUsed":
@@ -198,6 +200,10 @@ export class ScreenshotsComponentChild extends JSWindowActorChild {
     this.endScreenshotsOverlay({ doNotResetMethods: true });
   }
 
+  getDocumentOrigin() {
+    return this.document.location?.origin ?? "";
+  }
+
   getDocumentTitle() {
     return this.document.title;
   }
diff --git a/browser/app/Makefile.in b/browser/app/Makefile.in
index 08490ba27ca2..d0033b03f9cf 100644
--- a/browser/app/Makefile.in
+++ b/browser/app/Makefile.in
@@ -27,11 +27,11 @@ CXX += -march=pentiumpro
 endif
 
 ifeq ($(OS_ARCH),WINNT)
-# Rebuild firefox.exe if the manifest changes - it's included by splash.rc.
-# (this dependency should really be just for firefox.exe, not other targets)
+# Rebuild snowfox.exe if the manifest changes - it's included by splash.rc.
+# (this dependency should really be just for snowfox.exe, not other targets)
 # Note the manifest file exists in the tree, so we use the explicit filename
 # here.
-EXTRA_DEPS += $(srcdir)/firefox.exe.manifest
+EXTRA_DEPS += $(srcdir)/snowfox.exe.manifest
 endif
 
 PROGRAMS_DEST = $(DIST)/bin
@@ -98,7 +98,7 @@ tools repackage:: $(DIST)/bin/$(MOZ_APP_NAME) $(objdir)/macbuild/Contents/MacOS-
 	rsync -aL --include-from='$(srcdir)/macbuild/Contents/MacOS-files-copy.in' --exclude '*' $(DIST)/bin/ '$(dist_dest)/Contents/MacOS'
 	$(RM) '$(dist_dest)/Contents/MacOS/$(MOZ_APP_NAME)'
 	rsync -aL $(DIST)/bin/$(MOZ_APP_NAME) '$(dist_dest)/Contents/MacOS'
-	cp -RL $(topsrcdir)/$(MOZ_BRANDING_DIRECTORY)/firefox.icns '$(dist_dest)/Contents/Resources/firefox.icns'
+	cp -RL $(topsrcdir)/$(MOZ_BRANDING_DIRECTORY)/snowfox.icns '$(dist_dest)/Contents/Resources/snowfox.icns'
 	cp -RL $(topsrcdir)/$(MOZ_BRANDING_DIRECTORY)/document.icns '$(dist_dest)/Contents/Resources/document.icns'
 	$(MKDIR) -p '$(dist_dest)/Contents/Library/LaunchServices'
 ifdef MOZ_UPDATER
diff --git a/browser/app/macbuild/Contents/Info.plist.in b/browser/app/macbuild/Contents/Info.plist.in
index 73b400d58fd2..081c0b14572e 100644
--- a/browser/app/macbuild/Contents/Info.plist.in
+++ b/browser/app/macbuild/Contents/Info.plist.in
@@ -189,7 +189,7 @@
 	<key>CFBundleGetInfoString</key>
 	<string>@MAC_APP_NAME@ @APP_VERSION@</string>
 	<key>CFBundleIconFile</key>
-	<string>firefox.icns</string>
+	<string>snowfox.icns</string>
 	<key>CFBundleIdentifier</key>
 	<string>@MOZ_MACBUNDLE_ID@</string>
 	<key>CFBundleInfoDictionaryVersion</key>
diff --git a/browser/app/moz.build b/browser/app/moz.build
index f41ce92556bb..566cccded5bd 100644
--- a/browser/app/moz.build
+++ b/browser/app/moz.build
@@ -168,7 +168,7 @@ if CONFIG["MOZ_LINUX_32_SSE2_STARTUP_ERROR"]:
         "-mfpmath=387",
     ]
 
-for icon in ("firefox", "document", "newwindow", "newtab", "pbmode", "document_pdf"):
+for icon in ("snowfox", "document", "newwindow", "newtab", "pbmode", "document_pdf"):
     DEFINES[icon.upper() + "_ICO"] = '"%s/%s/%s.ico"' % (
         TOPSRCDIR,
         CONFIG["MOZ_BRANDING_DIRECTORY"],
diff --git a/browser/app/nsBrowserApp.cpp b/browser/app/nsBrowserApp.cpp
index 3ca37324b1bb..562712e4a24c 100644
--- a/browser/app/nsBrowserApp.cpp
+++ b/browser/app/nsBrowserApp.cpp
@@ -131,7 +131,7 @@ static MOZ_FORMAT_PRINTF(1, 2) void Output(const char* fmt, ...) {
     decltype(MessageBoxW)* messageBoxW =
         (decltype(MessageBoxW)*)GetProcAddress(user32, "MessageBoxW");
     if (messageBoxW) {
-      messageBoxW(nullptr, wide_msg, L"Firefox",
+      messageBoxW(nullptr, wide_msg, L"Snowfox",
                   MB_OK | MB_ICONERROR | MB_SETFOREGROUND);
     }
     FreeLibrary(user32);
diff --git a/browser/app/profile/firefox.js b/browser/app/profile/firefox.js
index 8cbe147d48e8..3d0b3613be4a 100644
--- a/browser/app/profile/firefox.js
+++ b/browser/app/profile/firefox.js
@@ -48,7 +48,7 @@ pref("extensions.recommendations.privacyPolicyUrl", "https://www.mozilla.org/pri
 // The URL for Firefox Color, recommended on the theme page in about:addons.
 pref("extensions.recommendations.themeRecommendationUrl", "https://color.firefox.com/?utm_source=firefox-browser&utm_medium=firefox-browser&utm_content=theme-footer-link");
 
-pref("extensions.update.autoUpdateDefault", true);
+pref("extensions.update.autoUpdateDefault", false);
 
 // Check AUS for system add-on updates.
 pref("extensions.systemAddon.update.url", "https://aus5.mozilla.org/update/3/SystemAddons/%VERSION%/%BUILD_ID%/%BUILD_TARGET%/%LOCALE%/%CHANNEL%/%OS_VERSION%/%DISTRIBUTION%/%DISTRIBUTION_VERSION%/update.xml");
@@ -65,9 +65,9 @@ pref("extensions.geckoProfiler.acceptedExtensionIds", "geckoprofiler@mozilla.com
 
 pref("extensions.webextensions.remote", true);
 
-// Require signed add-ons by default
-pref("extensions.langpacks.signatures.required", true);
-pref("xpinstall.signatures.required", true);
+// Require signed add-ons if enabled
+pref("extensions.langpacks.signatures.required", false);
+pref("xpinstall.signatures.required", false);
 
 // Dictionary download preference
 pref("browser.dictionaries.download.url", "https://addons.mozilla.org/%LOCALE%/firefox/language-tools/");
@@ -143,7 +143,7 @@ pref("app.update.notifyDuringDownload", false);
 
 // If set to true, the Update Service will apply updates in the background
 // when it finishes downloading them.
-pref("app.update.staging.enabled", true);
+pref("app.update.staging.enabled", false);
 
 // Update service URL:
 // app.update.url was removed in Bug 1568994
@@ -165,7 +165,7 @@ pref("app.update.staging.enabled", true);
   pref("app.update.BITS.enabled", true);
 #endif
 
-pref("app.update.langpack.enabled", true);
+pref("app.update.langpack.enabled", false);
 
 #if defined(MOZ_UPDATE_AGENT)
   pref("app.update.background.loglevel", "error");
@@ -231,7 +231,7 @@ pref("app.update.multiSessionInstallLockout.enabled", true);
 //  extensions.{GUID}.update.url
 //  .. etc ..
 //
-pref("extensions.update.enabled", true);
+pref("extensions.update.enabled", false);
 pref("extensions.update.url", "https://versioncheck.addons.mozilla.org/update/VersionCheck.php?reqVersion=%REQ_VERSION%&id=%ITEM_ID%&version=%ITEM_VERSION%&maxAppVersion=%ITEM_MAXAPPVERSION%&status=%ITEM_STATUS%&appID=%APP_ID%&appVersion=%APP_VERSION%&appOS=%APP_OS%&appABI=%APP_ABI%&locale=%APP_LOCALE%&currentAppVersion=%CURRENT_APP_VERSION%&updateType=%UPDATE_TYPE%&compatMode=%COMPATIBILITY_MODE%");
 pref("extensions.update.background.url", "https://versioncheck-bg.addons.mozilla.org/update/VersionCheck.php?reqVersion=%REQ_VERSION%&id=%ITEM_ID%&version=%ITEM_VERSION%&maxAppVersion=%ITEM_MAXAPPVERSION%&status=%ITEM_STATUS%&appID=%APP_ID%&appVersion=%APP_VERSION%&appOS=%APP_OS%&appABI=%APP_ABI%&locale=%APP_LOCALE%&currentAppVersion=%CURRENT_APP_VERSION%&updateType=%UPDATE_TYPE%&compatMode=%COMPATIBILITY_MODE%");
 pref("extensions.update.interval", 86400);  // Check for updates to Extensions and
@@ -276,7 +276,7 @@ pref("browser.fixup.dns_first_for_single_words", false);
 #ifdef UNIX_BUT_NOT_MAC
   pref("general.autoScroll", false);
 #else
-  pref("general.autoScroll", true);
+  pref("general.autoScroll", false);
 #endif
 
 // UI density of the browser chrome. This mostly affects toolbarbutton
@@ -286,7 +286,7 @@ pref("browser.uidensity", 0);
 // while the user is in a touch environment (such as Windows tablet mode).
 pref("browser.touchmode.auto", true);
 // Whether Firefox will show the Compact Mode UIDensity option.
-pref("browser.compactmode.show", false);
+pref("browser.compactmode.show", true);
 
 // At startup, check if we're the default browser and prompt user if not.
 pref("browser.shell.checkDefaultBrowser", true);
@@ -323,8 +323,8 @@ pref("browser.shell.setDefaultGuidanceNotifications", true);
 
 
 // 0 = blank, 1 = home (browser.startup.homepage), 2 = last visited page, 3 = resume previous browser session
-// The behavior of option 3 is detailed at: http://wiki.mozilla.org/Session_Restore
-pref("browser.startup.page",                1);
+// The behavior of option 3 is detailed at: https://wiki.mozilla.org/Session_Restore
+pref("browser.startup.page",                3);
 pref("browser.startup.homepage",            "about:home");
 pref("browser.startup.homepage.abouthome_cache.enabled", true);
 pref("browser.startup.homepage.abouthome_cache.loglevel", "Warn");
@@ -352,7 +352,7 @@ pref("browser.startup.preXulSkeletonUI", true);
 // Whether the checkbox to enable Windows launch on login is shown
 pref("browser.startup.windowsLaunchOnLogin.enabled", true);
 // Whether to show the launch on login infobar notification
-pref("browser.startup.windowsLaunchOnLogin.disableLaunchOnLoginPrompt", false);
+pref("browser.startup.windowsLaunchOnLogin.disableLaunchOnLoginPrompt", true);
 #endif
 
 // Show an upgrade dialog on major upgrades.
@@ -364,7 +364,7 @@ pref("browser.warnOnQuit", true);
 
 // Whether to warn when quitting when using the shortcut key.
 #if defined(XP_WIN)
-  pref("browser.warnOnQuitShortcut", false);
+  pref("browser.warnOnQuitShortcut", true);
 #else
   pref("browser.warnOnQuitShortcut", true);
 #endif
@@ -453,7 +453,7 @@ pref("browser.urlbar.suggest.remotetab",            true);
 pref("browser.urlbar.suggest.searches",             true);
 pref("browser.urlbar.suggest.topsites",             true);
 pref("browser.urlbar.suggest.engines",              true);
-pref("browser.urlbar.suggest.calculator",           false);
+pref("browser.urlbar.suggest.calculator",           true);
 pref("browser.urlbar.suggest.recentsearches",       true);
 pref("browser.urlbar.suggest.quickactions",         true);
 
@@ -470,9 +470,9 @@ pref("browser.urlbar.scotchBonnet.enableOverride", false);
 pref("browser.urlbar.unifiedSearchButton.always", false);
 
 // Enable trending suggestions and recent searches.
-pref("browser.urlbar.trending.featureGate", true);
+pref("browser.urlbar.trending.featureGate", false);
 pref("browser.urlbar.trending.requireSearchMode", false);
-pref("browser.urlbar.recentsearches.featureGate", true);
+pref("browser.urlbar.recentsearches.featureGate", false);
 
 // Enable Rich Entities.
 pref("browser.urlbar.richSuggestions.featureGate", true);
@@ -593,7 +593,7 @@ pref("browser.urlbar.quicksuggest.mlEnabled", false);
 #ifdef NIGHTLY_BUILD
 pref("browser.urlbar.unitConversion.enabled", true);
 #else
-pref("browser.urlbar.unitConversion.enabled", false);
+pref("browser.urlbar.unitConversion.enabled", true);
 #endif
 
 // Whether to show search suggestions before general results like history and
@@ -644,12 +644,12 @@ pref("browser.urlbar.sponsoredTopSites", false);
 #if defined(EARLY_BETA_OR_EARLIER)
 pref("browser.urlbar.showSearchTerms.featureGate", true);
 #else
-pref("browser.urlbar.showSearchTerms.featureGate", false);
+pref("browser.urlbar.showSearchTerms.featureGate", true);
 #endif
 
 // If true, show the search term in the Urlbar while on
 // a default search engine results page.
-pref("browser.urlbar.showSearchTerms.enabled", true);
+pref("browser.urlbar.showSearchTerms.enabled", false);
 
 // Whether the urlbar displays one-offs to filter searches to history,
 // bookmarks, or tabs.
@@ -928,15 +928,15 @@ pref("permissions.manager.defaultsUrl", "resource://app/defaults/permissions");
 
 // Set default fallback values for site permissions we want
 // the user to be able to globally change.
-pref("permissions.default.camera", 0);
-pref("permissions.default.microphone", 0);
-pref("permissions.default.geo", 0);
-pref("permissions.default.xr", 0);
-pref("permissions.default.desktop-notification", 0);
+pref("permissions.default.camera", 2);
+pref("permissions.default.microphone", 2);
+pref("permissions.default.geo", 2);
+pref("permissions.default.xr", 2);
+pref("permissions.default.desktop-notification", 2);
 pref("permissions.default.shortcuts", 0);
 
 pref("permissions.desktop-notification.postPrompt.enabled", true);
-pref("permissions.desktop-notification.notNow.enabled", false);
+pref("permissions.desktop-notification.notNow.enabled", true);
 
 pref("permissions.fullscreen.allowed", false);
 
@@ -970,7 +970,7 @@ pref("browser.link.open_newwindow.override.external", -1);
 // 0: no restrictions - divert everything
 // 1: don't divert window.open at all
 // 2: don't divert window.open with features
-pref("browser.link.open_newwindow.restriction", 2);
+pref("browser.link.open_newwindow.restriction", 0);
 
 // If true, this pref causes windows opened by window.open to be forced into new
 // tabs (rather than potentially opening separate windows, depending on
@@ -985,7 +985,7 @@ pref("browser.link.open_newwindow.restriction", 2);
 
 // Tabbed browser
 pref("browser.tabs.closeTabByDblclick", false);
-pref("browser.tabs.closeWindowWithLastTab", true);
+pref("browser.tabs.closeWindowWithLastTab", false);
 pref("browser.tabs.allowTabDetach", true);
 // Open related links to a tab, e.g., link in current tab, at next to the
 // current tab if |insertRelatedAfterCurrent| is true.  Otherwise, always
@@ -995,25 +995,25 @@ pref("browser.tabs.insertRelatedAfterCurrent", true);
 // if |insertAfterCurrent| is true.  Otherwise, append new tab to the end
 // for non-related links. Note that if this is set to true, it will trump
 // the value of browser.tabs.insertRelatedAfterCurrent.
-pref("browser.tabs.insertAfterCurrent", false);
+pref("browser.tabs.insertAfterCurrent", true);
 // When |insertRelatedAfterCurrent| is true opening a link from a pinned tab
 // results in the tabbar scrolling back to the beginning. Setting
 // |insertAfterCurrentExceptPinned| to true will add tabs at the end of the
 // tabbar.
-pref("browser.tabs.insertAfterCurrentExceptPinned", false);
-pref("browser.tabs.warnOnClose", false);
+pref("browser.tabs.insertAfterCurrentExceptPinned", true);
+pref("browser.tabs.warnOnClose", true);
 pref("browser.tabs.warnOnCloseOtherTabs", true);
 pref("browser.tabs.warnOnOpen", true);
-pref("browser.tabs.maxOpenBeforeWarn", 15);
+pref("browser.tabs.maxOpenBeforeWarn", 10);
 pref("browser.tabs.loadDivertedInBackground", false);
 pref("browser.tabs.loadBookmarksInBackground", false);
 pref("browser.tabs.loadBookmarksInTabs", false);
-pref("browser.tabs.tabClipWidth", 140);
-pref("browser.tabs.tabMinWidth", 76);
+pref("browser.tabs.tabClipWidth", 180);
+pref("browser.tabs.tabMinWidth", 130);
 // Users running in any of the following language codes will have the
 // secondary text on tabs hidden due to size constraints and readability
 // of the text at small font sizes.
-pref("browser.tabs.secondaryTextUnsupportedLocales", "ar,bn,bo,ckb,fa,gu,he,hi,ja,km,kn,ko,lo,mr,my,ne,pa,si,ta,te,th,ur,zh");
+pref("browser.tabs.secondaryTextUnsupportedLocales", "ar,bn,bo,ckb,fa,gu,he,hi,km,kn,lo,mr,my,ne,pa,si,ta,te,th,ur");
 
 // When tabs opened by links in other tabs via a combination of
 // browser.link.open_newwindow being set to 3 and target="_blank" etc are
@@ -1078,7 +1078,7 @@ pref("security.allow_parent_unrestricted_js_loads", false);
 
 // Tab Unloader does not unload tabs whose last inactive period is longer than
 // this value (in milliseconds).
-pref("browser.tabs.min_inactive_duration_before_unload", 600000);
+pref("browser.tabs.min_inactive_duration_before_unload", 1200_000);
 
 // Does middleclick paste of clipboard to new tab button
 #ifdef UNIX_BUT_NOT_MAC
@@ -1106,7 +1106,7 @@ pref("browser.tabs.searchclipboardfor.middleclick", false);
   #if defined(NIGHTLY_BUILD)
   pref("browser.lowMemoryResponseMask", 3);
   #else
-  pref("browser.lowMemoryResponseMask", 0);
+  pref("browser.lowMemoryResponseMask", 3);
   #endif
 
   // Controls which macOS memory-pressure level triggers the browser low memory
@@ -1121,7 +1121,7 @@ pref("browser.tabs.searchclipboardfor.middleclick", false);
   pref("browser.lowMemoryResponseOnWarn", false);
 #endif
 
-pref("browser.ctrlTab.sortByRecentlyUsed", false);
+pref("browser.ctrlTab.sortByRecentlyUsed", true);
 
 // By default, do not export HTML at shutdown.
 // If true, at shutdown the bookmarks in your menu and toolbar will
@@ -1152,8 +1152,8 @@ pref("browser.tabs.allow_transparent_browser", false);
 // Scripts & Windows prefs
 pref("dom.disable_open_during_load",              true);
 
-// allow JS to move and resize existing windows
-pref("dom.disable_window_move_resize",            false);
+// prevent JS to move and resize existing windows
+pref("dom.disable_window_move_resize",            true);
 // prevent JS from monkeying with window focus, etc
 pref("dom.disable_window_flip",                   true);
 
@@ -1206,7 +1206,7 @@ pref("privacy.history.custom",              false);
 // 4 - Today
 // 5 - Last 5 minutes
 // 6 - Last 24 hours
-pref("privacy.sanitize.timeSpan", 1);
+pref("privacy.sanitize.timeSpan", 0);
 
 pref("privacy.sanitize.useOldClearHistoryDialog", false);
 
@@ -1326,7 +1326,7 @@ pref("browser.preferences.experimental", true);
 // Whether we had to hide the "Firefox Labs" section because it would be empty.
 pref("browser.preferences.experimental.hidden", false);
 // Whether we show the "More from Mozilla" section.
-pref("browser.preferences.moreFromMozilla", true);
+pref("browser.preferences.moreFromMozilla", false);
 
 // Used by settings to track whether the user customized advanced
 // performance settings. Not used directly elsewhere.
@@ -1776,7 +1776,7 @@ pref("browser.topsites.component.enabled", false);
 
 pref("browser.topsites.useRemoteSetting", true);
 // Fetch sponsored Top Sites from Mozilla Tiles Service (Contile)
-pref("browser.topsites.contile.enabled", true);
+pref("browser.topsites.contile.enabled", false);
 pref("browser.topsites.contile.endpoint", "https://contile.services.mozilla.com/v1/tiles");
 
 // Whether to enable the Share-of-Voice feature for Sponsored Topsites via Contile.
@@ -1785,7 +1785,7 @@ pref("browser.topsites.contile.sov.enabled", true);
 // The base URL for the Quick Suggest anonymizing proxy. To make a request to
 // the proxy, include a campaign ID in the path.
 pref("browser.partnerlink.attributionURL", "https://topsites.services.mozilla.com/cid/");
-pref("browser.partnerlink.campaign.topsites", "amzn_2020_a1");
+pref("browser.partnerlink.campaign.topsites", "");
 
 // Activates preloading of the new tab url.
 pref("browser.newtab.preload", true);
@@ -1801,7 +1801,7 @@ pref("browser.newtabpage.activity-stream.unifiedAds.spocs.enabled", false);
 pref("browser.newtabpage.activity-stream.unifiedAds.endpoint", "https://ads.mozilla.org/");
 
 // Weather widget for newtab
-pref("browser.newtabpage.activity-stream.showWeather", true);
+pref("browser.newtabpage.activity-stream.showWeather", false);
 pref("browser.newtabpage.activity-stream.weather.query", "");
 pref("browser.newtabpage.activity-stream.weather.display", "simple");
 
@@ -1865,10 +1865,10 @@ pref("messaging-system.askForFeedback", true);
 
 // The pref that controls if ASRouter uses the remote fluent files.
 // It's enabled by default, but could be disabled to force ASRouter to use the local files.
-pref("browser.newtabpage.activity-stream.asrouter.useRemoteL10n", true);
+pref("browser.newtabpage.activity-stream.asrouter.useRemoteL10n", false);
 
 // These prefs control if Discovery Stream is enabled.
-pref("browser.newtabpage.activity-stream.discoverystream.enabled", true);
+pref("browser.newtabpage.activity-stream.discoverystream.enabled", false);
 pref("browser.newtabpage.activity-stream.discoverystream.hardcoded-basic-layout", false);
 pref("browser.newtabpage.activity-stream.discoverystream.hybridLayout.enabled", false);
 pref("browser.newtabpage.activity-stream.discoverystream.hideCardBackground.enabled", false);
@@ -2082,10 +2082,10 @@ pref("browser.ml.chat.prompts.2", '{"id":"simplify","l10nId":"genai-prompts-simp
 pref("browser.ml.chat.prompts.3", '{"id":"quiz","l10nId":"genai-prompts-quiz","targeting":"!provider|regExpMatch(\'gemini\') || region == \'US\'"}');
 pref("browser.ml.chat.prompts.4", '{"id":"proofread", "l10nId":"genai-prompts-proofread"}');
 pref("browser.ml.chat.provider", "");
-pref("browser.ml.chat.shortcuts", true);
-pref("browser.ml.chat.shortcuts.custom", true);
+pref("browser.ml.chat.shortcuts", false);
+pref("browser.ml.chat.shortcuts.custom", false);
 pref("browser.ml.chat.shortcuts.longPress", 60000);
-pref("browser.ml.chat.sidebar", true);
+pref("browser.ml.chat.sidebar", false);
 
 // Block insecure active content on https pages
 pref("security.mixed_content.block_active_content", true);
@@ -2219,7 +2219,7 @@ pref("browser.translation.neverForLanguages", "");
 
 // Enable Firefox translations powered by the Bergamot translations
 // engine https://browser.mt/.
-pref("browser.translations.enable", true);
+pref("browser.translations.enable", false);
 
 // Enable the new Firefox Translations Settings UI Design
 pref("browser.translations.newSettingsUI.enable", false);
@@ -2381,7 +2381,7 @@ pref("browser.promo.focus.disallowed_regions", "cn");
 pref("browser.promo.focus.enabled", true);
 
 // Default to enabling pin promos to be shown where allowed.
-pref("browser.promo.pin.enabled", true);
+pref("browser.promo.pin.enabled", false);
 
 // Default to enabling cookie banner reduction promos to be shown where allowed.
 // Set to true for Fx113 (see bug 1808611)
@@ -2419,7 +2419,7 @@ pref("browser.contentblocking.cfr-milestone.milestone-achieved", 0);
 pref("browser.contentblocking.cfr-milestone.milestones", "[1000, 5000, 10000, 25000, 50000, 100000, 250000, 314159, 500000, 750000, 1000000, 1250000, 1500000, 1750000, 2000000, 2250000, 2500000, 8675309]");
 
 // Controls the initial state of the protections panel collapsible info message.
-pref("browser.protections_panel.infoMessage.seen", false);
+pref("browser.protections_panel.infoMessage.seen", true);
 
 // Always enable newtab segregation using containers
 pref("privacy.usercontext.about_newtab_segregation.enabled", true);
@@ -2586,7 +2586,7 @@ pref("browser.migrate.preferences-entrypoint.enabled", true);
 pref("extensions.pocket.api", "api.getpocket.com");
 pref("extensions.pocket.bffApi", "firefox-api-proxy.cdn.mozilla.net");
 pref("extensions.pocket.bffRecentSaves", true);
-pref("extensions.pocket.enabled", true);
+pref("extensions.pocket.enabled", false);
 pref("extensions.pocket.oAuthConsumerKey", "40249-e88c401e1b1f2242d9e441c4");
 pref("extensions.pocket.oAuthConsumerKeyBff", "94110-6d5ff7a89d72c869766af0e0");
 pref("extensions.pocket.site", "getpocket.com");
@@ -2607,7 +2607,7 @@ pref("extensions.pocket.refresh.hideRecentSaves.enabled", false);
 // "offered"        - we have offered feature to user and they have not yet made a decision.
 // "enabled"        - user opted in to the feature.
 // "disabled"       - user opted out of the feature.
-pref("signon.firefoxRelay.feature", "available");
+pref("signon.firefoxRelay.feature", "disabled");
 // Should Firefox show Relay to all browsers, or only those signed-in to FxA?
 // Keep it hidden from about:config for now.
 // pref("signon.firefoxRelay.showToAllBrowsers", false);
@@ -2696,7 +2696,7 @@ pref("app.normandy.onsync_skew_sec", 600);
 //      the app and browser.
 #if defined(RELEASE_OR_BETA) && !defined(MOZ_DEV_EDITION)
   pref("intl.multilingual.enabled", true);
-  pref("intl.multilingual.downloadEnabled", true);
+  pref("intl.multilingual.downloadEnabled", false);
   pref("intl.multilingual.liveReload", true);
   pref("intl.multilingual.liveReloadBidirectional", false);
   pref("intl.multilingual.aboutWelcome.languageMismatchEnabled", true);
@@ -2718,12 +2718,12 @@ pref("browser.discovery.containers.enabled", true);
 pref("browser.discovery.sites", "addons.mozilla.org");
 
 pref("browser.engagement.recent_visited_origins.expiry", 86400); // 24 * 60 * 60 (24 hours in seconds)
-pref("browser.engagement.downloads-button.has-used", false);
+pref("browser.engagement.downloads-button.has-used", true);
 pref("browser.engagement.fxa-toolbar-menu-button.has-used", false);
-pref("browser.engagement.home-button.has-used", false);
-pref("browser.engagement.sidebar-button.has-used", false);
-pref("browser.engagement.library-button.has-used", false);
-pref("browser.engagement.ctrlTab.has-used", false);
+pref("browser.engagement.home-button.has-used", true);
+pref("browser.engagement.sidebar-button.has-used", true);
+pref("browser.engagement.library-button.has-used", true);
+pref("browser.engagement.ctrlTab.has-used", true);
 
 pref("browser.aboutConfig.showWarning", true);
 
@@ -2754,10 +2754,10 @@ pref("identity.fxaccounts.toolbar.defaultVisible", true);
 
 // Prefs to control Firefox Account panels that shows call to actions
 // for other supported Mozilla products
-pref("identity.fxaccounts.toolbar.pxiToolbarEnabled", true);
-pref("identity.fxaccounts.toolbar.pxiToolbarEnabled.monitorEnabled", true);
-pref("identity.fxaccounts.toolbar.pxiToolbarEnabled.relayEnabled", true);
-pref("identity.fxaccounts.toolbar.pxiToolbarEnabled.vpnEnabled", true);
+pref("identity.fxaccounts.toolbar.pxiToolbarEnabled", false);
+pref("identity.fxaccounts.toolbar.pxiToolbarEnabled.monitorEnabled", false);
+pref("identity.fxaccounts.toolbar.pxiToolbarEnabled.relayEnabled", false);
+pref("identity.fxaccounts.toolbar.pxiToolbarEnabled.vpnEnabled", false);
 
 // Prefs to control Mozilla account panels that shows an updated flow
 // for users who don't have sync enabled
@@ -2797,16 +2797,16 @@ pref("devtools.every-frame-target.enabled", true);
 
 // Controls the hability to debug popups from the same DevTools
 // of the original tab the popups are coming from
-pref("devtools.popups.debug", false);
+pref("devtools.popups.debug", true);
 
 // Toolbox Button preferences
 pref("devtools.command-button-pick.enabled", true);
 pref("devtools.command-button-frames.enabled", true);
 pref("devtools.command-button-responsive.enabled", true);
-pref("devtools.command-button-screenshot.enabled", false);
-pref("devtools.command-button-rulers.enabled", false);
-pref("devtools.command-button-measure.enabled", false);
-pref("devtools.command-button-noautohide.enabled", false);
+pref("devtools.command-button-screenshot.enabled", true);
+pref("devtools.command-button-rulers.enabled", true);
+pref("devtools.command-button-measure.enabled", true);
+pref("devtools.command-button-noautohide.enabled", true);
 pref("devtools.command-button-errorcount.enabled", true);
 #ifndef MOZILLA_OFFICIAL
   pref("devtools.command-button-experimental-prefs.enabled", true);
@@ -2831,7 +2831,7 @@ pref("devtools.inspector.imagePreviewTooltipSize", 300);
 // Enable user agent style inspection in rule-view
 pref("devtools.inspector.showUserAgentStyles", false);
 // Show native anonymous content and user agent shadow roots
-pref("devtools.inspector.showAllAnonymousContent", false);
+pref("devtools.inspector.showAllAnonymousContent", true);
 // Enable overflow debugging in the inspector.
 pref("devtools.overflow.debugging.enabled", true);
 // Enable drag to edit properties in the inspector rule view.
@@ -2869,7 +2869,7 @@ pref("devtools.layout.grid.opened", true);
 #if defined(NIGHTLY_BUILD)
   pref("devtools.layout.boxmodel.highlightProperty", true);
 #else
-  pref("devtools.layout.boxmodel.highlightProperty", false);
+  pref("devtools.layout.boxmodel.highlightProperty", true);
 #endif
 
 // By how many times eyedropper will magnify pixels
@@ -2973,13 +2973,13 @@ pref("devtools.styleeditor.transitions", true);
 
 // Screenshot Option Settings.
 pref("devtools.screenshot.clipboard.enabled", false);
-pref("devtools.screenshot.audio.enabled", true);
+pref("devtools.screenshot.audio.enabled", false);
 
 // Make sure the DOM panel is hidden by default
 pref("devtools.dom.enabled", false);
 
-// Enable the Accessibility panel.
-pref("devtools.accessibility.enabled", true);
+// Disable the Accessibility panel.
+pref("devtools.accessibility.enabled", false);
 
 // Web console filters
 pref("devtools.webconsole.filter.error", true);
@@ -3017,19 +3017,19 @@ pref("devtools.webconsole.inputHistoryCount", 300);
 // Persistent logging: |true| if you want the relevant tool to keep all of the
 // logged messages after reloading the page, |false| if you want the output to
 // be cleared each time page navigation happens.
-pref("devtools.webconsole.persistlog", false);
+pref("devtools.webconsole.persistlog", true);
 pref("devtools.netmonitor.persistlog", false);
 
 // Web Console timestamp: |true| if you want the logs and instructions
 // in the Web Console to display a timestamp, or |false| to not display
 // any timestamps.
-pref("devtools.webconsole.timestampMessages", false);
+pref("devtools.webconsole.timestampMessages", true);
 
 // Enable the webconsole sidebar toggle in Nightly builds.
 #if defined(NIGHTLY_BUILD)
   pref("devtools.webconsole.sidebarToggle", true);
 #else
-  pref("devtools.webconsole.sidebarToggle", false);
+  pref("devtools.webconsole.sidebarToggle", true);
 #endif
 
 // Saved editor mode state in the console.
@@ -3062,8 +3062,8 @@ pref("devtools.hud.loglimit", 10000);
 // - autoclosebrackets: whether to permit automatic bracket/quote closing.
 // - detectindentation: whether to detect the indentation from the file
 // - enableCodeFolding: Whether to enable code folding or not.
-pref("devtools.editor.tabsize", 2);
-pref("devtools.editor.expandtab", true);
+pref("devtools.editor.tabsize", 4);
+pref("devtools.editor.expandtab", false);
 pref("devtools.editor.keymap", "default");
 pref("devtools.editor.autoclosebrackets", true);
 pref("devtools.editor.detectindentation", true);
@@ -3171,7 +3171,7 @@ pref("first-startup.timeout", 30000);
 #ifdef MOZ_DEV_EDITION
   pref("browser.menu.showViewImageInfo", true);
 #else
-  pref("browser.menu.showViewImageInfo", false);
+  pref("browser.menu.showViewImageInfo", true);
 #endif
 
 // Handing URLs to external apps via the "Share URL" menu item could allow a proxy bypass
diff --git a/browser/app/firefox.exe.manifest b/browser/app/snowfox.exe.manifest
similarity index 96%
rename from browser/app/firefox.exe.manifest
rename to browser/app/snowfox.exe.manifest
index 995b2fc869c1..09b2a52f43c6 100644
--- a/browser/app/firefox.exe.manifest
+++ b/browser/app/snowfox.exe.manifest
@@ -3,10 +3,10 @@
 <assemblyIdentity
         version="1.0.0.0"
         processorArchitecture="*"
-        name="Firefox"
+        name="Snowfox"
         type="win32"
 />
-<description>Firefox</description>
+<description>Snowfox</description>
 <dependency>
         <dependentAssembly>
                 <assemblyIdentity
diff --git a/browser/app/splash.rc b/browser/app/splash.rc
index 259a8068c3aa..217d8ff8c9f2 100644
--- a/browser/app/splash.rc
+++ b/browser/app/splash.rc
@@ -6,9 +6,9 @@
 #include <windows.h>
 #include "nsNativeAppSupportWin.h"
 
-IDI_APPICON ICON FIREFOX_ICO
+IDI_APPICON ICON SNOWFOX_ICO
 IDI_DOCUMENT ICON DOCUMENT_ICO
-IDI_APPLICATION ICON FIREFOX_ICO
+IDI_APPLICATION ICON SNOWFOX_ICO
 IDI_NEWWINDOW ICON NEWWINDOW_ICO
 IDI_NEWTAB ICON NEWTAB_ICO
 IDI_PBMODE ICON PBMODE_ICO
diff --git a/browser/app/winlauncher/ErrorHandler.cpp b/browser/app/winlauncher/ErrorHandler.cpp
index 706842446bf8..60c689086fca 100644
--- a/browser/app/winlauncher/ErrorHandler.cpp
+++ b/browser/app/winlauncher/ErrorHandler.cpp
@@ -384,12 +384,12 @@ static bool AddModuleInfo(const nsAutoHandle& aSnapshot,
     aJson.StartArrayProperty(mozilla::MakeStringSpan(leafUtf8.get()));
 
     std::string version;
-    DWORD verInfoSize = ::GetFileVersionInfoSizeW(module.szExePath, nullptr);
+    DWORD verInfoSize = ::GetFileVersionInfoSizeExW(0, module.szExePath, nullptr);
     if (verInfoSize) {
       auto verInfoBuf = mozilla::MakeUnique<BYTE[]>(verInfoSize);
 
-      if (::GetFileVersionInfoW(module.szExePath, 0, verInfoSize,
-                                verInfoBuf.get())) {
+      if (::GetFileVersionInfoExW(0, module.szExePath, 0, verInfoSize,
+                                  verInfoBuf.get())) {
         VS_FIXEDFILEINFO* fixedInfo = nullptr;
         UINT fixedInfoLen = 0;
 
diff --git a/browser/base/content/aboutDialog.css b/browser/base/content/aboutDialog.css
index e1e95883da9e..b50ca0cf2eb3 100644
--- a/browser/base/content/aboutDialog.css
+++ b/browser/base/content/aboutDialog.css
@@ -24,22 +24,22 @@
   /* min-width and min-height create room for the logo; logo is 192px tall w/
      40px above it, this leaves 8px on the bottom at the minimum height */
   min-width: 210px;
-  min-height: 240px;
-  margin-top: 20px;
+  min-height: 256px;
+  /* margin-top: 20px; */
   margin-inline-start: 30px;
 }
 
 #rightBox {
-  background-image: url("chrome://branding/content/about-wordmark.svg");
+  /* background-image: url("chrome://branding/content/about-wordmark.svg"); */
   background-repeat: no-repeat;
-  background-size: 288px auto;
+  background-size: 200px auto;
   /* padding-top creates room for the wordmark */
   padding-top: 38px;
-  margin-top: 20px;
+  /* margin-top: 20px; */
   /* We don't want this box to contribute arbitrarily to the intrinsic size of
    * the dialog, so set the width to a reasonable size, but let it flex to take
    * all available space. */
-  width: 430px;
+  width: 330px;
   flex: 1 auto;
 
   &:-moz-locale-dir(rtl) {
@@ -49,7 +49,7 @@
 
 #clientBox {
   flex: 1 0 auto;
-  padding: 10px 0 15px;
+  /* padding: 10px 0 15px; */
 }
 
 #bottomBox {
@@ -57,6 +57,13 @@
   min-height: 52px;
 }
 
+#snowfox {
+  font-weight: bold;
+  font-size: 300%;
+  margin-top: 10px;
+  margin-inline-start: 0;
+}
+
 #release {
   font-weight: bold;
   font-size: 125%;
@@ -65,15 +72,11 @@
 }
 
 #version {
-  font-weight: bold;
+  font-weight: normal;
   margin-inline-start: 0;
   user-select: text;
   -moz-user-focus: normal;
   cursor: text;
-
-  &.update {
-    font-weight: normal;
-  }
 }
 
 #distribution,
diff --git a/browser/base/content/aboutDialog.js b/browser/base/content/aboutDialog.js
index f6e1391baf12..79cf300c2e13 100644
--- a/browser/base/content/aboutDialog.js
+++ b/browser/base/content/aboutDialog.js
@@ -52,28 +52,27 @@ function init() {
   ]);
   let versionIdKey = "base";
   let versionAttributes = {
-    version: AppConstants.MOZ_APP_VERSION_DISPLAY,
+    version: "v" + AppConstants.MOZ_APP_VERSION_DISPLAY,
   };
 
   let arch = Services.sysinfo.get("arch");
   if (["x86", "x86-64"].includes(arch)) {
     versionAttributes.bits = Services.appinfo.is64Bit ? 64 : 32;
   } else {
-    versionIdKey += "-arch";
     versionAttributes.arch = arch;
   }
 
   let version = Services.appinfo.version;
-  if (/a\d+$/.test(version)) {
-    versionIdKey += "-nightly";
+  if (version) {
     let buildID = Services.appinfo.appBuildID;
     let year = buildID.slice(0, 4);
     let month = buildID.slice(4, 6);
     let day = buildID.slice(6, 8);
     versionAttributes.isodate = `${year}-${month}-${day}`;
 
-    document.getElementById("experimental").hidden = false;
+    document.getElementById("experimental").hidden = true;
     document.getElementById("communityDesc").hidden = true;
+    document.getElementById("contributeDesc").hidden = true;
   }
 
   // Use Fluent arguments for append version and the architecture of the build
diff --git a/browser/base/content/aboutDialog.xhtml b/browser/base/content/aboutDialog.xhtml
index 9e290659076b..f65d624fb0bc 100644
--- a/browser/base/content/aboutDialog.xhtml
+++ b/browser/base/content/aboutDialog.xhtml
@@ -40,6 +40,7 @@
     <hbox id="clientBox">
       <vbox id="leftBox" flex="1"/>
       <vbox id="rightBox">
+        <label id="snowfox">Snowfox</label>
         <label id="release" hidden="true">
         <!-- This string is explicitly not translated -->
           Extended Support Release
@@ -119,17 +120,17 @@
           <vbox id="experimental" hidden="true">
             <description class="text-blurb" id="warningDesc" data-l10n-id="warningDesc-version"></description>
             <description class="text-blurb" id="communityExperimentalDesc" data-l10n-id="community-exp">
-              <label is="text-link" href="https://www.mozilla.org/?utm_source=firefox-browser&#38;utm_medium=firefox-desktop&#38;utm_campaign=about-dialog" data-l10n-name="community-exp-mozillaLink"/>
+              <label is="text-link" href="https://www.mozilla.org/" data-l10n-name="community-exp-mozillaLink"/>
               <label is="text-link" useoriginprincipal="true" href="about:credits" data-l10n-name="community-exp-creditsLink"/>
             </description>
           </vbox>
           <description class="text-blurb" id="communityDesc" data-l10n-id="community-2">
-            <label is="text-link" href="https://www.mozilla.org/?utm_source=firefox-browser&#38;utm_medium=firefox-desktop&#38;utm_campaign=about-dialog" data-l10n-name="community-mozillaLink"/>
+            <label is="text-link" href="https://www.mozilla.org/" data-l10n-name="community-mozillaLink"/>
             <label is="text-link" useoriginprincipal="true" href="about:credits" data-l10n-name="community-creditsLink"/>
           </description>
           <description class="text-blurb" id="contributeDesc" data-l10n-id="helpus">
             <label is="text-link" href="https://foundation.mozilla.org/?form=firefox-about" data-l10n-name="helpus-donateLink"/>
-            <label is="text-link" href="https://www.mozilla.org/contribute/?utm_source=firefox-browser&#38;utm_medium=firefox-desktop&#38;utm_campaign=about-dialog" data-l10n-name="helpus-getInvolvedLink"/>
+            <label is="text-link" href="https://www.mozilla.org/contribute/" data-l10n-name="helpus-getInvolvedLink"/>
           </description>
         </vbox>
       </vbox>
@@ -138,7 +139,7 @@
       <hbox pack="center">
         <label is="text-link" class="bottom-link" useoriginprincipal="true" href="about:license" data-l10n-id="bottomLinks-license"/>
         <label is="text-link" class="bottom-link" useoriginprincipal="true" href="about:rights" data-l10n-id="bottomLinks-rights"/>
-        <label is="text-link" class="bottom-link" href="https://www.mozilla.org/privacy/?utm_source=firefox-browser&#38;utm_medium=firefox-desktop&#38;utm_campaign=about-dialog" data-l10n-id="bottomLinks-privacy"/>
+        <label is="text-link" class="bottom-link" href="https://www.mozilla.org/privacy/" hidden="true" data-l10n-id="bottomLinks-privacy"/>
       </hbox>
       <description id="trademark" data-l10n-id="trademarkInfo"></description>
     </vbox>
diff --git a/browser/base/content/overrides/app-license.html b/browser/base/content/overrides/app-license.html
index eafe95498af2..cb02ce718b43 100644
--- a/browser/base/content/overrides/app-license.html
+++ b/browser/base/content/overrides/app-license.html
@@ -1,8 +1,8 @@
 <!-- This Source Code Form is subject to the terms of the Mozilla Public
    - License, v. 2.0. If a copy of the MPL was not distributed with this
-   - file, You can obtain one at http://mozilla.org/MPL/2.0/.  -->
+   - file, You can obtain one at https://mozilla.org/MPL/2.0/.  -->
 <p>
-  <b>Binaries</b> of this product have been made available to you by the
-  <a href="http://www.mozilla.org/">Mozilla Project</a> under the Mozilla Public
+  <b>Binaries</b> of this product have been made available to you
+  under the Mozilla Public
   License 2.0 (MPL). <a href="about:rights">Know your rights</a>.
 </p>
diff --git a/browser/branding/branding-common.mozbuild b/browser/branding/branding-common.mozbuild
index a38663a3dc1e..e92e6acc2f0f 100644
--- a/browser/branding/branding-common.mozbuild
+++ b/browser/branding/branding-common.mozbuild
@@ -17,9 +17,10 @@ def FirefoxBranding():
         ]
 
     if CONFIG["MOZ_WIDGET_TOOLKIT"] == "windows":
+        # must be sorted
         FINAL_TARGET_FILES[".."] += [
-            "firefox.VisualElementsManifest.xml",
             "private_browsing.VisualElementsManifest.xml",
+            "snowfox.VisualElementsManifest.xml",
         ]
         FINAL_TARGET_FILES.VisualElements += [
             "PrivateBrowsing_150.png",
diff --git a/browser/components/asrouter/modules/FeatureCalloutMessages.sys.mjs b/browser/components/asrouter/modules/FeatureCalloutMessages.sys.mjs
index a56323384395..57067bf56ed0 100644
--- a/browser/components/asrouter/modules/FeatureCalloutMessages.sys.mjs
+++ b/browser/components/asrouter/modules/FeatureCalloutMessages.sys.mjs
@@ -1415,6 +1415,7 @@ const MESSAGES = () => {
     "FIREFOX_VIEW",
     messages
   );
+  messages.length = 0;
   return messages;
 };
 
diff --git a/browser/components/enterprisepolicies/content/aboutPolicies.css b/browser/components/enterprisepolicies/content/aboutPolicies.css
index 5fbeb16ba201..e6a3eef93230 100644
--- a/browser/components/enterprisepolicies/content/aboutPolicies.css
+++ b/browser/components/enterprisepolicies/content/aboutPolicies.css
@@ -33,6 +33,7 @@ body {
 
 .tab table {
   width: 100%;
+  table-layout: fixed;
 }
 
 tbody tr {
@@ -57,6 +58,13 @@ th {
 
 td {
   padding: 1rem;
+  word-break: break-all;
+
+  &.data_urls {
+    overflow: hidden;
+    text-overflow: ellipsis;
+    white-space: nowrap;
+  }
 }
 
 /*
diff --git a/browser/components/enterprisepolicies/content/aboutPolicies.js b/browser/components/enterprisepolicies/content/aboutPolicies.js
index a7a380c075b1..cd73e55ab51e 100644
--- a/browser/components/enterprisepolicies/content/aboutPolicies.js
+++ b/browser/components/enterprisepolicies/content/aboutPolicies.js
@@ -17,6 +17,9 @@ function col(text, className) {
   if (className) {
     column.classList.add(className);
   }
+  if (/^"data:[^,]*,.+"$/.test(text)) {
+    column.classList.add("data_urls");
+  }
   let content = document.createTextNode(text);
   column.appendChild(content);
   return column;
@@ -43,18 +46,16 @@ function addMissingColumns() {
       maxColumns = table.rows[i].cells.length;
     }
   }
+  if (maxColumns > 1 && maxColumns < 6) {
+    maxColumns++;
+  }
 
   // add the missing columns
   for (let i = 0, length = table.rows.length; i < length; i++) {
     const rowLength = table.rows[i].cells.length;
 
-    if (rowLength < maxColumns) {
-      let missingColumns = maxColumns - rowLength;
-
-      while (missingColumns > 0) {
-        table.rows[i].insertCell();
-        missingColumns--;
-      }
+    if (0 < rowLength && rowLength < maxColumns) {
+      table.rows[i].cells[rowLength - 1].colSpan = maxColumns - rowLength + 1;
     }
   }
 }
@@ -111,7 +112,7 @@ function generateActivePolicies(data) {
     } else {
       let row = document.createElement("tr");
       row.appendChild(col(policyName));
-      row.appendChild(col(JSON.stringify(data[policyName])));
+      row.appendChild(col(JSON.stringify(data[policyName], null, "\t")));
       row.classList.add(color_class, "last_row");
       new_cont.appendChild(row);
     }
@@ -138,6 +139,9 @@ function generatePolicy(data, row, depth, new_cont, islast, arr_sep = false) {
   const color_class = row.classList.contains("odd") ? "odd" : "even";
 
   if (Array.isArray(data)) {
+    if (!data.length) {
+      data.push(undefined);
+    }
     for (let count in data) {
       if (count == 0) {
         if (count == data.length - 1) {
@@ -154,7 +158,9 @@ function generatePolicy(data, row, depth, new_cont, islast, arr_sep = false) {
         }
       } else if (count == data.length - 1) {
         let last_row = document.createElement("tr");
-        last_row.classList.add(color_class, "arr_sep");
+        if (typeof data[count] != "object") {
+          last_row.classList.add(color_class, "arr_sep");
+        }
 
         for (let i = 0; i < depth; i++) {
           last_row.appendChild(col(""));
@@ -231,7 +237,7 @@ function generatePolicy(data, row, depth, new_cont, islast, arr_sep = false) {
       count++;
     }
   } else {
-    row.appendChild(col(JSON.stringify(data)));
+    row.appendChild(col(JSON.stringify(data) ?? ""));
 
     if (arr_sep) {
       row.classList.add("arr_sep");
@@ -317,7 +323,7 @@ function generateDocumentation() {
     let schema_row = document.createElement("tr");
     if (schema.properties[policyName].properties) {
       let column = col(
-        JSON.stringify(schema.properties[policyName].properties, null, 1),
+        JSON.stringify(schema.properties[policyName].properties, null, "\t"),
         "schema"
       );
       column.colSpan = "2";
@@ -325,7 +331,7 @@ function generateDocumentation() {
       sec_tbody.appendChild(schema_row);
     } else if (schema.properties[policyName].items) {
       let column = col(
-        JSON.stringify(schema.properties[policyName], null, 1),
+        JSON.stringify(schema.properties[policyName], null, "\t"),
         "schema"
       );
       column.colSpan = "2";
@@ -340,7 +346,7 @@ function generateDocumentation() {
         let enum_row = document.createElement("tr");
         column = col(
           "enum: " +
-            JSON.stringify(schema.properties[policyName].enum, null, 1),
+            JSON.stringify(schema.properties[policyName].enum, null, "\t"),
           "schema"
         );
         column.colSpan = "2";
diff --git a/browser/components/enterprisepolicies/schemas/policies-schema.json b/browser/components/enterprisepolicies/schemas/policies-schema.json
index 3eba392f8f0f..10231609558e 100644
--- a/browser/components/enterprisepolicies/schemas/policies-schema.json
+++ b/browser/components/enterprisepolicies/schemas/policies-schema.json
@@ -1385,8 +1385,6 @@
     },
 
     "SearchEngines": {
-      "enterprise_only": true,
-
       "type": "object",
       "properties": {
         "Add": {
diff --git a/browser/components/installerprefs/InstallerPrefs.sys.mjs b/browser/components/installerprefs/InstallerPrefs.sys.mjs
index 2eb9d42fdcb3..3627387c12a8 100644
--- a/browser/components/installerprefs/InstallerPrefs.sys.mjs
+++ b/browser/components/installerprefs/InstallerPrefs.sys.mjs
@@ -44,7 +44,7 @@ export function InstallerPrefs(prefsList) {
   // The path will look something like:
   // "Software\Mozilla\Firefox\Installer\71AE18FE3142402B\".
   ChromeUtils.defineLazyGetter(this, "_registryKeyPath", function () {
-    const app = AppConstants.MOZ_APP_NAME;
+    const app = AppConstants.MOZ_APP_BASENAME;
     const vendor = Services.appinfo.vendor || "Mozilla";
     const xreDirProvider = Cc[
       "@mozilla.org/xre/directory-provider;1"
diff --git a/browser/components/newtab/content-src/components/Logo/Logo.jsx b/browser/components/newtab/content-src/components/Logo/Logo.jsx
index 3560ace2d6f2..eb0c80b5534d 100644
--- a/browser/components/newtab/content-src/components/Logo/Logo.jsx
+++ b/browser/components/newtab/content-src/components/Logo/Logo.jsx
@@ -8,12 +8,12 @@ function Logo() {
   return (
     <h1 className="logo-and-wordmark-wrapper">
       <div
-        className="logo-and-wordmark"
+        className="logo-and-wordmark" hidden={true}
         role="img"
         data-l10n-id="newtab-logo-and-wordmark"
       >
         <div className="logo" />
-        <div className="wordmark" />
+        <div className="wordmark" hidden={true} />
       </div>
     </h1>
   );
diff --git a/browser/components/newtab/css/activity-stream.css b/browser/components/newtab/css/activity-stream.css
index c630cd7bc741..5b549f3f283d 100644
--- a/browser/components/newtab/css/activity-stream.css
+++ b/browser/components/newtab/css/activity-stream.css
@@ -708,6 +708,7 @@ main section {
 .logo-and-wordmark {
   align-items: center;
   display: flex;
+  display: none !important;
   justify-content: center;
   margin-block-end: 48px;
 }
@@ -729,6 +730,7 @@ main section {
   background-size: 105px;
   -moz-context-properties: fill;
   display: inline-block;
+  display: none !important;
   fill: var(--newtab-wordmark-color);
   height: 64px;
   margin-inline-start: 16px;
diff --git a/browser/components/newtab/data/content/activity-stream.bundle.js b/browser/components/newtab/data/content/activity-stream.bundle.js
index 38a8c11b9f2e..3351e049a0d4 100644
--- a/browser/components/newtab/data/content/activity-stream.bundle.js
+++ b/browser/components/newtab/data/content/activity-stream.bundle.js
@@ -11369,13 +11369,13 @@ function Logo() {
   return /*#__PURE__*/external_React_default().createElement("h1", {
     className: "logo-and-wordmark-wrapper"
   }, /*#__PURE__*/external_React_default().createElement("div", {
-    className: "logo-and-wordmark",
+    className: "logo-and-wordmark", hidden: true,
     role: "img",
     "data-l10n-id": "newtab-logo-and-wordmark"
   }, /*#__PURE__*/external_React_default().createElement("div", {
     className: "logo"
   }), /*#__PURE__*/external_React_default().createElement("div", {
-    className: "wordmark"
+    className: "wordmark", hidden: true
   })));
 }
 
diff --git a/browser/components/newtab/lib/ActivityStream.sys.mjs b/browser/components/newtab/lib/ActivityStream.sys.mjs
index 153dbfa89b61..877501efb834 100644
--- a/browser/components/newtab/lib/ActivityStream.sys.mjs
+++ b/browser/components/newtab/lib/ActivityStream.sys.mjs
@@ -281,7 +281,7 @@ export const PREFS_CONFIG = new Map([
     "weather.temperatureUnits",
     {
       title: "Switch the temperature between Celsius and Fahrenheit",
-      getValue: args => (args.locale === "en-US" ? "f" : "c"),
+      getValue: args => (args.locale === "en-US" ? "c" : "c"),
     },
   ],
   [
diff --git a/browser/components/newtab/lib/cache.worker.js b/browser/components/newtab/lib/cache.worker.js
index c1bca2a3c839..520a93a7c382 100644
--- a/browser/components/newtab/lib/cache.worker.js
+++ b/browser/components/newtab/lib/cache.worker.js
@@ -165,7 +165,7 @@ let Agent = {
     );
 
     let { pageTemplate, scriptTemplate } = this.getOrCreateTemplates();
-    let cacheTime = new Date().toUTCString();
+    let cacheTime = new Date().toISOString();
     let page = pageTemplate
       .replace("{{ MARKUP }}", markup)
       .replace("{{ CACHE_TIME }}", cacheTime);
diff --git a/browser/components/preferences/main.inc.xhtml b/browser/components/preferences/main.inc.xhtml
index 770a17fed8f3..d993a52b8506 100644
--- a/browser/components/preferences/main.inc.xhtml
+++ b/browser/components/preferences/main.inc.xhtml
@@ -58,7 +58,7 @@
               data-l10n-id="always-check-default"/>
     <stack id="setDefaultPane">
       <hbox id="isNotDefaultPane" align="center" class="indent">
-        <label class="face-sad" id="isNotDefaultLabel" flex="1" data-l10n-id="is-not-default"/>
+        <label id="isNotDefaultLabel" flex="1" data-l10n-id="is-not-default"/>
         <button id="setDefaultButton"
                 is="highlightable-button"
                 class="accessory-button"
@@ -66,7 +66,7 @@
                 preference="pref.general.disable_button.default_browser"/>
       </hbox>
       <hbox id="isDefaultPane" align="center" class="indent">
-        <label class="face-smile" id="isDefaultLabel" flex="1" data-l10n-id="is-default"/>
+        <label id="isDefaultLabel" flex="1" data-l10n-id="is-default"/>
       </hbox>
     </stack>
   </vbox>
@@ -773,7 +773,7 @@
           support-page="media-keyboard-control"
     />
   </hbox>
-  <hbox align="center" data-subcategory="cfraddons">
+  <hbox align="center" data-subcategory="cfraddons" hidden="true">
     <checkbox id="cfrRecommendations"
             class="tail-with-learn-more"
             data-l10n-id="browsing-cfr-recommendations"
@@ -783,7 +783,7 @@
           support-page="extensionrecommendations"
     />
   </hbox>
-  <hbox align="center" data-subcategory="cfrfeatures">
+  <hbox align="center" data-subcategory="cfrfeatures" hidden="true">
     <checkbox id="cfrRecommendations-features"
             class="tail-with-learn-more"
             data-l10n-id="browsing-cfr-features"
diff --git a/browser/components/preferences/main.js b/browser/components/preferences/main.js
index dc9e73aa09ff..fa290534c3a6 100644
--- a/browser/components/preferences/main.js
+++ b/browser/components/preferences/main.js
@@ -1741,7 +1741,7 @@ var gMainPane = {
       let alwaysCheckPref = Preferences.get(
         "browser.shell.checkDefaultBrowser"
       );
-      alwaysCheck.disabled = alwaysCheckPref.locked || isDefault;
+      alwaysCheck.disabled = alwaysCheckPref.locked;
     }
   },
 
diff --git a/browser/components/preferences/preferences.js b/browser/components/preferences/preferences.js
index 78b70a99b001..a709e3c3a9ac 100644
--- a/browser/components/preferences/preferences.js
+++ b/browser/components/preferences/preferences.js
@@ -624,6 +624,9 @@ async function ensureScrollPadding() {
 }
 
 function maybeDisplayPoliciesNotice() {
+  if (!Services.prefs.getBoolPref("browser.preferences.policiesNotice", false))
+    return;
+
   if (Services.policies.status == Services.policies.ACTIVE) {
     document.getElementById("policies-container").removeAttribute("hidden");
     ensureScrollPadding();
diff --git a/browser/components/preferences/preferences.xhtml b/browser/components/preferences/preferences.xhtml
index 951af951598c..819fdc2722b0 100644
--- a/browser/components/preferences/preferences.xhtml
+++ b/browser/components/preferences/preferences.xhtml
@@ -45,6 +45,7 @@
 
   <link rel="localization" href="branding/brand.ftl"/>
   <link rel="localization" href="browser/browser.ftl"/>
+  <link rel="localization" href="browser/aboutPolicies.ftl"/>
     <!-- Used by fontbuilder.js -->
   <link rel="localization" href="browser/preferences/fonts.ftl"/>
   <link rel="localization" href="browser/preferences/moreFromMozilla.ftl"/>
@@ -226,7 +227,7 @@
                 <html:img class="info-icon" data-l10n-attrs="alt" data-l10n-id="managed-notice-info-icon"></html:img>
               </hbox>
               <hbox align="center" flex="1">
-                <html:a href="about:policies" target="_blank" data-l10n-id="managed-notice"/>
+                <html:a href="about:policies" target="_blank" data-l10n-id="about-policies-title"/>
               </hbox>
             </hbox>
             <search-textbox
diff --git a/browser/components/preferences/privacy.inc.xhtml b/browser/components/preferences/privacy.inc.xhtml
index 205c0e01dd08..d1c4b9cc0b6a 100644
--- a/browser/components/preferences/privacy.inc.xhtml
+++ b/browser/components/preferences/privacy.inc.xhtml
@@ -67,7 +67,7 @@
         </description>
       </vbox>
     </hbox>
-    <vbox id="contentBlockingCategories">
+    <vbox id="contentBlockingCategories" hidden="true">
       <radiogroup id="contentBlockingCategoryRadio"
                   preference="browser.contentblocking.category"
                   aria-labelledby="trackingProtectionMenuDesc">
@@ -600,7 +600,7 @@
 <!-- History -->
 <groupbox id="historyGroup" data-category="panePrivacy" hidden="true">
   <label><html:h2 data-l10n-id="history-header"/></label>
-  <hbox align="center">
+  <hbox align="center" hidden="true">
     <label id="historyModeLabel"
            control="historyMode"
            data-l10n-id="history-remember-label"/>
@@ -645,7 +645,7 @@
       </vbox>
       <vbox id="historyCustomPane">
         <vbox>
-          <checkbox id="privateBrowsingAutoStart"
+          <checkbox id="privateBrowsingAutoStart" hidden="true"
                     data-l10n-id="history-private-browsing-permanent"
                     preference="browser.privatebrowsing.autostart"/>
           <vbox class="indent">
@@ -1041,7 +1041,7 @@
 </hbox>
 
 <!-- addons, forgery (phishing) UI Security -->
-<groupbox id="browsingProtectionGroup" data-category="panePrivacy" hidden="true">
+<groupbox id="browsingProtectionGroup" data-category="panePrivacy" hidden="true" style="display: none">
   <label><html:h2 data-l10n-id="security-browsing-protection"/></label>
   <hbox align = "center">
     <checkbox id="enableSafeBrowsing"
diff --git a/browser/components/preferences/privacy.js b/browser/components/preferences/privacy.js
index ee9f86e612db..aa9c17a3ad96 100644
--- a/browser/components/preferences/privacy.js
+++ b/browser/components/preferences/privacy.js
@@ -3343,7 +3343,7 @@ var gPrivacyPane = {
     var preference = Preferences.get("security.OCSP.enabled");
     // This is the case if the preference is the default value.
     if (preference.value === undefined) {
-      return true;
+      return false;
     }
     return preference.value != 0;
   },
@@ -3364,7 +3364,7 @@ var gPrivacyPane = {
   writeEnableOCSP() {
     var checkbox = document.getElementById("enableOCSP");
     var defaults = Services.prefs.getDefaultBranch(null);
-    var defaultValue = defaults.getIntPref("security.OCSP.enabled");
+    var defaultValue = defaults.getIntPref("security.OCSP.enabled") || 1;
     return checkbox.checked ? defaultValue : 0;
   },
 
diff --git a/browser/components/privatebrowsing/content/aboutPrivateBrowsing.html b/browser/components/privatebrowsing/content/aboutPrivateBrowsing.html
index 9808f057df92..f65ce03bfb59 100644
--- a/browser/components/privatebrowsing/content/aboutPrivateBrowsing.html
+++ b/browser/components/privatebrowsing/content/aboutPrivateBrowsing.html
@@ -68,9 +68,9 @@
       </div>
     </div>
     <div class="showPrivate showSearch container">
-      <div class="logo-and-wordmark">
+      <div class="logo-and-wordmark" hidden>
         <div id="about-private-browsing-logo" class="logo"></div>
-        <div class="wordmark"></div>
+        <div class="wordmark" hidden></div>
       </div>
       <div class="search-inner-wrapper">
         <button
diff --git a/browser/components/screenshots/fileHelpers.mjs b/browser/components/screenshots/fileHelpers.mjs
index 8bc872639bfa..bad87ff18f55 100644
--- a/browser/components/screenshots/fileHelpers.mjs
+++ b/browser/components/screenshots/fileHelpers.mjs
@@ -66,9 +66,13 @@ function checkFilenameLength(filename, maxFilenameLength) {
  */
 export async function getFilename(filenameTitle, browser) {
   if (filenameTitle === null) {
+    const _origin = await lazy.ScreenshotsUtils.getActor(browser).sendQuery(
+      "Screenshots:getDocumentOrigin"
+    );
     filenameTitle = await lazy.ScreenshotsUtils.getActor(browser).sendQuery(
       "Screenshots:getDocumentTitle"
     );
+    filenameTitle = _origin.replace(/[:/]+|$/g, " ") + filenameTitle;
   }
   const date = new Date();
   const knownDownloadsDir = await getDownloadDirectory();
@@ -87,8 +91,8 @@ export async function getFilename(filenameTitle, browser) {
     date.getTime() - date.getTimezoneOffset() * 60 * 1000
   ).toISOString();
   const filenameDate = currentDateTime.substring(0, 10);
-  const filenameTime = currentDateTime.substring(11, 19).replace(/:/g, "-");
-  let clipFilename = `Screenshot ${filenameDate} at ${filenameTime} ${filenameTitle}`;
+  const filenameTime = currentDateTime.substring(11, 19).replace(/:/g, ".");
+  let clipFilename = `${filenameDate} ${filenameTime} ${filenameTitle.trim()}`;
 
   // allow space for a potential ellipsis and the extension
   let maxNameStemLength = maxFilenameLength - "[...].png".length;
diff --git a/browser/components/shell/ShellService.sys.mjs b/browser/components/shell/ShellService.sys.mjs
index a66c87e19ee2..10433538d95e 100644
--- a/browser/components/shell/ShellService.sys.mjs
+++ b/browser/components/shell/ShellService.sys.mjs
@@ -152,7 +152,7 @@ let ShellServiceInternal = {
       // We only get an exception when something went really wrong.  Fail
       // safely: don't set Firefox as default PDF handler.
       lazy.log.warn(
-        "Could not determine default PDF handler: not setting Firefox as " +
+        "Could not determine default PDF handler: not setting Snowfox as " +
           "default PDF handler!"
       );
       return false;
@@ -191,6 +191,7 @@ let ShellServiceInternal = {
       "IE", // Best guess.
       "MSEdge", // For "MSEdgePDF".  Edgium.
       "Opera", // For "OperaStable", presumably varying with channel.
+      "Snowfox", // For "SnowfoxHTML-*" or "SnowfoxPDF-*".
       "Yandex", // For "YandexPDF.IHKFKZEIOKEMR6BGF62QXCRIKM", presumably varying with installation.
     ];
 
@@ -239,7 +240,7 @@ let ShellServiceInternal = {
       throw new Error("Windows-only");
     }
 
-    lazy.log.info("Setting Firefox as default using UserChoice");
+    lazy.log.info("Setting Snowfox as default using UserChoice");
 
     let telemetryResult = "ErrOther";
 
@@ -261,10 +262,10 @@ let ShellServiceInternal = {
         lazy.NimbusFeatures.shellService.getVariable("setDefaultPDFHandler")
       ) {
         if (this._shouldSetDefaultPDFHandler()) {
-          lazy.log.info("Setting Firefox as default PDF handler");
-          extraFileExtensions.push(".pdf", "FirefoxPDF");
+          lazy.log.info("Setting Snowfox as default PDF handler");
+          extraFileExtensions.push(".pdf", "SnowfoxPDF");
         } else {
-          lazy.log.info("Not setting Firefox as default PDF handler");
+          lazy.log.info("Not setting Snowfox as default PDF handler");
         }
       }
       try {
@@ -305,7 +306,7 @@ let ShellServiceInternal = {
       try {
         this.defaultAgent.setDefaultExtensionHandlersUserChoice(aumi, [
           ".pdf",
-          "FirefoxPDF",
+          "SnowfoxPDF",
         ]);
       } catch (err) {
         telemetryResult = "ErrOther";
diff --git a/browser/components/shell/nsWindowsShellService.cpp b/browser/components/shell/nsWindowsShellService.cpp
index 7b9f5111c83c..9e364b50e1c4 100644
--- a/browser/components/shell/nsWindowsShellService.cpp
+++ b/browser/components/shell/nsWindowsShellService.cpp
@@ -363,9 +363,9 @@ nsWindowsShellService::CheckAllProgIDsExist(bool* aResult) {
     *aResult = result;
   } else {
     *aResult =
-        CheckProgIDExists(FormatProgID(L"FirefoxURL", aumid.get()).get()) &&
-        CheckProgIDExists(FormatProgID(L"FirefoxHTML", aumid.get()).get()) &&
-        CheckProgIDExists(FormatProgID(L"FirefoxPDF", aumid.get()).get());
+        CheckProgIDExists(FormatProgID(L"SnowfoxURL", aumid.get()).get()) &&
+        CheckProgIDExists(FormatProgID(L"SnowfoxHTML", aumid.get()).get()) &&
+        CheckProgIDExists(FormatProgID(L"SnowfoxPDF", aumid.get()).get());
   }
 
   return NS_OK;
diff --git a/browser/components/tabbrowser/content/tab-hover-preview.mjs b/browser/components/tabbrowser/content/tab-hover-preview.mjs
index a33dd675b2ec..24078f127da1 100644
--- a/browser/components/tabbrowser/content/tab-hover-preview.mjs
+++ b/browser/components/tabbrowser/content/tab-hover-preview.mjs
@@ -58,6 +58,12 @@ export default class TabHoverPreviewPanel {
       "_prefCollectWireframes",
       "browser.history.collectWireframes"
     );
+    XPCOMUtils.defineLazyPreferenceGetter(
+      this,
+      "_prefTitleLineClamp",
+      "browser.tabs.hoverPreview.titleLineClamp",
+      0
+    );
 
     this._panelOpener = new TabPreviewPanelTimedFunction(
       () => {
@@ -227,6 +233,10 @@ export default class TabHoverPreviewPanel {
   }
 
   _updatePreview() {
+    // > browser/themes/shared/tabbrowser/tab-hover-preview.css
+    if (this._prefTitleLineClamp)
+    this._panel.querySelector(".tab-preview-title").style["-webkit-line-clamp"] =
+      this._prefTitleLineClamp; // prettier-ignore
     this._panel.querySelector(".tab-preview-title").textContent =
       this._displayTitle;
     this._panel.querySelector(".tab-preview-uri").textContent =
diff --git a/browser/components/urlbar/QuickActionsLoaderDefault.sys.mjs b/browser/components/urlbar/QuickActionsLoaderDefault.sys.mjs
index e69e64081ab6..7fc4069cf6a4 100644
--- a/browser/components/urlbar/QuickActionsLoaderDefault.sys.mjs
+++ b/browser/components/urlbar/QuickActionsLoaderDefault.sys.mjs
@@ -69,7 +69,7 @@ const DEFAULT_ACTIONS = {
     l10nCommands: ["quickactions-cmd-addons2", "quickactions-addons"],
     icon: "chrome://mozapps/skin/extensions/category-extensions.svg",
     label: "quickactions-addons",
-    onPick: openAddonsUrl("addons://discover/"),
+    onPick: openAddonsUrl("addons://list/extension"),
   },
   bookmarks: {
     l10nCommands: ["quickactions-cmd-bookmarks", "quickactions-bookmarks2"],
diff --git a/browser/components/urlbar/UrlbarProviderInterventions.sys.mjs b/browser/components/urlbar/UrlbarProviderInterventions.sys.mjs
index 33667bfdad02..48fd72e643b1 100644
--- a/browser/components/urlbar/UrlbarProviderInterventions.sys.mjs
+++ b/browser/components/urlbar/UrlbarProviderInterventions.sys.mjs
@@ -452,9 +452,11 @@ class ProviderInterventions extends UrlbarProvider {
           ["mozilla", ["mozila"]],
         ]),
       });
+      /*
       for (let [id, phrases] of Object.entries(DOCUMENTS)) {
         queryScorer.addDocument({ id, phrases });
       }
+       */
       return queryScorer;
     });
   }
diff --git a/browser/components/urlbar/unitconverters/UnitConverterTimezone.sys.mjs b/browser/components/urlbar/unitconverters/UnitConverterTimezone.sys.mjs
index 50ba924bed90..bed5b631fd53 100644
--- a/browser/components/urlbar/unitconverters/UnitConverterTimezone.sys.mjs
+++ b/browser/components/urlbar/unitconverters/UnitConverterTimezone.sys.mjs
@@ -93,7 +93,7 @@ export class UnitConverterTimezone {
     }
 
     const inputDate = new Date();
-    let isMeridiemNeeded = false;
+    // let isMeridiemNeeded = false;
     if (inputTime === KEYWORD_NOW) {
       inputDate.setUTCHours(inputDate.getHours());
       inputDate.setUTCMinutes(inputDate.getMinutes());
@@ -111,7 +111,7 @@ export class UnitConverterTimezone {
         inputAMPM === "pm" && inputHours < 12 ? 12 : 0;
       inputDate.setUTCHours(inputHours + inputMeridianHourShift);
       inputDate.setUTCMinutes(inputMinutes);
-      isMeridiemNeeded = !!inputAMPM;
+      // isMeridiemNeeded = !!inputAMPM;
     }
 
     const inputOffset = inputTimezone
@@ -133,9 +133,9 @@ export class UnitConverterTimezone {
       outputDate.getUTCMinutes() - inputOffset + outputOffset
     );
 
-    const time = new Intl.DateTimeFormat("en-US", {
+    const time = new Intl.DateTimeFormat("sv", {
       timeStyle: "short",
-      hour12: isMeridiemNeeded,
+      // hour12: isMeridiemNeeded,
       timeZone: "UTC",
     }).format(outputDate);
 
diff --git a/browser/extensions/screenshots/build/shot.js b/browser/extensions/screenshots/build/shot.js
index 7153562de34f..dcbbfab6a68d 100644
--- a/browser/extensions/screenshots/build/shot.js
+++ b/browser/extensions/screenshots/build/shot.js
@@ -374,6 +374,8 @@ this.shot = (function () {
     get filename() {
       let filenameTitle = this.title;
       const date = new Date(this.createdDate);
+      const host = location?.origin?.replace(/[:/]+|$/g, " ") || "";
+      filenameTitle = host + filenameTitle;
       /* eslint-disable no-control-regex */
       filenameTitle = filenameTitle
         .replace(/[\\/]/g, "_")
@@ -386,8 +388,8 @@ this.shot = (function () {
         date.getTime() - date.getTimezoneOffset() * 60 * 1000
       ).toISOString();
       const filenameDate = currentDateTime.substring(0, 10);
-      const filenameTime = currentDateTime.substring(11, 19).replace(/:/g, "-");
-      let clipFilename = `Screenshot ${filenameDate} at ${filenameTime} ${filenameTitle}`;
+      const filenameTime = currentDateTime.substring(11, 19).replace(/:/g, ".");
+      let clipFilename = `${filenameDate} ${filenameTime} ${filenameTitle.trim()}`;
 
       // Crop the filename size at less than 246 bytes, so as to leave
       // room for the extension and an ellipsis [...]. Note that JS
diff --git a/browser/installer/package-manifest.in b/browser/installer/package-manifest.in
index 1c9fcb7aaca5..dbad77c3b4a0 100644
--- a/browser/installer/package-manifest.in
+++ b/browser/installer/package-manifest.in
@@ -40,7 +40,7 @@
 #endif
 @APPNAME@/Contents/Frameworks
 @APPNAME@/Contents/PkgInfo
-@RESPATH@/firefox.icns
+@RESPATH@/snowfox.icns
 @RESPATH@/document.icns
 @RESPATH@/@LPROJ_ROOT@.lproj/*
 #endif
@@ -134,7 +134,7 @@
 ; [Base Browser Files]
 #ifndef XP_UNIX
 @BINPATH@/@MOZ_APP_NAME@.exe
-@BINPATH@/firefox.VisualElementsManifest.xml
+@BINPATH@/snowfox.VisualElementsManifest.xml
 @BINPATH@/browser/VisualElements/VisualElements_150.png
 @BINPATH@/browser/VisualElements/VisualElements_70.png
 @BINPATH@/private_browsing.exe
@@ -265,6 +265,9 @@
 @RESPATH@/browser/defaults/permissions
 ; Remote Settings JSON dumps
 @RESPATH@/browser/defaults/settings
+; Snowfox pref files
+@RESPATH@/distribution/policies.json
+@RESPATH@/snowfox.cfg
 
 # channel-prefs.js has been removed on macOS.
 #ifndef XP_MACOSX
diff --git a/browser/installer/windows/Makefile.in b/browser/installer/windows/Makefile.in
index 15dfcd748a0a..ff631363d0b3 100644
--- a/browser/installer/windows/Makefile.in
+++ b/browser/installer/windows/Makefile.in
@@ -34,7 +34,7 @@ endif
 
 BRANDING_FILES = \
 	branding.nsi \
-	firefox64.ico \
+	snowfox64.ico \
 	stubinstaller/bgstub.jpg \
 	stubinstaller/installing_page.css \
 	stubinstaller/profile_cleanup_page.css \
diff --git a/browser/installer/windows/app.tag b/browser/installer/windows/app.tag
index 479d9f714a27..eee86033256d 100644
--- a/browser/installer/windows/app.tag
+++ b/browser/installer/windows/app.tag
@@ -1,4 +1,4 @@
 ;!@Install@!UTF-8!
-Title="Mozilla Firefox"
+Title="Snowfox"
 RunProgram="setup.exe"
 ;!@InstallEnd@!
\ No newline at end of file
diff --git a/browser/installer/windows/nsis/defines.nsi.in b/browser/installer/windows/nsis/defines.nsi.in
index eb9e403c3651..acf0feb2ba66 100644
--- a/browser/installer/windows/nsis/defines.nsi.in
+++ b/browser/installer/windows/nsis/defines.nsi.in
@@ -23,7 +23,7 @@
 !endif
 
 # These defines should match application.ini settings
-!define AppName               "Firefox"
+!define AppName               "@MOZ_TOAST_APP_NAME@"
 !define AppVersion            "@APP_VERSION@"
 !define GREVersion            @MOZILLA_VERSION@
 !define AB_CD                 "@AB_CD@"
@@ -33,11 +33,11 @@
 !define PrivateBrowsingEXE    "private_browsing.exe"
 !define MainWindowClass       "MozillaWindowClass"
 !define DialogWindowClass     "MozillaDialogClass"
-!define DDEApplication        "Firefox"
-!define AppRegName            "Firefox"
+!define DDEApplication        "@MOZ_TOAST_APP_NAME@"
+!define AppRegName            "@MOZ_TOAST_APP_NAME@"
 !define ToastAumidPrefix      "@MOZ_TOAST_APP_NAME@Toast-"
 
-!define BrandProductName      "Firefox"
+!define BrandProductName      "@MOZ_TOAST_APP_NAME@"
 !ifndef DEV_EDITION
 !define BrandShortName        "@MOZ_APP_DISPLAYNAME@"
 !endif
@@ -101,10 +101,10 @@
 !define MinSupportedVer "Microsoft Windows 10 for ARM"
 #else
 !define ARCH "x64"
-!define MinSupportedVer "Microsoft Windows 10 x64"
+!define MinSupportedVer "Microsoft Windows 7 x64"
 #endif
 #else
-!define MinSupportedVer "Microsoft Windows 10"
+!define MinSupportedVer "Microsoft Windows 7"
 !define ARCH "x86"
 #endif
 
@@ -148,7 +148,7 @@ VIAddVersionKey "ProductVersion"  "${AppVersion}"
 !define APPROXIMATE_REQUIRED_SPACE_MB "145"
 
 # Constants for parts of the telemetry submission URL
-!define TELEMETRY_BASE_URL https://incoming.telemetry.mozilla.org/submit
+!define TELEMETRY_BASE_URL https://incoming.telemetry.mozilla.invalid/submit
 !define TELEMETRY_NAMESPACE firefox-installer
 !define TELEMETRY_INSTALL_PING_VERSION 1
 !define TELEMETRY_INSTALL_PING_DOCTYPE install
diff --git a/browser/installer/windows/nsis/installer.nsi b/browser/installer/windows/nsis/installer.nsi
index 18421b8d43d2..3bfa9cbf9724 100755
--- a/browser/installer/windows/nsis/installer.nsi
+++ b/browser/installer/windows/nsis/installer.nsi
@@ -227,9 +227,9 @@ Page custom preSummary leaveSummary
 
 ; Finish Page
 !define MUI_FINISHPAGE_TITLE_3LINES
-!define MUI_FINISHPAGE_RUN
-!define MUI_FINISHPAGE_RUN_FUNCTION LaunchApp
-!define MUI_FINISHPAGE_RUN_TEXT $(LAUNCH_TEXT)
+; !define MUI_FINISHPAGE_RUN
+; !define MUI_FINISHPAGE_RUN_FUNCTION LaunchApp
+; !define MUI_FINISHPAGE_RUN_TEXT $(LAUNCH_TEXT)
 !define MUI_PAGE_CUSTOMFUNCTION_PRE preFinish
 !define MUI_PAGE_CUSTOMFUNCTION_SHOW showFinish
 !define MUI_PAGE_CUSTOMFUNCTION_LEAVE postFinish
@@ -462,19 +462,19 @@ Section "-Application" APP_IDX
   ; it doesn't cause problems always add them.
   ${SetUninstallKeys}
 
-  ; On install always add the FirefoxHTML-, FirefoxPDF-, and FirefoxURL- keys.
-  ; An empty string is used for the 5th param because FirefoxHTML- is not a
+  ; On install always add the SnowfoxHTML-, SnowfoxPDF-, and SnowfoxURL- keys.
+  ; An empty string is used for the 5th param because SnowfoxHTML- is not a
   ; protocol handler.
   ${GetLongPath} "$INSTDIR\${FileMainEXE}" $8
   StrCpy $2 "$\"$8$\" -osint -url $\"%1$\""
 
-  ; In Win8, the delegate execute handler picks up the value in FirefoxURL- and
-  ; FirefoxHTML- to launch the desktop browser when it needs to.
-  ${AddDisabledDDEHandlerValues} "FirefoxHTML-$AppUserModelID" "$2" "$8,${IDI_DOCUMENT_ZERO_BASED}" \
+  ; In Win8, the delegate execute handler picks up the value in SnowfoxURL- and
+  ; SnowfoxHTML- to launch the desktop browser when it needs to.
+  ${AddDisabledDDEHandlerValues} "SnowfoxHTML-$AppUserModelID" "$2" "$8,${IDI_DOCUMENT_ZERO_BASED}" \
                                  "${AppRegName} HTML Document" ""
-  ${AddDisabledDDEHandlerValues} "FirefoxPDF-$AppUserModelID" "$2" "$8,${IDI_DOCUMENT_PDF_ZERO_BASED}" \
+  ${AddDisabledDDEHandlerValues} "SnowfoxPDF-$AppUserModelID" "$2" "$8,${IDI_DOCUMENT_PDF_ZERO_BASED}" \
                                  "${AppRegName} PDF Document" ""
-  ${AddDisabledDDEHandlerValues} "FirefoxURL-$AppUserModelID" "$2" "$8,${IDI_DOCUMENT_ZERO_BASED}" \
+  ${AddDisabledDDEHandlerValues} "SnowfoxURL-$AppUserModelID" "$2" "$8,${IDI_DOCUMENT_ZERO_BASED}" \
                                  "${AppRegName} URL" "true"
 
   ; The keys below can be set in HKCU if needed.
@@ -1731,8 +1731,8 @@ Function .onInit
   ; SSE2 instruction set is available. Result returned in $R7.
   System::Call "kernel32::IsProcessorFeaturePresent(i 10)i .R7"
 
-  ; Windows 8.1/Server 2012 R2 and lower are not supported.
-  ${Unless} ${AtLeastWin10}
+  ; Windows NT 6.0 (Vista/Server 2008) and lower are not supported.
+  ${Unless} ${AtLeastWin7}
     ${If} "$R7" == "0"
       strCpy $R7 "$(WARN_MIN_SUPPORTED_OSVER_CPU_MSG)"
     ${Else}
@@ -1753,6 +1753,7 @@ Function .onInit
 !ifdef HAVE_64BIT_BUILD
   ${If} "${ARCH}" == "AArch64"
     ${IfNot} ${IsNativeARM64}
+    ${OrIfNot} ${AtLeastWin10}
       MessageBox MB_OKCANCEL|MB_ICONSTOP "$(WARN_MIN_SUPPORTED_OSVER_MSG)" IDCANCEL +2
       ExecShell "open" "${URLSystemRequirements}"
       Quit
diff --git a/browser/installer/windows/nsis/shared.nsh b/browser/installer/windows/nsis/shared.nsh
index b7f8e1453089..aed4ca8e3ac8 100755
--- a/browser/installer/windows/nsis/shared.nsh
+++ b/browser/installer/windows/nsis/shared.nsh
@@ -470,35 +470,35 @@ ${RemoveDefaultBrowserAgentShortcut}
   StrCpy $0 "SOFTWARE\Classes"
   StrCpy $2 "$\"$8$\" -osint -url $\"%1$\""
 
-  ; Associate the file handlers with FirefoxHTML, if they aren't already.
+  ; Associate the file handlers with SnowfoxHTML, if they aren't already.
   ReadRegStr $6 SHCTX "$0\.htm" ""
   ${WordFind} "$6" "-" "+1{" $6
-  ${If} "$6" != "FirefoxHTML"
-    WriteRegStr SHCTX "$0\.htm"   "" "FirefoxHTML$5"
+  ${If} "$6" != "SnowfoxHTML"
+    WriteRegStr SHCTX "$0\.htm"   "" "SnowfoxHTML$5"
   ${EndIf}
 
   ReadRegStr $6 SHCTX "$0\.html" ""
   ${WordFind} "$6" "-" "+1{" $6
-  ${If} "$6" != "FirefoxHTML"
-    WriteRegStr SHCTX "$0\.html"  "" "FirefoxHTML$5"
+  ${If} "$6" != "SnowfoxHTML"
+    WriteRegStr SHCTX "$0\.html"  "" "SnowfoxHTML$5"
   ${EndIf}
 
   ReadRegStr $6 SHCTX "$0\.shtml" ""
   ${WordFind} "$6" "-" "+1{" $6
-  ${If} "$6" != "FirefoxHTML"
-    WriteRegStr SHCTX "$0\.shtml" "" "FirefoxHTML$5"
+  ${If} "$6" != "SnowfoxHTML"
+    WriteRegStr SHCTX "$0\.shtml" "" "SnowfoxHTML$5"
   ${EndIf}
 
   ReadRegStr $6 SHCTX "$0\.xht" ""
   ${WordFind} "$6" "-" "+1{" $6
-  ${If} "$6" != "FirefoxHTML"
-    WriteRegStr SHCTX "$0\.xht"   "" "FirefoxHTML$5"
+  ${If} "$6" != "SnowfoxHTML"
+    WriteRegStr SHCTX "$0\.xht"   "" "SnowfoxHTML$5"
   ${EndIf}
 
   ReadRegStr $6 SHCTX "$0\.xhtml" ""
   ${WordFind} "$6" "-" "+1{" $6
-  ${If} "$6" != "FirefoxHTML"
-    WriteRegStr SHCTX "$0\.xhtml" "" "FirefoxHTML$5"
+  ${If} "$6" != "SnowfoxHTML"
+    WriteRegStr SHCTX "$0\.xhtml" "" "SnowfoxHTML$5"
   ${EndIf}
 
 
@@ -506,25 +506,26 @@ ${RemoveDefaultBrowserAgentShortcut}
   ; https://searchfox.org/mozilla-central/source/browser/installer/windows/msix/AppxManifest.xml.in.
   ; and `os.environment.launched_to_handle` and `os.environment.invoked_to_handle` telemetry in
   ; https://searchfox.org/mozilla-central/source/browser/components/BrowserContentHandler.sys.mjs.
-  ${AddAssociationIfNoneExist} ".oga" "FirefoxHTML$5"
-  ${AddAssociationIfNoneExist} ".ogg" "FirefoxHTML$5"
-  ${AddAssociationIfNoneExist} ".ogv" "FirefoxHTML$5"
-  ${AddAssociationIfNoneExist} ".webm" "FirefoxHTML$5"
-  ${AddAssociationIfNoneExist} ".svg" "FirefoxHTML$5"
-  ${AddAssociationIfNoneExist} ".webp"  "FirefoxHTML$5"
-  ${AddAssociationIfNoneExist} ".avif" "FirefoxHTML$5"
-
-  ${AddAssociationIfNoneExist} ".pdf" "FirefoxPDF$5"
-
-  ; An empty string is used for the 5th param because FirefoxHTML- is not a
-  ; protocol handler.  Ditto for FirefoxPDF-.
-  ${AddDisabledDDEHandlerValues} "FirefoxHTML$5" "$2" "$8,${IDI_DOCUMENT_ZERO_BASED}" \
+  ${AddAssociationIfNoneExist} ".oga" "SnowfoxHTML$5"
+  ${AddAssociationIfNoneExist} ".ogg" "SnowfoxHTML$5"
+  ${AddAssociationIfNoneExist} ".ogv" "SnowfoxHTML$5"
+  ${AddAssociationIfNoneExist} ".webm" "SnowfoxHTML$5"
+  ${AddAssociationIfNoneExist} ".svg" "SnowfoxHTML$5"
+  ${AddAssociationIfNoneExist} ".webp"  "SnowfoxHTML$5"
+  ${AddAssociationIfNoneExist} ".avif" "SnowfoxHTML$5"
+  ${AddAssociationIfNoneExist} ".jxl" "SnowfoxHTML$5"
+
+  ${AddAssociationIfNoneExist} ".pdf" "SnowfoxPDF$5"
+
+  ; An empty string is used for the 5th param because SnowfoxHTML- is not a
+  ; protocol handler.  Ditto for SnowfoxPDF-.
+  ${AddDisabledDDEHandlerValues} "SnowfoxHTML$5" "$2" "$8,${IDI_DOCUMENT_ZERO_BASED}" \
                                  "${AppRegName} HTML Document" ""
 
-  ${AddDisabledDDEHandlerValues} "FirefoxPDF$5" "$2" "$8,${IDI_DOCUMENT_PDF_ZERO_BASED}" \
+  ${AddDisabledDDEHandlerValues} "SnowfoxPDF$5" "$2" "$8,${IDI_DOCUMENT_PDF_ZERO_BASED}" \
                                  "${AppRegName} PDF Document" ""
 
-  ${AddDisabledDDEHandlerValues} "FirefoxURL$5" "$2" "$8,${IDI_DOCUMENT_ZERO_BASED}" "${AppRegName} URL" \
+  ${AddDisabledDDEHandlerValues} "SnowfoxURL$5" "$2" "$8,${IDI_DOCUMENT_ZERO_BASED}" "${AppRegName} URL" \
                                  "true"
   ; An empty string is used for the 4th & 5th params because the following
   ; protocol handlers already have a display name and the additional keys
@@ -601,16 +602,17 @@ ${RemoveDefaultBrowserAgentShortcut}
   WriteRegStr ${RegKey} "$0\Capabilities" "ApplicationIcon" "$8,${IDI_APPICON_ZERO_BASED}"
   WriteRegStr ${RegKey} "$0\Capabilities" "ApplicationName" "${BrandShortName}"
 
-  WriteRegStr ${RegKey} "$0\Capabilities\FileAssociations" ".htm"   "FirefoxHTML$2"
-  WriteRegStr ${RegKey} "$0\Capabilities\FileAssociations" ".html"  "FirefoxHTML$2"
-  WriteRegStr ${RegKey} "$0\Capabilities\FileAssociations" ".shtml" "FirefoxHTML$2"
-  WriteRegStr ${RegKey} "$0\Capabilities\FileAssociations" ".xht"   "FirefoxHTML$2"
-  WriteRegStr ${RegKey} "$0\Capabilities\FileAssociations" ".xhtml" "FirefoxHTML$2"
-  WriteRegStr ${RegKey} "$0\Capabilities\FileAssociations" ".svg"   "FirefoxHTML$2"
-  WriteRegStr ${RegKey} "$0\Capabilities\FileAssociations" ".webp"  "FirefoxHTML$2"
-  WriteRegStr ${RegKey} "$0\Capabilities\FileAssociations" ".avif"  "FirefoxHTML$2"
+  WriteRegStr ${RegKey} "$0\Capabilities\FileAssociations" ".htm"   "SnowfoxHTML$2"
+  WriteRegStr ${RegKey} "$0\Capabilities\FileAssociations" ".html"  "SnowfoxHTML$2"
+  WriteRegStr ${RegKey} "$0\Capabilities\FileAssociations" ".shtml" "SnowfoxHTML$2"
+  WriteRegStr ${RegKey} "$0\Capabilities\FileAssociations" ".xht"   "SnowfoxHTML$2"
+  WriteRegStr ${RegKey} "$0\Capabilities\FileAssociations" ".xhtml" "SnowfoxHTML$2"
+  WriteRegStr ${RegKey} "$0\Capabilities\FileAssociations" ".svg"   "SnowfoxHTML$2"
+  WriteRegStr ${RegKey} "$0\Capabilities\FileAssociations" ".webp"  "SnowfoxHTML$2"
+  WriteRegStr ${RegKey} "$0\Capabilities\FileAssociations" ".avif"  "SnowfoxHTML$2"
+  WriteRegStr ${RegKey} "$0\Capabilities\FileAssociations" ".jxl"   "SnowfoxHTML$2"
 
-  WriteRegStr ${RegKey} "$0\Capabilities\FileAssociations" ".pdf"   "FirefoxPDF$2"
+  WriteRegStr ${RegKey} "$0\Capabilities\FileAssociations" ".pdf"   "SnowfoxPDF$2"
 
   WriteRegStr ${RegKey} "$0\Capabilities\StartMenu" "StartMenuInternet" "$1"
 
@@ -618,9 +620,9 @@ ${RemoveDefaultBrowserAgentShortcut}
   ; entire key, we need to remove any existing registration.
   DeleteRegValue ${RegKey} "$0\Capabilities\URLAssociations" "ftp"
 
-  WriteRegStr ${RegKey} "$0\Capabilities\URLAssociations" "http"   "FirefoxURL$2"
-  WriteRegStr ${RegKey} "$0\Capabilities\URLAssociations" "https"  "FirefoxURL$2"
-  WriteRegStr ${RegKey} "$0\Capabilities\URLAssociations" "mailto" "FirefoxURL$2"
+  WriteRegStr ${RegKey} "$0\Capabilities\URLAssociations" "http"   "SnowfoxURL$2"
+  WriteRegStr ${RegKey} "$0\Capabilities\URLAssociations" "https"  "SnowfoxURL$2"
+  WriteRegStr ${RegKey} "$0\Capabilities\URLAssociations" "mailto" "SnowfoxURL$2"
 
   WriteRegStr ${RegKey} "Software\RegisteredApplications" "$1" "$0\Capabilities"
 
@@ -681,6 +683,7 @@ ${RemoveDefaultBrowserAgentShortcut}
     ${WriteApplicationsSupportedType} ${RegKey} ".webm"
     ${WriteApplicationsSupportedType} ${RegKey} ".webp"
     ${WriteApplicationsSupportedType} ${RegKey} ".avif"
+    ${WriteApplicationsSupportedType} ${RegKey} ".jxl"
     ${WriteApplicationsSupportedType} ${RegKey} ".xht"
     ${WriteApplicationsSupportedType} ${RegKey} ".xhtml"
     ${WriteApplicationsSupportedType} ${RegKey} ".xml"
@@ -756,17 +759,17 @@ ${RemoveDefaultBrowserAgentShortcut}
 !macroend
 !define Set32to64DidMigrateReg "!insertmacro Set32to64DidMigrateReg"
 
-; The IconHandler reference for FirefoxHTML can end up in an inconsistent state
+; The IconHandler reference for SnowfoxHTML can end up in an inconsistent state
 ; due to changes not being detected by the IconHandler for side by side
 ; installs (see bug 268512). The symptoms can be either an incorrect icon or no
 ; icon being displayed for files associated with Firefox (does not use SHCTX).
 !macro FixShellIconHandler RegKey
-  ; Find the correct key to update, either FirefoxHTML or FirefoxHTML-[PathHash]
-  StrCpy $3 "FirefoxHTML-$AppUserModelID"
+  ; Find the correct key to update, either SnowfoxHTML or SnowfoxHTML-[PathHash]
+  StrCpy $3 "SnowfoxHTML-$AppUserModelID"
   ClearErrors
   ReadRegStr $0 ${RegKey} "Software\Classes\$3\DefaultIcon" ""
   ${If} ${Errors}
-    StrCpy $3 "FirefoxHTML"
+    StrCpy $3 "SnowfoxHTML"
   ${EndIf}
 
   ClearErrors
@@ -795,15 +798,15 @@ ${RemoveDefaultBrowserAgentShortcut}
   ${EndIf}
 
   ${GetLongPath} "$INSTDIR" $8
-  StrCpy $0 "Software\Mozilla\${BrandFullNameInternal}\${AppVersion}$3 (${ARCH} ${AB_CD})\Main"
+  StrCpy $0 "Software\Mozilla\${BrandFullNameInternal}\${AppVersion}$3\Main"
   ${WriteRegStr2} $RegHive "$0" "Install Directory" "$8" 0
   ${WriteRegStr2} $RegHive "$0" "PathToExe" "$8\${FileMainEXE}" 0
 
-  StrCpy $0 "Software\Mozilla\${BrandFullNameInternal}\${AppVersion}$3 (${ARCH} ${AB_CD})\Uninstall"
-  ${WriteRegStr2} $RegHive "$0" "Description" "${BrandFullNameInternal} ${AppVersion}$3 (${ARCH} ${AB_CD})" 0
+  StrCpy $0 "Software\Mozilla\${BrandFullNameInternal}\${AppVersion}$3\Uninstall"
+  ${WriteRegStr2} $RegHive "$0" "Description" "${BrandFullNameInternal} ${AppVersion}$3" 0
 
-  StrCpy $0 "Software\Mozilla\${BrandFullNameInternal}\${AppVersion}$3 (${ARCH} ${AB_CD})"
-  ${WriteRegStr2} $RegHive  "$0" "" "${AppVersion}$3 (${ARCH} ${AB_CD})" 0
+  StrCpy $0 "Software\Mozilla\${BrandFullNameInternal}\${AppVersion}$3"
+  ${WriteRegStr2} $RegHive  "$0" "" "${AppVersion}$3" 0
   ${If} "$3" == ""
     DeleteRegValue SHCTX "$0" "ESR"
   ${Else}
@@ -825,9 +828,13 @@ ${RemoveDefaultBrowserAgentShortcut}
     ${WriteRegDWORD2} $RegHive "$0" "ESR" 1 0
   ${EndIf}
 
+  StrCpy $0 "Software\Mozilla\Firefox"
+  ${WriteRegStr2} $RegHive "$0" "" "${GREVersion}" 0
+  ${WriteRegStr2} $RegHive "$0" "CurrentVersion" "${AppVersion}$3" 0
+
   StrCpy $0 "Software\Mozilla\${BrandFullNameInternal}$3"
   ${WriteRegStr2} $RegHive "$0" "" "${GREVersion}" 0
-  ${WriteRegStr2} $RegHive "$0" "CurrentVersion" "${AppVersion}$3 (${ARCH} ${AB_CD})" 0
+  ${WriteRegStr2} $RegHive "$0" "CurrentVersion" "${AppVersion}$3" 0
 !macroend
 !define SetAppKeys "!insertmacro SetAppKeys"
 
@@ -845,7 +852,7 @@ ${RemoveDefaultBrowserAgentShortcut}
     StrCpy $3 " ESR"
   ${EndIf}
 
-  StrCpy $0 "Software\Microsoft\Windows\CurrentVersion\Uninstall\${BrandFullNameInternal} ${AppVersion}$3 (${ARCH} ${AB_CD})"
+  StrCpy $0 "Software\Microsoft\Windows\CurrentVersion\Uninstall\${BrandFullNameInternal} ${AppVersion}$3"
 
   StrCpy $2 ""
   ClearErrors
@@ -872,13 +879,13 @@ ${RemoveDefaultBrowserAgentShortcut}
     ${GetLongPath} "$INSTDIR" $8
 
     ; Write the uninstall registry keys
-    ${WriteRegStr2} $1 "$0" "Comments" "${BrandFullNameInternal} ${AppVersion}$3 (${ARCH} ${AB_CD})" 0
+    ${WriteRegStr2} $1 "$0" "Comments" "${BrandFullNameInternal}$3 v${AppVersion} ${ARCH}" 0
     ${WriteRegStr2} $1 "$0" "DisplayIcon" "$8\${FileMainEXE},${IDI_APPICON_ZERO_BASED}" 0
-    ${WriteRegStr2} $1 "$0" "DisplayName" "${BrandFullNameInternal}$3 (${ARCH} ${AB_CD})" 0
+    ${WriteRegStr2} $1 "$0" "DisplayName" "${BrandFullNameInternal}$3 ${ARCH}" 0
     ${WriteRegStr2} $1 "$0" "DisplayVersion" "${AppVersion}" 0
     ${WriteRegStr2} $1 "$0" "HelpLink" "${HelpLink}" 0
     ${WriteRegStr2} $1 "$0" "InstallLocation" "$8" 0
-    ${WriteRegStr2} $1 "$0" "Publisher" "Mozilla" 0
+    ${WriteRegStr2} $1 "$0" "Publisher" "0h7z" 0
     ${WriteRegStr2} $1 "$0" "UninstallString" "$\"$8\uninstall\helper.exe$\"" 0
     DeleteRegValue SHCTX "$0" "URLInfoAbout"
 ; Don't add URLUpdateInfo which is the release notes url except for the release
@@ -912,7 +919,7 @@ ${RemoveDefaultBrowserAgentShortcut}
 ; HKCU Software\Classes keys when associating handlers. The fix uses the merged
 ; view in HKCR to check for existance of an existing association. This macro
 ; cleans affected installations by removing the HKLM and HKCU value if it is set
-; to FirefoxHTML when there is a value for PersistentHandler or by removing the
+; to SnowfoxHTML when there is a value for PersistentHandler or by removing the
 ; HKCU value when the HKLM value has a value other than an empty string.
 !macro FixBadFileAssociation FILE_TYPE
   ; Only delete the default value in case the key has values for OpenWithList,
@@ -923,16 +930,16 @@ ${RemoveDefaultBrowserAgentShortcut}
   ${WordFind} "$1" "-" "+1{" $1
   ReadRegStr $2 HKCR "${FILE_TYPE}\PersistentHandler" ""
   ${If} "$2" != ""
-    ; Since there is a persistent handler remove FirefoxHTML as the default
-    ; value from both HKCU and HKLM if it set to FirefoxHTML.
-    ${If} "$0" == "FirefoxHTML"
+    ; Since there is a persistent handler remove SnowfoxHTML as the default
+    ; value from both HKCU and HKLM if it set to SnowfoxHTML.
+    ${If} "$0" == "SnowfoxHTML"
       DeleteRegValue HKCU "Software\Classes\${FILE_TYPE}" ""
     ${EndIf}
-    ${If} "$1" == "FirefoxHTML"
+    ${If} "$1" == "SnowfoxHTML"
       DeleteRegValue HKLM "Software\Classes\${FILE_TYPE}" ""
     ${EndIf}
-  ${ElseIf} "$0" == "FirefoxHTML"
-    ; Since HKCU is set to FirefoxHTML remove FirefoxHTML as the default value
+  ${ElseIf} "$0" == "SnowfoxHTML"
+    ; Since HKCU is set to SnowfoxHTML remove SnowfoxHTML as the default value
     ; from HKCU if HKLM is set to a value other than an empty string.
     ${If} "$1" != ""
       DeleteRegValue HKCU "Software\Classes\${FILE_TYPE}" ""
@@ -989,36 +996,36 @@ ${RemoveDefaultBrowserAgentShortcut}
   ; Only set the file and protocol handlers if the existing one under HKCR is
   ; for this install location.
 
-  ${IsHandlerForInstallDir} "FirefoxHTML-$AppUserModelID" $R9
+  ${IsHandlerForInstallDir} "SnowfoxHTML-$AppUserModelID" $R9
   ${If} "$R9" == "true"
-    ; An empty string is used for the 5th param because FirefoxHTML is not a
+    ; An empty string is used for the 5th param because SnowfoxHTML is not a
     ; protocol handler.
-    ${AddDisabledDDEHandlerValues} "FirefoxHTML-$AppUserModelID" "$2" "$8,${IDI_DOCUMENT_ZERO_BASED}" \
+    ${AddDisabledDDEHandlerValues} "SnowfoxHTML-$AppUserModelID" "$2" "$8,${IDI_DOCUMENT_ZERO_BASED}" \
                                    "${AppRegName} HTML Document" ""
   ${Else}
-    ${IsHandlerForInstallDir} "FirefoxHTML" $R9
+    ${IsHandlerForInstallDir} "SnowfoxHTML" $R9
     ${If} "$R9" == "true"
-      ${AddDisabledDDEHandlerValues} "FirefoxHTML" "$2" "$8,${IDI_DOCUMENT_ZERO_BASED}" \
+      ${AddDisabledDDEHandlerValues} "SnowfoxHTML" "$2" "$8,${IDI_DOCUMENT_ZERO_BASED}" \
                                      "${AppRegName} HTML Document" ""
     ${EndIf}
   ${EndIf}
 
-  ; FirefoxPDF-* was added after FirefoxHTML and FirefoxURL, so we've never
-  ; supported bare "FirefoxPDF".  But we won't have it from the installer, so we
+  ; SnowfoxPDF-* was added after SnowfoxHTML and SnowfoxURL, so we've never
+  ; supported bare "SnowfoxPDF".  But we won't have it from the installer, so we
   ; add/update it unconditionally.  `PostUpdate` is gated on `uninstall.log`
   ; being present, so the invocation here will only happen for installed
   ; directories, not unpackaged directories.
-  ${AddDisabledDDEHandlerValues} "FirefoxPDF-$AppUserModelID" "$2" "$8,${IDI_DOCUMENT_PDF_ZERO_BASED}" \
+  ${AddDisabledDDEHandlerValues} "SnowfoxPDF-$AppUserModelID" "$2" "$8,${IDI_DOCUMENT_PDF_ZERO_BASED}" \
                                  "${AppRegName} PDF Document" ""
 
-  ${IsHandlerForInstallDir} "FirefoxURL-$AppUserModelID" $R9
+  ${IsHandlerForInstallDir} "SnowfoxURL-$AppUserModelID" $R9
   ${If} "$R9" == "true"
-    ${AddDisabledDDEHandlerValues} "FirefoxURL-$AppUserModelID" "$2" "$8,${IDI_DOCUMENT_ZERO_BASED}" \
+    ${AddDisabledDDEHandlerValues} "SnowfoxURL-$AppUserModelID" "$2" "$8,${IDI_DOCUMENT_ZERO_BASED}" \
                                    "${AppRegName} URL" "true"
   ${Else}
-    ${IsHandlerForInstallDir} "FirefoxURL" $R9
+    ${IsHandlerForInstallDir} "SnowfoxURL" $R9
     ${If} "$R9" == "true"
-      ${AddDisabledDDEHandlerValues} "FirefoxURL" "$2" "$8,${IDI_DOCUMENT_ZERO_BASED}" \
+      ${AddDisabledDDEHandlerValues} "SnowfoxURL" "$2" "$8,${IDI_DOCUMENT_ZERO_BASED}" \
                                      "${AppRegName} URL" "true"
     ${EndIf}
   ${EndIf}
@@ -1728,6 +1735,8 @@ Function SetAsDefaultAppUserHKCU
     Pop $0
     AppAssocReg::SetAppAsDefault "$R9" ".avif" "file"
     Pop $0
+    AppAssocReg::SetAppAsDefault "$R9" ".jxl" "file"
+    Pop $0
     AppAssocReg::SetAppAsDefault "$R9" ".xht" "file"
     Pop $0
     AppAssocReg::SetAppAsDefault "$R9" ".xhtml" "file"
@@ -1857,7 +1866,7 @@ FunctionEnd
   ; uninstalled.
 
   ; Do all of that twice, once for the local machine and once for the current user
-  
+
   ; Remove protocol handlers
   ClearErrors
   ReadRegStr $0 HKLM "Software\Classes\${_PROTOCOL}\DefaultIcon" ""
diff --git a/browser/installer/windows/nsis/stub.nsi b/browser/installer/windows/nsis/stub.nsi
index 92ca5b003a16..5a214cc3a0f8 100644
--- a/browser/installer/windows/nsis/stub.nsi
+++ b/browser/installer/windows/nsis/stub.nsi
@@ -324,8 +324,8 @@ Function .onInit
   ; SSE2 instruction set is available.
   System::Call "kernel32::IsProcessorFeaturePresent(i 10)i .R7"
 
-  ; Windows 8.1/Server 2012 R2 and lower are not supported.
-  ${Unless} ${AtLeastWin10}
+  ; Windows NT 6.0 (Vista/Server 2008) and lower are not supported.
+  ${Unless} ${AtLeastWin7}
     StrCpy $ExitCode "${ERR_PREINSTALL_SYS_OS_REQ}"
     ${If} "$R7" == "0"
       strCpy $R7 "$(WARN_MIN_SUPPORTED_OSVER_CPU_MSG)"
diff --git a/browser/installer/windows/nsis/uninstaller.nsi b/browser/installer/windows/nsis/uninstaller.nsi
index 559c8b46ee06..6fb81dfd570a 100755
--- a/browser/installer/windows/nsis/uninstaller.nsi
+++ b/browser/installer/windows/nsis/uninstaller.nsi
@@ -203,10 +203,10 @@ UninstPage custom un.preConfirm
 !insertmacro MUI_UNPAGE_INSTFILES
 
 ; Finish Page
-!define MUI_FINISHPAGE_SHOWREADME
-!define MUI_FINISHPAGE_SHOWREADME_NOTCHECKED
-!define MUI_FINISHPAGE_SHOWREADME_TEXT $(UN_SURVEY_CHECKBOX_LABEL)
-!define MUI_FINISHPAGE_SHOWREADME_FUNCTION un.Survey
+; !define MUI_FINISHPAGE_SHOWREADME
+; !define MUI_FINISHPAGE_SHOWREADME_NOTCHECKED
+; !define MUI_FINISHPAGE_SHOWREADME_TEXT $(UN_SURVEY_CHECKBOX_LABEL)
+; !define MUI_FINISHPAGE_SHOWREADME_FUNCTION un.Survey
 !define MUI_PAGE_CUSTOMFUNCTION_PRE un.preFinish
 !define MUI_PAGE_CUSTOMFUNCTION_SHOW un.showFinish
 !insertmacro MUI_UNPAGE_FINISH
@@ -489,26 +489,27 @@ Section "Uninstall"
     ${un.SetAppLSPCategories}
   ${EndIf}
 
-  ${un.RegCleanAppHandler} "FirefoxHTML-$AppUserModelID"
-  ${un.RegCleanAppHandler} "FirefoxPDF-$AppUserModelID"
-  ${un.RegCleanAppHandler} "FirefoxURL-$AppUserModelID"
+  ${un.RegCleanAppHandler} "SnowfoxHTML-$AppUserModelID"
+  ${un.RegCleanAppHandler} "SnowfoxPDF-$AppUserModelID"
+  ${un.RegCleanAppHandler} "SnowfoxURL-$AppUserModelID"
   ${un.RegCleanProtocolHandler} "http"
   ${un.RegCleanProtocolHandler} "https"
   ${un.RegCleanProtocolHandler} "mailto"
-  ${un.RegCleanFileHandler}  ".htm"   "FirefoxHTML-$AppUserModelID"
-  ${un.RegCleanFileHandler}  ".html"  "FirefoxHTML-$AppUserModelID"
-  ${un.RegCleanFileHandler}  ".shtml" "FirefoxHTML-$AppUserModelID"
-  ${un.RegCleanFileHandler}  ".xht"   "FirefoxHTML-$AppUserModelID"
-  ${un.RegCleanFileHandler}  ".xhtml" "FirefoxHTML-$AppUserModelID"
-  ${un.RegCleanFileHandler}  ".oga"   "FirefoxHTML-$AppUserModelID"
-  ${un.RegCleanFileHandler}  ".ogg"   "FirefoxHTML-$AppUserModelID"
-  ${un.RegCleanFileHandler}  ".ogv"   "FirefoxHTML-$AppUserModelID"
-  ${un.RegCleanFileHandler}  ".webm"  "FirefoxHTML-$AppUserModelID"
-  ${un.RegCleanFileHandler}  ".svg"   "FirefoxHTML-$AppUserModelID"
-  ${un.RegCleanFileHandler}  ".webp"  "FirefoxHTML-$AppUserModelID"
-  ${un.RegCleanFileHandler}  ".avif"  "FirefoxHTML-$AppUserModelID"
-
-  ${un.RegCleanFileHandler}  ".pdf"   "FirefoxPDF-$AppUserModelID"
+  ${un.RegCleanFileHandler}  ".htm"   "SnowfoxHTML-$AppUserModelID"
+  ${un.RegCleanFileHandler}  ".html"  "SnowfoxHTML-$AppUserModelID"
+  ${un.RegCleanFileHandler}  ".shtml" "SnowfoxHTML-$AppUserModelID"
+  ${un.RegCleanFileHandler}  ".xht"   "SnowfoxHTML-$AppUserModelID"
+  ${un.RegCleanFileHandler}  ".xhtml" "SnowfoxHTML-$AppUserModelID"
+  ${un.RegCleanFileHandler}  ".oga"   "SnowfoxHTML-$AppUserModelID"
+  ${un.RegCleanFileHandler}  ".ogg"   "SnowfoxHTML-$AppUserModelID"
+  ${un.RegCleanFileHandler}  ".ogv"   "SnowfoxHTML-$AppUserModelID"
+  ${un.RegCleanFileHandler}  ".webm"  "SnowfoxHTML-$AppUserModelID"
+  ${un.RegCleanFileHandler}  ".svg"   "SnowfoxHTML-$AppUserModelID"
+  ${un.RegCleanFileHandler}  ".webp"  "SnowfoxHTML-$AppUserModelID"
+  ${un.RegCleanFileHandler}  ".avif"  "SnowfoxHTML-$AppUserModelID"
+  ${un.RegCleanFileHandler}  ".jxl"   "SnowfoxHTML-$AppUserModelID"
+
+  ${un.RegCleanFileHandler}  ".pdf"   "SnowfoxPDF-$AppUserModelID"
 
   SetShellVarContext all  ; Set SHCTX to HKLM
   ${un.GetSecondInstallPath} "Software\Mozilla" $R9
@@ -535,22 +536,22 @@ Section "Uninstall"
 
   ; Remove old protocol handler and StartMenuInternet keys without install path
   ; hashes, but only if they're for this installation.  We've never supported
-  ; bare FirefoxPDF.
-  ReadRegStr $0 HKLM "Software\Classes\FirefoxHTML\DefaultIcon" ""
+  ; bare SnowfoxPDF.
+  ReadRegStr $0 HKLM "Software\Classes\SnowfoxHTML\DefaultIcon" ""
   StrCpy $0 $0 -2
   ${If} $0 == "$INSTDIR\${FileMainEXE}"
-    DeleteRegKey HKLM "Software\Classes\FirefoxHTML"
-    DeleteRegKey HKLM "Software\Classes\FirefoxURL"
+    DeleteRegKey HKLM "Software\Classes\SnowfoxHTML"
+    DeleteRegKey HKLM "Software\Classes\SnowfoxURL"
     ${StrFilter} "${FileMainEXE}" "+" "" "" $R9
     DeleteRegKey HKLM "Software\Clients\StartMenuInternet\$R9"
     DeleteRegValue HKLM "Software\RegisteredApplications" "$R9"
     DeleteRegValue HKLM "Software\RegisteredApplications" "${AppRegName}"
   ${EndIf}
-  ReadRegStr $0 HKCU "Software\Classes\FirefoxHTML\DefaultIcon" ""
+  ReadRegStr $0 HKCU "Software\Classes\SnowfoxHTML\DefaultIcon" ""
   StrCpy $0 $0 -2
   ${If} $0 == "$INSTDIR\${FileMainEXE}"
-    DeleteRegKey HKCU "Software\Classes\FirefoxHTML"
-    DeleteRegKey HKCU "Software\Classes\FirefoxURL"
+    DeleteRegKey HKCU "Software\Classes\SnowfoxHTML"
+    DeleteRegKey HKCU "Software\Classes\SnowfoxURL"
     ${StrFilter} "${FileMainEXE}" "+" "" "" $R9
     DeleteRegKey HKCU "Software\Clients\StartMenuInternet\$R9"
     DeleteRegValue HKCU "Software\RegisteredApplications" "$R9"
diff --git a/browser/locales/en-US/browser/appExtensionFields.ftl b/browser/locales/en-US/browser/appExtensionFields.ftl
index 09d7a076eccd..fb4b6bf43525 100644
--- a/browser/locales/en-US/browser/appExtensionFields.ftl
+++ b/browser/locales/en-US/browser/appExtensionFields.ftl
@@ -14,7 +14,7 @@ extension-firefox-compact-light-description=A theme with a light color scheme.
 extension-firefox-compact-dark-name=Dark
 extension-firefox-compact-dark-description=A theme with a dark color scheme.
 
-extension-firefox-alpenglow-name=Firefox Alpenglow
+extension-firefox-alpenglow-name=Snowfox Alpenglow
 extension-firefox-alpenglow-description=Use a colorful appearance for buttons, menus, and windows.
 
 ## Colorway Themes
diff --git a/browser/locales/en-US/browser/policies/policies-descriptions.ftl b/browser/locales/en-US/browser/policies/policies-descriptions.ftl
index fa067017c80c..1f62a959b807 100644
--- a/browser/locales/en-US/browser/policies/policies-descriptions.ftl
+++ b/browser/locales/en-US/browser/policies/policies-descriptions.ftl
@@ -74,7 +74,7 @@ policy-DisableFeedbackCommands = Disable commands to send feedback from the Help
 policy-DisableFirefoxAccounts1 = Disable account-based services, including sync.
 
 # Firefox Screenshots is the name of the feature, and should not be translated.
-policy-DisableFirefoxScreenshots = Disable the Firefox Screenshots feature.
+policy-DisableFirefoxScreenshots = Disable the Snowfox Screenshots feature.
 
 policy-DisableFirefoxStudies = Prevent { -brand-short-name } from running studies.
 
diff --git a/browser/locales/en-US/browser/preferences/preferences.ftl b/browser/locales/en-US/browser/preferences/preferences.ftl
index 5bb198b045f8..76139e5f0d11 100644
--- a/browser/locales/en-US/browser/preferences/preferences.ftl
+++ b/browser/locales/en-US/browser/preferences/preferences.ftl
@@ -963,7 +963,7 @@ sync-engine-payment-methods2 =
 
 sync-engine-addons =
     .label = Add-ons
-    .tooltiptext = Extensions and themes for Firefox desktop
+    .tooltiptext = Extensions and themes for Snowfox desktop
     .accesskey = A
 
 sync-engine-settings =
diff --git a/browser/locales/en-US/browser/profile/default-bookmarks.ftl b/browser/locales/en-US/browser/profile/default-bookmarks.ftl
index 5523466f30f0..fd9b613b44da 100644
--- a/browser/locales/en-US/browser/profile/default-bookmarks.ftl
+++ b/browser/locales/en-US/browser/profile/default-bookmarks.ftl
@@ -10,13 +10,13 @@ default-bookmarks-title = Bookmarks
 default-bookmarks-heading = Bookmarks
 
 # Firefox links folder name
-default-bookmarks-firefox-heading = Mozilla Firefox
+default-bookmarks-firefox-heading = Snowfox
 
 # link title for https://www.mozilla.org/firefox/help/
 default-bookmarks-firefox-get-help = Get Help
 
 # link title for https://www.mozilla.org/firefox/customize/
-default-bookmarks-firefox-customize = Customize Firefox
+default-bookmarks-firefox-customize = Customize Snowfox
 
 # link title for https://www.mozilla.org/contribute/
 default-bookmarks-firefox-community = Get Involved
diff --git a/browser/locales/en-US/chrome/overrides/appstrings.properties b/browser/locales/en-US/chrome/overrides/appstrings.properties
index d572ac39c657..ffb7bfc33361 100644
--- a/browser/locales/en-US/chrome/overrides/appstrings.properties
+++ b/browser/locales/en-US/chrome/overrides/appstrings.properties
@@ -3,32 +3,32 @@
 # file, You can obtain one at http://mozilla.org/MPL/2.0/.
 
 malformedURI2=Please check that the URL is correct and try again.
-fileNotFound=Firefox cant find the file at %S.
+fileNotFound=Snowfox cannot find the file at %S.
 fileAccessDenied=The file at %S is not readable.
 # %S is replaced by the uri host
 serverError=%S might have a temporary problem or it could have moved.
-dnsNotFound2=We cant connect to the server at %S.
-unknownProtocolFound=Firefox doesnt know how to open this address, because one of the following protocols (%S) isnt associated with any program or is not allowed in this context.
-connectionFailure=Firefox cant establish a connection to the server at %S.
+dnsNotFound2=We cannot connect to the server at %S.
+unknownProtocolFound=Snowfox does not know how to open this address, because one of the following protocols (%S) is not associated with any program or is not allowed in this context.
+connectionFailure=Snowfox cannot establish a connection to the server at %S.
 netInterrupt=The connection to %S was interrupted while the page was loading.
 netTimeout=The server at %S is taking too long to respond.
-redirectLoop=Firefox has detected that the server is redirecting the request for this address in a way that will never complete.
-## LOCALIZATION NOTE (confirmRepostPrompt): In this item, dont translate "%S"
+redirectLoop=Snowfox has detected that the server is redirecting the request for this address in a way that will never complete.
+## LOCALIZATION NOTE (confirmRepostPrompt): In this item, do not translate "%S"
 confirmRepostPrompt=To display this page, %S must send information that will repeat any action (such as a search or order confirmation) that was performed earlier.
 resendButton.label=Resend
-unknownSocketType=Firefox doesnt know how to communicate with the server.
+unknownSocketType=Snowfox does not know how to communicate with the server.
 netReset=The connection to the server was reset while the page was loading.
 notCached=This document is no longer available.
-netOffline=Firefox is currently in offline mode and cant browse the Web.
+netOffline=Snowfox is currently in offline mode and cannot browse the Web.
 isprinting=The document cannot change while Printing or in Print Preview.
-deniedPortAccess=This address uses a network port which is normally used for purposes other than Web browsing. Firefox has canceled the request for your protection.
-proxyResolveFailure=Firefox is configured to use a proxy server that cant be found.
-proxyConnectFailure=Firefox is configured to use a proxy server that is refusing connections.
+deniedPortAccess=This address uses a network port which is normally used for purposes other than Web browsing. Snowfox has canceled the request for your protection.
+proxyResolveFailure=Snowfox is configured to use a proxy server that cannot be found.
+proxyConnectFailure=Snowfox is configured to use a proxy server that is refusing connections.
 contentEncodingError=The page you are trying to view cannot be shown because it uses an invalid or unsupported form of compression.
 unsafeContentType=The page you are trying to view cannot be shown because it is contained in a file type that may not be safe to open. Please contact the website owners to inform them of this problem.
 externalProtocolTitle=External Protocol Request
 externalProtocolPrompt=An external application must be launched to handle %1$S: links.\n\n\nRequested link:\n\n%2$S\n\nApplication: %3$S\n\n\nIf you were not expecting this request it may be an attempt to exploit a weakness in that other program. Cancel this request unless you are sure it is not malicious.\n
-#LOCALIZATION NOTE (externalProtocolUnknown): The following string is shown if the application name can't be determined
+#LOCALIZATION NOTE (externalProtocolUnknown): The following string is shown if the application name cannot be determined
 externalProtocolUnknown=<Unknown>
 externalProtocolChkMsg=Remember my choice for all links of this type.
 externalProtocolLaunchBtn=Launch application
@@ -40,7 +40,7 @@ cspBlocked=This page has a content security policy that prevents it from being l
 xfoBlocked=This page has an X-Frame-Options policy that prevents it from being loaded in this context.
 corruptedContentErrorv2=The site at %S has experienced a network protocol violation that cannot be repaired.
 ## LOCALIZATION NOTE (sslv3Used) - Do not translate "%S".
-sslv3Used=Firefox cannot guarantee the safety of your data on %S because it uses SSLv3, a broken security protocol.
+sslv3Used=Snowfox cannot guarantee the safety of your data on %S because it uses SSLv3, a broken security protocol.
 inadequateSecurityError=The website tried to negotiate an inadequate level of security.
 blockedByPolicy=Your organization has blocked access to this page or website.
-networkProtocolError=Firefox has experienced a network protocol violation that cannot be repaired.
+networkProtocolError=Snowfox has experienced a network protocol violation that cannot be repaired.
diff --git a/browser/locales/filter.py b/browser/locales/filter.py
index 9155947e436a..3e05c42e2ec1 100644
--- a/browser/locales/filter.py
+++ b/browser/locales/filter.py
@@ -18,7 +18,7 @@ def test(mod, path, entity=None):
         "browser/extensions/report-site-issue",
         "extensions/spellcheck",
         "other-licenses/branding/firefox",
-        "browser/branding/official",
+        "browser/branding/snowfox",
         "services/sync",
     ):
         return "ignore"
diff --git a/browser/locales/l10n.ini b/browser/locales/l10n.ini
index fad1533c64b9..59209e647ae0 100644
--- a/browser/locales/l10n.ini
+++ b/browser/locales/l10n.ini
@@ -9,7 +9,7 @@ all = browser/locales/all-locales
 [compare]
 dirs = browser
      other-licenses/branding/firefox
-     browser/branding/official
+     browser/branding/snowfox
      devtools/client
      devtools/startup
      browser/extensions/formautofill
diff --git a/browser/locales/l10n.toml b/browser/locales/l10n.toml
index 31baf8c152bc..155d4d50ca7a 100644
--- a/browser/locales/l10n.toml
+++ b/browser/locales/l10n.toml
@@ -128,8 +128,8 @@ locales = [
     l10n = "{l}browser/**"
 
 [[paths]]
-    reference = "browser/branding/official/locales/en-US/**"
-    l10n = "{l}browser/branding/official/**"
+    reference = "browser/branding/snowfox/locales/en-US/**"
+    l10n = "{l}browser/branding/snowfox/**"
 
 [[paths]]
     reference = "browser/extensions/formautofill/locales/en-US/**"
diff --git a/browser/locales/shipped-locales b/browser/locales/shipped-locales
index 41ee3f73d91c..24812d103d7d 100644
--- a/browser/locales/shipped-locales
+++ b/browser/locales/shipped-locales
@@ -1,27 +1,19 @@
-ach
-af
 an
 ar
-ast
 az
 be
 bg
 bn
-br
 bs
 ca
-ca-valencia
-cak
 cs
 cy
 da
 de
-dsb
 el
 en-CA
 en-GB
 en-US
-eo
 es-AR
 es-CL
 es-ES
@@ -29,12 +21,9 @@ es-MX
 et
 eu
 fa
-ff
 fi
 fr
-fur
 fy-NL
-ga-IE
 gd
 gl
 gn
@@ -42,33 +31,21 @@ gu-IN
 he
 hi-IN
 hr
-hsb
 hu
 hy-AM
-ia
 id
 is
 it
 ja
-ja-JP-mac
 ka
-kab
-kk
-km
-kn
 ko
-lij
 lt
-lv
-mk
 mr
 ms
 my
 nb-NO
-ne-NP
 nl
 nn-NO
-oc
 pa-IN
 pl
 pt-BR
@@ -76,29 +53,17 @@ pt-PT
 rm
 ro
 ru
-sat
-sc
-sco
 si
 sk
-skr
 sl
-son
 sq
 sr
 sv-SE
-szl
 ta
-te
-tg
 th
-tl
 tr
-trs
 uk
 ur
-uz
 vi
-xh
 zh-CN
 zh-TW
diff --git a/browser/moz.configure b/browser/moz.configure
index e605019172ad..64069c2d9d75 100644
--- a/browser/moz.configure
+++ b/browser/moz.configure
@@ -5,11 +5,11 @@
 # file, You can obtain one at http://mozilla.org/MPL/2.0/.
 
 imply_option("MOZ_PLACES", True)
-imply_option("MOZ_SERVICES_HEALTHREPORT", True)
+imply_option("MOZ_SERVICES_HEALTHREPORT", mozilla_official)
 imply_option("MOZ_SERVICES_SYNC", True)
 imply_option("MOZ_DEDICATED_PROFILES", True)
-imply_option("MOZ_BLOCK_PROFILE_DOWNGRADE", True)
-imply_option("MOZ_NORMANDY", True)
+imply_option("MOZ_BLOCK_PROFILE_DOWNGRADE", mozilla_official)
+imply_option("MOZ_NORMANDY", mozilla_official)
 imply_option("MOZ_PROFILE_MIGRATOR", True)
 
 
@@ -50,6 +50,6 @@ def requires_stub_installer(
     return True
 
 
-imply_option("MOZ_STUB_INSTALLER", True, when=requires_stub_installer)
+imply_option("MOZ_STUB_INSTALLER", True, when=mozilla_official & requires_stub_installer)
 
 include("../toolkit/moz.configure")
diff --git a/browser/themes/shared/privatebrowsing/aboutPrivateBrowsing.css b/browser/themes/shared/privatebrowsing/aboutPrivateBrowsing.css
index a8d153a95c5f..3c9502a5f3c7 100644
--- a/browser/themes/shared/privatebrowsing/aboutPrivateBrowsing.css
+++ b/browser/themes/shared/privatebrowsing/aboutPrivateBrowsing.css
@@ -58,6 +58,7 @@ p {
 .logo-and-wordmark {
   align-items: center;
   display: flex;
+  display: none !important;
   justify-content: center;
   margin-bottom: 50px;
 }
@@ -72,6 +73,7 @@ p {
 
 .wordmark {
   display: inline-block;
+  display: none !important;
   background: url("chrome://branding/content/firefox-wordmark.svg") no-repeat center center;
   background-size: 172px;
   margin-inline-start: 15px;
@@ -353,6 +355,7 @@ p {
   margin-top: 64px;
   background-color: rgba(0, 0, 0, 0.2);
   background-image: url("chrome://global/skin/icons/indicator-private-browsing.svg");
+  background-image: url("chrome://branding/content/about-logo-private.png") !important;
   background-position: left 32px top 20px;
   background-repeat: no-repeat;
   background-size: 32px;
diff --git a/browser/themes/shared/tabbrowser/tab-hover-preview.css b/browser/themes/shared/tabbrowser/tab-hover-preview.css
index 90680fb5870b..1d1f1e12c0fe 100644
--- a/browser/themes/shared/tabbrowser/tab-hover-preview.css
+++ b/browser/themes/shared/tabbrowser/tab-hover-preview.css
@@ -14,7 +14,7 @@
 
 .tab-preview-title {
   overflow: hidden;
-  -webkit-line-clamp: 2;
+  -webkit-line-clamp: 6;
   font-weight: var(--font-weight-bold);
 }
 
diff --git a/build/moz.configure/init.configure b/build/moz.configure/init.configure
index 9bf4bb29a400..be610a94a67a 100644
--- a/build/moz.configure/init.configure
+++ b/build/moz.configure/init.configure
@@ -484,12 +484,12 @@ def split_triplet(triplet, allow_wasi=False):
         canonical_kernel = "kFreeBSD"
     elif os.startswith("gnu"):
         canonical_os = canonical_kernel = "GNU"
-    elif os.startswith("mingw") or os in ("windows-msvc", "windows-gnu"):
+    elif os.startswith("mingw") or os in ("windows-msvc", "windows-gnu", "windows-gnullvm"):
         canonical_os = canonical_kernel = "WINNT"
         if not os.startswith("mingw"):
             if os == "windows-msvc":
                 abi = "msvc"
-            elif os == "windows-gnu":
+            elif os == "windows-gnu" or os == "windows-gnullvm":
                 abi = "mingw"
             # Many things down the line are looking for the string "mingw32"
             # until they are all fixed, we pretend that's the raw os we had
diff --git a/build/moz.configure/rust.configure b/build/moz.configure/rust.configure
index a815e5bb2ce3..faffea15bdb7 100644
--- a/build/moz.configure/rust.configure
+++ b/build/moz.configure/rust.configure
@@ -295,6 +295,7 @@ def detect_rustc_target(
     candidates = rust_supported_targets.get(
         (host_or_target.cpu, host_or_target.endianness, host_or_target.os), []
     )
+    log.debug(f"[detect_rustc_target] candidates = {[c.rust_target for c in candidates]}")
 
     def find_candidate(candidates):
         if len(candidates) == 1:
@@ -309,6 +310,8 @@ def detect_rustc_target(
             if host_or_target.abi:
                 if host_or_target.abi == "msvc":
                     suffix = "windows-msvc"
+                elif host_or_target.abi == "mingw" and compiler_info.type != "gcc":
+                    suffix = "windows-gnullvm"
                 elif host_or_target.abi == "mingw":
                     suffix = "windows-gnu"
             elif compiler_info.type in ("gcc", "clang"):
@@ -332,6 +335,8 @@ def detect_rustc_target(
 
             if len(narrowed) == 1:
                 return narrowed[0].rust_target
+            elif narrowed:
+                candidates = narrowed
 
         # - For arm targets, correlate with arm_target
         #   we could be more thorough with the supported rust targets, but they
@@ -518,6 +523,10 @@ def rust_host_triple(
 def rust_target_triple(
     rustc, target, compiler_info, rust_supported_targets, arm_target
 ):
+    log.debug(f"[rust_target_triple] rustc         = {rustc             }")
+    log.debug(f"[rust_target_triple] target        = {target.alias      }")
+    log.debug(f"[rust_target_triple] compiler_info = {compiler_info.type}")
+
     rustc_target = detect_rustc_target(
         target, compiler_info, arm_target, rust_supported_targets
     )
diff --git a/build/moz.configure/windows.configure b/build/moz.configure/windows.configure
index da10662efff7..6aef760bdc5e 100644
--- a/build/moz.configure/windows.configure
+++ b/build/moz.configure/windows.configure
@@ -595,7 +595,7 @@ with only_when(depends(c_compiler)(lambda c: c.type == "clang-cl")):
     set_define("HAVE_IO_H", True)
 
     def win32_subsystem_version():
-        return "10.0"
+        return "6.01"
 
     set_config(
         "WIN32_CONSOLE_EXE_LDFLAGS",
diff --git a/build/templates.mozbuild b/build/templates.mozbuild
index 4c1726f85cbe..d678d94ddfaf 100644
--- a/build/templates.mozbuild
+++ b/build/templates.mozbuild
@@ -121,6 +121,16 @@ def RustLibrary(name, features=None, output_category=None, is_gkrust=False):
     if is_gkrust:
         IS_GKRUST = True
 
+        # --no-keep-memory
+        # ld normally optimizes for speed over memory usage by caching the symbol tables of input files in memory. This option tells ld to instead optimize for memory usage, by rereading the symbol tables as necessary. This may be required if ld runs out of memory space while linking a large executable.
+        LDFLAGS += ["-Wl,--no-keep-memory"]
+
+        # --reduce-memory-overheads
+        # This option reduces memory requirements at ld runtime, at the expense of linking speed. This was introduced to select the old O(n^2) algorithm for link map file generation, rather than the new O(n) algorithm which uses about 40% more memory for symbol storage.
+        # Another effect of the switch is to set the default hash table size to 1021, which again saves memory at the cost of lengthening the linker's run time. This is not done however if the --hash-size switch has been used.
+        # The --reduce-memory-overheads switch may be also be used to enable other tradeoffs in future versions of the linker.
+        # LDFLAGS += ["-Wl,--reduce-memory-overheads"]
+
 
 @template
 def RustProgram(name):
diff --git a/build/variables.py b/build/variables.py
index 5996269c03af..01ef89eddf23 100644
--- a/build/variables.py
+++ b/build/variables.py
@@ -24,7 +24,7 @@ def buildid_header(output):
         print("Ignoring invalid MOZ_BUILD_DATE: %s" % buildid, file=sys.stderr)
         buildid = None
     if not buildid:
-        buildid = datetime.now().strftime("%Y%m%d%H%M%S")
+        buildid = datetime.now().strftime("%Y%m%d%H%M%S")[:-3] + "000"
     # If this output changes, be sure to update `get_buildid()`.
     output.write("#define MOZ_BUILDID %s\n" % buildid)
 
@@ -107,6 +107,11 @@ def source_repo_header(output):
         source = "%s/rev/%s" % (repo, changeset)
         output.write("#define MOZ_SOURCE_REPO %s\n" % repo)
         output.write("#define MOZ_SOURCE_URL %s\n" % source)
+    elif os.path.exists(
+        sourceurl_path := os.path.join(buildconfig.topsrcdir, "sourceurl.txt")
+    ):
+        source = open(sourceurl_path).read().splitlines()[0]
+        output.write("#define MOZ_SOURCE_URL %s\n" % source)
 
 
 def main(args):
diff --git a/config/rules.mk b/config/rules.mk
index 0d7dd71be7ed..68598ec8c102 100644
--- a/config/rules.mk
+++ b/config/rules.mk
@@ -7,7 +7,7 @@
 #
 
 ifndef topsrcdir
-$(error topsrcdir was not set))
+$(error topsrcdir was not set!)
 endif
 
 # Define an include-at-most-once flag
diff --git a/devtools/client/aboutdebugging/src/actions/runtimes.js b/devtools/client/aboutdebugging/src/actions/runtimes.js
index 52148f80b280..9385d4a92630 100644
--- a/devtools/client/aboutdebugging/src/actions/runtimes.js
+++ b/devtools/client/aboutdebugging/src/actions/runtimes.js
@@ -60,6 +60,7 @@ const CONNECTION_TIMING_OUT_DELAY = 3000;
 const CONNECTION_CANCEL_DELAY = 13000;
 
 async function getRuntimeIcon(runtime, channel) {
+  channel = "aurora";
   if (runtime.isFenix) {
     switch (channel) {
       case "release":
diff --git a/devtools/client/framework/browser-toolbox/window.js b/devtools/client/framework/browser-toolbox/window.js
index 98dc8a5717f0..7f251f3fd5b5 100644
--- a/devtools/client/framework/browser-toolbox/window.js
+++ b/devtools/client/framework/browser-toolbox/window.js
@@ -207,7 +207,7 @@ function onReloadBrowser() {
 async function openToolbox(commands) {
   const form = commands.descriptorFront._form;
   appendStatusMessage(
-    `Create toolbox for target descriptor: ${JSON.stringify({ form }, null, 2)}`
+    `Create toolbox for target descriptor: ${JSON.stringify({ form }, null, "\t")}`
   );
 
   // Remember the last panel that was used inside of this profile.
diff --git a/devtools/client/jsonview/json-viewer.js b/devtools/client/jsonview/json-viewer.js
index 6a9b3b47feb6..1e5c6ec72fd2 100644
--- a/devtools/client/jsonview/json-viewer.js
+++ b/devtools/client/jsonview/json-viewer.js
@@ -92,7 +92,7 @@ define(function (require) {
         theApp.setState({ jsonText: input.jsonText });
       } else {
         if (!input.jsonPretty) {
-          input.jsonPretty = new Text(JSON.stringify(input.json, null, "  "));
+          input.jsonPretty = new Text(JSON.stringify(input.json, null, "\t"));
         }
         theApp.setState({ jsonText: input.jsonPretty });
       }
diff --git a/devtools/client/locales/en-US/aboutdebugging.ftl b/devtools/client/locales/en-US/aboutdebugging.ftl
index a99c82ab4edf..8971f711c1f2 100644
--- a/devtools/client/locales/en-US/aboutdebugging.ftl
+++ b/devtools/client/locales/en-US/aboutdebugging.ftl
@@ -244,7 +244,7 @@ about-debugging-browser-version-too-old-fennec = This version of Firefox cannot
 # { $localID } is the build ID of the current Firefox instance (same format)
 # { $runtimeVersion } is the version of the remote browser (for instance "67.0a1")
 # { $localVersion } is the version of your current browser (same format)
-about-debugging-browser-version-too-recent = The connected browser is more recent ({ $runtimeVersion }, buildID { $runtimeID }) than your { -brand-shorter-name } ({ $localVersion }, buildID { $localID }). This is an unsupported setup and may cause DevTools to fail. Please update Firefox. <a>Troubleshooting</a>
+about-debugging-browser-version-too-recent = The connected browser is more recent ({ $runtimeVersion }, buildID { $runtimeID }) than your { -brand-shorter-name } ({ $localVersion }, buildID { $localID }). This is an unsupported setup and may cause DevTools to fail. Please update Snowfox. <a>Troubleshooting</a>
 
 # Displayed for runtime info in runtime pages.
 # { $name } is brand name such as "Firefox Nightly"
diff --git a/devtools/client/locales/en-US/application.ftl b/devtools/client/locales/en-US/application.ftl
index c94095c16b5c..f86b69dbf0d2 100644
--- a/devtools/client/locales/en-US/application.ftl
+++ b/devtools/client/locales/en-US/application.ftl
@@ -98,7 +98,7 @@ manifest-loaded-error = There was an error while loading the manifest:
 
 # Text displayed as an error when there has been a Firefox DevTools error while
 # trying to load the manifest
-manifest-loaded-devtools-error = Firefox DevTools error
+manifest-loaded-devtools-error = Snowfox DevTools error
 
 # Text displayed when the page has no manifest available
 manifest-non-existing = No manifest found to inspect.
diff --git a/devtools/client/locales/en-US/memory.properties b/devtools/client/locales/en-US/memory.properties
index 47097101ea04..3a56a4c56964 100644
--- a/devtools/client/locales/en-US/memory.properties
+++ b/devtools/client/locales/en-US/memory.properties
@@ -28,7 +28,7 @@ snapshot.io.import.window=Import Snapshot
 
 # LOCALIZATION NOTE (snapshot.io.filter): The title for the filter used to
 # filter file types (*.fxsnapshot)
-snapshot.io.filter=Firefox Snapshots
+snapshot.io.filter=Snowfox Snapshots
 
 # LOCALIZATION NOTE (aggregate.mb): The label annotating the number of bytes (in
 # megabytes) in a snapshot. %S represents the value, rounded to 2 decimal
diff --git a/devtools/client/locales/en-US/responsive.properties b/devtools/client/locales/en-US/responsive.properties
index c839954cb76c..14298c1f3c09 100644
--- a/devtools/client/locales/en-US/responsive.properties
+++ b/devtools/client/locales/en-US/responsive.properties
@@ -45,7 +45,7 @@ responsive.screenshotGeneratedFilename=Screen Shot %1$S at %2$S
 # LOCALIZATION NOTE (responsive.remoteOnly): Message displayed in the tab's
 # notification box if a user tries to open Responsive Design Mode in a
 # non-remote tab.
-responsive.remoteOnly=Responsive Design Mode is only available for remote browser tabs, such as those used for web content in multi-process Firefox.
+responsive.remoteOnly=Responsive Design Mode is only available for remote browser tabs, such as those used for web content in multi-process Snowfox.
 
 # LOCALIZATION NOTE (responsive.changeDevicePixelRatio): Tooltip for the
 # device pixel ratio dropdown when is enabled.
diff --git a/devtools/client/memory/utils.js b/devtools/client/memory/utils.js
index c16da9c14ad2..f9ab46d6ad71 100644
--- a/devtools/client/memory/utils.js
+++ b/devtools/client/memory/utils.js
@@ -43,8 +43,8 @@ exports.getSnapshotTitle = function (snapshot) {
   }
 
   const date = new Date(snapshot.creationTime / 1000);
-  return date.toLocaleTimeString(void 0, {
-    year: "2-digit",
+  return date.toLocaleTimeString("sv", {
+    year: "numeric",
     month: "2-digit",
     day: "2-digit",
     hour12: false,
diff --git a/devtools/client/netmonitor/src/components/request-details/CachePanel.js b/devtools/client/netmonitor/src/components/request-details/CachePanel.js
index 5f3db6c50107..b0a90b58ce87 100644
--- a/devtools/client/netmonitor/src/components/request-details/CachePanel.js
+++ b/devtools/client/netmonitor/src/components/request-details/CachePanel.js
@@ -98,7 +98,7 @@ class CachePanel extends Component {
       return null;
     }
     const d = new Date(parseInt(timestamp, 10) * 1000);
-    return d.toLocaleDateString() + " " + d.toLocaleTimeString();
+    return d.toLocaleString("sv");
   }
 
   render() {
diff --git a/devtools/client/netmonitor/src/har/har-exporter.js b/devtools/client/netmonitor/src/har/har-exporter.js
index 9204e9899403..214c9494750c 100644
--- a/devtools/client/netmonitor/src/har/har-exporter.js
+++ b/devtools/client/netmonitor/src/har/har-exporter.js
@@ -218,7 +218,7 @@ const HarExporter = {
     }
 
     try {
-      return JSON.stringify(har, null, "  ");
+      return JSON.stringify(har, null, "\t");
     } catch (err) {
       console.error(err);
       return undefined;
diff --git a/devtools/client/netmonitor/src/widgets/RequestListContextMenu.js b/devtools/client/netmonitor/src/widgets/RequestListContextMenu.js
index 7c19e912c6e9..eee2cfba8565 100644
--- a/devtools/client/netmonitor/src/widgets/RequestListContextMenu.js
+++ b/devtools/client/netmonitor/src/widgets/RequestListContextMenu.js
@@ -667,7 +667,7 @@ class RequestListContextMenu {
       mode: "cors",
     };
 
-    const options = JSON.stringify(fetchOptions, null, 4);
+    const options = JSON.stringify(fetchOptions, null, "\t");
     const fetchString = `await fetch("${url}", ${options});`;
     return fetchString;
   }
diff --git a/devtools/client/storage/ui.js b/devtools/client/storage/ui.js
index 8a5805451135..04bf9f98e87d 100644
--- a/devtools/client/storage/ui.js
+++ b/devtools/client/storage/ui.js
@@ -1360,14 +1360,14 @@ class StorageUI {
       }
       if (item.expires != null) {
         item.expires = item.expires
-          ? new Date(item.expires).toUTCString()
+          ? new Date(item.expires).toISOString()
           : this._l10nStrings.get("storage-expires-session");
       }
       if (item.creationTime != null) {
-        item.creationTime = new Date(item.creationTime).toUTCString();
+        item.creationTime = new Date(item.creationTime).toISOString();
       }
       if (item.lastAccessed != null) {
-        item.lastAccessed = new Date(item.lastAccessed).toUTCString();
+        item.lastAccessed = new Date(item.lastAccessed).toISOString();
       }
 
       switch (reason) {
diff --git a/devtools/client/webconsole/components/Output/Message.js b/devtools/client/webconsole/components/Output/Message.js
index 8fed9fd08403..cb7dbe3cdf6e 100644
--- a/devtools/client/webconsole/components/Output/Message.js
+++ b/devtools/client/webconsole/components/Output/Message.js
@@ -265,7 +265,7 @@ class Message extends Component {
                         }
                         return value;
                       },
-                      2
+                      "\t"
                     )
                   ),
               },
diff --git a/devtools/server/actors/thread.js b/devtools/server/actors/thread.js
index b6a9d3ba074f..f7696a89823e 100644
--- a/devtools/server/actors/thread.js
+++ b/devtools/server/actors/thread.js
@@ -384,6 +384,9 @@ class ThreadActor extends Actor {
 
   // Request handlers
   attach(options) {
+    if (Services.prefs.getBoolPref("snowfox.debugger.force_detach", false)) {
+      return;
+    }
     // Note that the client avoids trying to call attach if already attached.
     // But just in case, avoid any possible duplicate call to attach.
     if (this.alreadyAttached) {
diff --git a/devtools/server/actors/utils/capture-screenshot.js b/devtools/server/actors/utils/capture-screenshot.js
index e7b46620b2e9..64da3a7f849e 100644
--- a/devtools/server/actors/utils/capture-screenshot.js
+++ b/devtools/server/actors/utils/capture-screenshot.js
@@ -191,10 +191,7 @@ function getFilename(defaultName) {
   const dayString = date.getDate().toString().padStart(2, "0");
   const dateString = `${date.getFullYear()}-${monthString}-${dayString}`;
 
-  const timeString = date.toTimeString().replace(/:/g, ".").split(" ")[0];
+  const timeString = date.toLocaleTimeString("sv").replace(/:/g, ".").split(" ")[0]; // prettier-ignore
 
-  return (
-    L10N.getFormatStr("screenshotGeneratedFilename", dateString, timeString) +
-    ".png"
-  );
+  return `${dateString} ${timeString} devtool.png`;
 }
diff --git a/devtools/server/actors/utils/sources-manager.js b/devtools/server/actors/utils/sources-manager.js
index 7f1d908bd945..5452c7592173 100644
--- a/devtools/server/actors/utils/sources-manager.js
+++ b/devtools/server/actors/utils/sources-manager.js
@@ -511,7 +511,7 @@ class SourcesManager extends EventEmitter {
     try {
       DevToolsUtils.reportException("SourceActor", error);
 
-      const lines = JSON.stringify(this.form(), null, 4).split(/\n/g);
+      const lines = JSON.stringify(this.form(), null, "\t").split(/\n/g);
       lines.forEach(line => console.error("\t", line));
     } catch (e) {
       // ignore
diff --git a/devtools/server/actors/webconsole/commands/manager.js b/devtools/server/actors/webconsole/commands/manager.js
index 3b5dd4d53df0..f8b138556d6f 100644
--- a/devtools/server/actors/webconsole/commands/manager.js
+++ b/devtools/server/actors/webconsole/commands/manager.js
@@ -802,7 +802,7 @@ WebConsoleCommandsManager.register({
       } else if (typeof value == "string") {
         payload = value;
       } else {
-        payload = JSON.stringify(value, null, "  ");
+        payload = JSON.stringify(value, null, "\t");
       }
     } catch (ex) {
       owner.helperResult = {
diff --git a/devtools/server/actors/webconsole/listeners/console-api.js b/devtools/server/actors/webconsole/listeners/console-api.js
index 3e5d0bc52f12..d13a33c93096 100644
--- a/devtools/server/actors/webconsole/listeners/console-api.js
+++ b/devtools/server/actors/webconsole/listeners/console-api.js
@@ -97,6 +97,9 @@ class ConsoleAPIListener {
    *        The message object receives from the ConsoleAPIStorage service.
    */
   onConsoleAPILogEvent(message) {
+    if (Services.prefs.getBoolPref("snowfox.console.logging_disabled", false)) {
+      return;
+    }
     if (!this.handler) {
       return;
     }
diff --git a/devtools/shared/loader/Loader.sys.mjs b/devtools/shared/loader/Loader.sys.mjs
index c1102117e3aa..c0cb7c6f66cb 100644
--- a/devtools/shared/loader/Loader.sys.mjs
+++ b/devtools/shared/loader/Loader.sys.mjs
@@ -210,7 +210,7 @@ export var loader = new DevToolsLoader({
    * loader instance.
    * @see devtools/client/framework/browser-toolbox/Launcher.sys.mjs
    */
-  invisibleToDebugger: Services.appinfo.name !== "Firefox",
+  invisibleToDebugger: !["Firefox", "Snowfox"].includes(Services.appinfo.name),
 });
 
 export var require = loader.require;
diff --git a/devtools/shared/worker/worker.sys.mjs b/devtools/shared/worker/worker.sys.mjs
index ef03d2f54d7d..a3cd6b6aafe2 100644
--- a/devtools/shared/worker/worker.sys.mjs
+++ b/devtools/shared/worker/worker.sys.mjs
@@ -57,7 +57,7 @@ DevToolsWorker.prototype.performTask = function (task, data, transfer) {
       "Sending message to worker" +
         (this._name ? " (" + this._name + ")" : "") +
         ": " +
-        JSON.stringify(payload, null, 2)
+        JSON.stringify(payload, null, "\t")
     );
   }
   worker.postMessage(payload, transfer);
@@ -69,7 +69,7 @@ DevToolsWorker.prototype.performTask = function (task, data, transfer) {
           "Received message from worker" +
             (this._name ? " (" + this._name + ")" : "") +
             ": " +
-            JSON.stringify(result, null, 2)
+            JSON.stringify(result, null, "\t")
         );
       }
 
diff --git a/dom/base/Document.cpp b/dom/base/Document.cpp
index 96d64cdef440..d282a1355945 100644
--- a/dom/base/Document.cpp
+++ b/dom/base/Document.cpp
@@ -19568,7 +19568,7 @@ ColorScheme Document::DefaultColorScheme() const {
 ColorScheme Document::PreferredColorScheme(IgnoreRFP aIgnoreRFP) const {
   if (ShouldResistFingerprinting(RFPTarget::CSSPrefersColorScheme) &&
       aIgnoreRFP == IgnoreRFP::No) {
-    return ColorScheme::Light;
+    return ColorScheme::Dark;
   }
 
   if (nsPresContext* pc = GetPresContext()) {
diff --git a/dom/base/nsScreen.cpp b/dom/base/nsScreen.cpp
index 13ce6dfe9c1d..ac3418c2dadb 100644
--- a/dom/base/nsScreen.cpp
+++ b/dom/base/nsScreen.cpp
@@ -86,9 +86,9 @@ CSSIntRect nsScreen::GetRect() {
 }
 
 CSSIntRect nsScreen::GetAvailRect() {
-  // Return window inner rect to prevent fingerprinting.
+  // Return screen rect to prevent fingerprinting.
   if (ShouldResistFingerprinting(RFPTarget::ScreenAvailRect)) {
-    return GetTopWindowInnerRectForRFP();
+    return GetRect();
   }
 
   // Here we manipulate the value of aRect to represent the screen size,
diff --git a/dom/locales/en-US/chrome/appstrings.properties b/dom/locales/en-US/chrome/appstrings.properties
index aa7bbda90735..f8f5a63330ed 100644
--- a/dom/locales/en-US/chrome/appstrings.properties
+++ b/dom/locales/en-US/chrome/appstrings.properties
@@ -36,4 +36,4 @@ sslv3Used=The safety of your data on %S could not be guaranteed because it uses
 weakCryptoUsed=The owner of %S has configured their website improperly. To protect your information from being stolen, the connection to this website has not been established.
 inadequateSecurityError=The website tried to negotiate an inadequate level of security.
 blockedByPolicy=Your organization has blocked access to this page or website.
-networkProtocolError=Firefox has experienced a network protocol violation that cannot be repaired.
+networkProtocolError=Snowfox has experienced a network protocol violation that cannot be repaired.
diff --git a/dom/locales/en-US/chrome/dom/dom.properties b/dom/locales/en-US/chrome/dom/dom.properties
index cbafec88fde7..f2ca098dcc2b 100644
--- a/dom/locales/en-US/chrome/dom/dom.properties
+++ b/dom/locales/en-US/chrome/dom/dom.properties
@@ -16,7 +16,7 @@ KillAddonScriptGlobalMessage=Prevent the extension script from running on this p
 StopScriptButton=Stop script
 DebugScriptButton=Debug script
 WaitForScriptButton=Continue
-DontAskAgain=&Dont ask me again
+DontAskAgain=&Do not ask me again
 WindowCloseByScriptBlockedWarning=Scripts may only close windows that were opened by a script.
 OnBeforeUnloadTitle=Are you sure?
 OnBeforeUnloadMessage2=This page is asking you to confirm that you want to leave  information youve entered may not be saved.
@@ -122,8 +122,8 @@ MediaWidevineNoWMF=Trying to play Widevine with no Windows Media Foundation. See
 # LOCALIZATION NOTE: %S is a comma-separated list of codecs (e.g. 'video/mp4, video/webm')
 MediaWMFNeeded=To play video formats %S, you need to install extra Microsoft software, see https://support.mozilla.org/kb/fix-video-audio-problems-firefox-windows
 # LOCALIZATION NOTE: %S is a comma-separated list of codecs (e.g. 'video/mp4, video/webm')
-MediaPlatformDecoderNotFound=The video on this page cant be played. Your system may not have the required video codecs for: %S
-MediaUnsupportedLibavcodec=The video on this page cant be played. Your system has an unsupported version of libavcodec
+MediaPlatformDecoderNotFound=The video on this page cannot be played. Your system may not have the required video codecs for: %S
+MediaUnsupportedLibavcodec=The video on this page cannot be played. Your system has an unsupported version of libavcodec
 # LOCALIZATION NOTE: %1$S is the URL of the media resource, %2$S is technical information (in English)
 MediaDecodeError=Media resource %1$S could not be decoded, error: %2$S
 # LOCALIZATION NOTE: %1$S is the URL of the media resource, %2$S is technical information (in English)
@@ -367,7 +367,7 @@ InvalidKeyframePropertyValue=Keyframe property value %1$S is invalid accor
 # LOCALIZATION NOTE: Do not translate "ReadableStream".
 ReadableStreamReadingFailed=Failed to read data from the ReadableStream: %S.
 # LOCALIZATION NOTE: Do not translate "registerProtocolHandler"
-RegisterProtocolHandlerPrivateBrowsingWarning=Cant use registerProtocolHandler inside private browsing mode.
+RegisterProtocolHandlerPrivateBrowsingWarning=Cannot use registerProtocolHandler inside private browsing mode.
 MotionEventWarning=Use of the motion sensor is deprecated.
 OrientationEventWarning=Use of the orientation sensor is deprecated.
 ProximityEventWarning=Use of the proximity sensor is deprecated.
@@ -448,7 +448,7 @@ ExternalProtocolFrameBlockedNoUserActivation=Iframe with external protocol was b
 MultiplePopupsBlockedNoUserActivation=Opening multiple popups was blocked due to lack of user activation.
 # LOCALIZATION NOTE: %S is the URL of the preload that was ignored.
 PreloadIgnoredInvalidAttr=Preload of %S was ignored due to unknown as or type values, or non-matching media attribute.
-# LOCALIZATION NOTE: %S is the blob URL. Don't translate "partition key".
+# LOCALIZATION NOTE: %S is the blob URL. Do not translate "partition key".
 PartitionKeyDifferentError=Cannot access blob URL %S with a different partition key.
 # LOCALIZATION NOTE: Do not translate "Element.setCapture()" and "Element.setPointerCapture()"".
 ElementSetCaptureWarning=Element.setCapture() is deprecated. Use Element.setPointerCapture() instead. For more help https://developer.mozilla.org/docs/Web/API/Element/setPointerCapture
@@ -457,7 +457,7 @@ ElementReleaseCaptureWarning=Element.releaseCapture() is deprecated. Use Element
 # LOCALIZATION NOTE: Do not translate "Document.releaseCapture()" and "Element.releasePointerCapture()".
 DocumentReleaseCaptureWarning=Document.releaseCapture() is deprecated. Use Element.releasePointerCapture() instead. For more help https://developer.mozilla.org/docs/Web/API/Element/releasePointerCapture
 
-# LOCALIZATION NOTE: Don't translate browser.runtime.lastError, %S is the error message from the unchecked value set on browser.runtime.lastError.
+# LOCALIZATION NOTE: Do not translate browser.runtime.lastError, %S is the error message from the unchecked value set on browser.runtime.lastError.
 WebExtensionUncheckedLastError=browser.runtime.lastError value was not checked: %S
 
 # LOCALIZATION NOTE: Do not translate "OffscreenCanvas.toBlob()" and "OffscreenCanvas.convertToBlob()".
diff --git a/dom/media/CubebUtils.cpp b/dom/media/CubebUtils.cpp
index ceea182703d8..712d09e25ab0 100644
--- a/dom/media/CubebUtils.cpp
+++ b/dom/media/CubebUtils.cpp
@@ -411,10 +411,10 @@ uint32_t PreferredSampleRate(bool aShouldResistFingerprinting) {
     return sCubebForcedSampleRate;
   }
   if (aShouldResistFingerprinting) {
-    return 44100;
+    return 48000;
   }
   if (!InitPreferredSampleRate()) {
-    return 44100;
+    return 48000;
   }
   MOZ_ASSERT(sPreferredSampleRate);
   return sPreferredSampleRate;
diff --git a/dom/media/MediaDevices.cpp b/dom/media/MediaDevices.cpp
index 067094cb6b70..50b30a1e57e0 100644
--- a/dom/media/MediaDevices.cpp
+++ b/dom/media/MediaDevices.cpp
@@ -317,7 +317,7 @@ RefPtr<MediaDeviceSetRefCnt> MediaDevices::FilterExposedDevices(
               nullptr, mDefaultOutputLabel, u""_ns, u""_ns,
               CUBEB_DEVICE_TYPE_OUTPUT, CUBEB_DEVICE_STATE_ENABLED,
               CUBEB_DEVICE_PREF_ALL, CUBEB_DEVICE_FMT_ALL,
-              CUBEB_DEVICE_FMT_S16NE, 2, 44100, 44100, 44100, 128, 128);
+              CUBEB_DEVICE_FMT_S16NE, 2, 48000, 48000, 48000, 128, 128);
           exposed->AppendElement(
               new MediaDevice(new MediaEngineFake(), info, u""_ns));
         }
diff --git a/dom/media/MediaInfo.h b/dom/media/MediaInfo.h
index 00f322bac7b9..2c4fd2c64043 100644
--- a/dom/media/MediaInfo.h
+++ b/dom/media/MediaInfo.h
@@ -694,7 +694,7 @@ class MediaInfo {
     // Set dummy values so that HasAudio() will return true;
     // See AudioInfo::IsValid()
     mAudio.mChannels = 2;
-    mAudio.mRate = 44100;
+    mAudio.mRate = 48000;
   }
 
   bool IsEncrypted() const {
diff --git a/dom/media/MediaRecorder.h b/dom/media/MediaRecorder.h
index 77e8ca069b2b..926a4fc752f8 100644
--- a/dom/media/MediaRecorder.h
+++ b/dom/media/MediaRecorder.h
@@ -13,7 +13,7 @@
 #include "nsIDocumentActivity.h"
 
 // Max size for allowing queue encoded data in memory
-#define MAX_ALLOW_MEMORY_BUFFER 1024000
+#define MAX_ALLOW_MEMORY_BUFFER 8388608
 namespace mozilla {
 
 class AudioNodeTrack;
diff --git a/dom/media/webaudio/blink/Reverb.cpp b/dom/media/webaudio/blink/Reverb.cpp
index dfce966ca912..2880f6bbcb34 100644
--- a/dom/media/webaudio/blink/Reverb.cpp
+++ b/dom/media/webaudio/blink/Reverb.cpp
@@ -40,7 +40,7 @@ namespace WebCore {
 // Empirical gain calibration tested across many impulse responses to ensure
 // perceived volume is same as dry (unprocessed) signal
 const float GainCalibration = 0.00125f;
-const float GainCalibrationSampleRate = 44100;
+const float GainCalibrationSampleRate = 48000;
 
 // A minimum power value to when normalizing a silent (or very quiet) impulse
 // response
diff --git a/dom/media/webrtc/CubebDeviceEnumerator.cpp b/dom/media/webrtc/CubebDeviceEnumerator.cpp
index 33d9fb80c65a..93a3c849400b 100644
--- a/dom/media/webrtc/CubebDeviceEnumerator.cpp
+++ b/dom/media/webrtc/CubebDeviceEnumerator.cpp
@@ -273,7 +273,7 @@ RefPtr<const AudioDeviceSet> CubebDeviceEnumerator::EnumerateAudioDevices(
   RefPtr<AudioDeviceInfo> info = new AudioDeviceInfo(
       nullptr, name, u""_ns, u""_ns, type, CUBEB_DEVICE_STATE_ENABLED,
       CUBEB_DEVICE_PREF_ALL, CUBEB_DEVICE_FMT_ALL, CUBEB_DEVICE_FMT_S16NE,
-      channels, 44100, 44100, 44100, 441, 128);
+      channels, 48000, 48000, 48000, 480, 128);
   devices->AppendElement(std::move(info));
 #else
   RefPtr devices = GetDeviceCollection(
diff --git a/dom/workers/RuntimeService.cpp b/dom/workers/RuntimeService.cpp
index f528bec20afe..f55df85f53e9 100644
--- a/dom/workers/RuntimeService.cpp
+++ b/dom/workers/RuntimeService.cpp
@@ -1924,9 +1924,7 @@ uint32_t RuntimeService::ClampedHardwareConcurrency(
   // The Firefox Hardware Report says 70% of Firefox users have exactly 2 cores.
   // When the resistFingerprinting pref is set, we want to blend into the crowd
   // so spoof navigator.hardwareConcurrency = 2 to reduce user uniqueness.
-  if (MOZ_UNLIKELY(aShouldResistFingerprinting)) {
-    return 2;
-  }
+  // Seriously?
 
   // This needs to be atomic, because multiple workers, and even mainthread,
   // could race to initialize it at once.
@@ -1953,6 +1951,13 @@ uint32_t RuntimeService::ClampedHardwareConcurrency(
                                                            numberOfProcessors);
   }
 
+  if (MOZ_LIKELY(aShouldResistFingerprinting)) {
+    // https://store.steampowered.com/hwsurvey/
+    if (unclampedHardwareConcurrency <= 4) return 4;
+    if (unclampedHardwareConcurrency <= 8) return 8;
+    return 16;
+  }
+
   return std::min(uint32_t(unclampedHardwareConcurrency),
                   StaticPrefs::dom_maxHardwareConcurrency());
 }
diff --git a/dom/xml/resources/XMLPrettyPrint.css b/dom/xml/resources/XMLPrettyPrint.css
index 4e2088bd91d0..9ba1bded1b59 100644
--- a/dom/xml/resources/XMLPrettyPrint.css
+++ b/dom/xml/resources/XMLPrettyPrint.css
@@ -25,7 +25,7 @@
 
 #tree,
 .expandable-children {
-  margin-inline-start: 1em;
+  margin-inline-start: 2em;
 }
 
 .expandable-body {
@@ -52,6 +52,7 @@
   font: initial;
 }
 
+#tree,
 .comment {
   font-family: monospace;
   white-space: pre;
diff --git a/gfx/thebes/PrintTargetPDF.cpp b/gfx/thebes/PrintTargetPDF.cpp
index ce76eab42b9c..8db0a667f2a0 100644
--- a/gfx/thebes/PrintTargetPDF.cpp
+++ b/gfx/thebes/PrintTargetPDF.cpp
@@ -64,7 +64,7 @@ already_AddRefed<PrintTargetPDF> PrintTargetPDF::CreateOrNull(
   if (NS_SUCCEEDED(nsContentUtils::GetLocalizedString(
           nsContentUtils::eBRAND_PROPERTIES, "brandFullName", creatorName)) &&
       !creatorName.IsEmpty()) {
-    creatorName.Append(u" " MOZILLA_VERSION);
+    // creatorName.Append(u" " MOZILLA_VERSION);
     cairo_pdf_surface_set_metadata(surface, CAIRO_PDF_METADATA_CREATOR,
                                    NS_ConvertUTF16toUTF8(creatorName).get());
   }
diff --git a/gfx/thebes/PrintTargetSkPDF.cpp b/gfx/thebes/PrintTargetSkPDF.cpp
index 6a1cde8847b1..9b17802e87f5 100644
--- a/gfx/thebes/PrintTargetSkPDF.cpp
+++ b/gfx/thebes/PrintTargetSkPDF.cpp
@@ -44,7 +44,7 @@ nsresult PrintTargetSkPDF::BeginPrinting(const nsAString& aTitle,
 
   SkPDF::Metadata metadata;
   metadata.fTitle = NS_ConvertUTF16toUTF8(aTitle).get();
-  metadata.fCreator = "Firefox";
+  metadata.fCreator = "Snowfox";
   SkPDF::DateTime now = {0};
   SkPDFUtils::GetDateTime(&now);
   metadata.fCreation = now;
diff --git a/gfx/thebes/gfxWindowsPlatform.cpp b/gfx/thebes/gfxWindowsPlatform.cpp
index c0a645f19842..bfe9c4f3dd1f 100644
--- a/gfx/thebes/gfxWindowsPlatform.cpp
+++ b/gfx/thebes/gfxWindowsPlatform.cpp
@@ -1271,7 +1271,7 @@ void gfxWindowsPlatform::GetDLLVersion(char16ptr_t aDLLPath,
   DWORD versInfoSize, vers[4] = {0};
   // version info not available case
   aVersion.AssignLiteral(u"0.0.0.0");
-  versInfoSize = GetFileVersionInfoSizeW(aDLLPath, nullptr);
+  versInfoSize = GetFileVersionInfoSizeExW(0, aDLLPath, nullptr);
   AutoTArray<BYTE, 512> versionInfo;
 
   if (versInfoSize == 0) {
@@ -1282,8 +1282,8 @@ void gfxWindowsPlatform::GetDLLVersion(char16ptr_t aDLLPath,
   // pretended earlier.
   versionInfo.AppendElements(uint32_t(versInfoSize));
 
-  if (!GetFileVersionInfoW(aDLLPath, 0, versInfoSize,
-                           LPBYTE(versionInfo.Elements()))) {
+  if (!GetFileVersionInfoExW(0, aDLLPath, 0, versInfoSize,
+                             LPBYTE(versionInfo.Elements()))) {
     return;
   }
 
diff --git a/image/DecoderFactory.cpp b/image/DecoderFactory.cpp
index f36f03c7f262..d5eba465cf48 100644
--- a/image/DecoderFactory.cpp
+++ b/image/DecoderFactory.cpp
@@ -244,6 +244,9 @@ nsresult DecoderFactory::CreateAnimationDecoder(
   }
 
   MOZ_ASSERT(aType == DecoderType::GIF || aType == DecoderType::PNG ||
+#ifdef MOZ_JXL
+                 aType == DecoderType::JXL ||
+#endif
                  aType == DecoderType::WEBP || aType == DecoderType::AVIF,
              "Calling CreateAnimationDecoder for non-animating DecoderType");
 
@@ -299,6 +302,9 @@ already_AddRefed<Decoder> DecoderFactory::CloneAnimationDecoder(
   // rediscover it is animated).
   DecoderType type = aDecoder->GetType();
   MOZ_ASSERT(type == DecoderType::GIF || type == DecoderType::PNG ||
+#ifdef MOZ_JXL
+                 type == DecoderType::JXL ||
+#endif
                  type == DecoderType::WEBP || type == DecoderType::AVIF,
              "Calling CloneAnimationDecoder for non-animating DecoderType");
 
diff --git a/image/decoders/nsAVIFDecoder.cpp b/image/decoders/nsAVIFDecoder.cpp
index c11d47717ca5..f4e29379d814 100644
--- a/image/decoders/nsAVIFDecoder.cpp
+++ b/image/decoders/nsAVIFDecoder.cpp
@@ -18,6 +18,7 @@
 #include "SurfacePipeFactory.h"
 
 #include "mozilla/glean/GleanMetrics.h"
+#include "mozilla/StaticPrefs_image.h"
 #include "mozilla/Telemetry.h"
 #include "mozilla/UniquePtrExtensions.h"
 
@@ -1602,6 +1603,8 @@ nsAVIFDecoder::DecodeResult nsAVIFDecoder::DoDecodeInternal(
 
   if (mIsAnimated) {
     PostIsAnimated(parsedImage.mDuration);
+    if (MOZ_LIKELY(StaticPrefs::image_avif_force_loop()))
+      goto case_MP4PARSE_AVIF_LOOP_MODE_LOOP_INFINITELY;
 
     switch (mParser->GetInfo().loop_mode) {
       case MP4PARSE_AVIF_LOOP_MODE_LOOP_BY_COUNT: {
@@ -1611,6 +1614,7 @@ nsAVIFDecoder::DecodeResult nsAVIFDecoder::DoDecodeInternal(
         break;
       }
       case MP4PARSE_AVIF_LOOP_MODE_LOOP_INFINITELY:
+      case_MP4PARSE_AVIF_LOOP_MODE_LOOP_INFINITELY:
       case MP4PARSE_AVIF_LOOP_MODE_NO_EDITS:
       default:
         PostLoopCount(-1);
diff --git a/image/decoders/nsJXLDecoder.cpp b/image/decoders/nsJXLDecoder.cpp
index ffb7f3cd51e1..4afaf7f07491 100644
--- a/image/decoders/nsJXLDecoder.cpp
+++ b/image/decoders/nsJXLDecoder.cpp
@@ -45,9 +45,20 @@ nsJXLDecoder::nsJXLDecoder(RasterImage* aImage)
              Transition::TerminateSuccess()),
       mDecoder(JxlDecoderMake(nullptr)),
       mParallelRunner(
-          JxlThreadParallelRunnerMake(nullptr, PreferredThreadCount())) {
-  JxlDecoderSubscribeEvents(mDecoder.get(),
-                            JXL_DEC_BASIC_INFO | JXL_DEC_FULL_IMAGE);
+          JxlThreadParallelRunnerMake(nullptr, PreferredThreadCount())),
+      mUsePipeTransform(true),
+      mCMSLine(nullptr),
+      mNumFrames(0),
+      mTimeout(FrameTimeout::Forever()),
+      mSurfaceFormat(SurfaceFormat::OS_RGBX),
+      mContinue(false) {
+  int events = JXL_DEC_BASIC_INFO | JXL_DEC_FRAME | JXL_DEC_FULL_IMAGE;
+
+  if (mCMSMode != CMSMode::Off) {
+    events |= JXL_DEC_COLOR_ENCODING;
+  }
+
+  JxlDecoderSubscribeEvents(mDecoder.get(), events);
   JxlDecoderSetParallelRunner(mDecoder.get(), JxlThreadParallelRunner,
                               mParallelRunner.get());
 
@@ -58,6 +69,10 @@ nsJXLDecoder::nsJXLDecoder(RasterImage* aImage)
 nsJXLDecoder::~nsJXLDecoder() {
   MOZ_LOG(sJXLLog, LogLevel::Debug,
           ("[this=%p] nsJXLDecoder::~nsJXLDecoder", this));
+
+  if (mCMSLine) {
+    free(mCMSLine);
+  }
 }
 
 size_t nsJXLDecoder::PreferredThreadCount() {
@@ -86,14 +101,20 @@ LexerResult nsJXLDecoder::DoDecode(SourceBufferIterator& aIterator,
 
 LexerTransition<nsJXLDecoder::State> nsJXLDecoder::ReadJXLData(
     const char* aData, size_t aLength) {
-  const uint8_t* input = (const uint8_t*)aData;
-  size_t length = aLength;
-  if (mBuffer.length() != 0) {
-    JXL_TRY_BOOL(mBuffer.append(aData, aLength));
-    input = mBuffer.begin();
-    length = mBuffer.length();
+  // Ignore data we have already read.
+  // This will only occur as a result of a yield for animation.
+  if (!mContinue) {
+    const uint8_t* input = (const uint8_t*)aData;
+    size_t length = aLength;
+    if (mBuffer.length() != 0) {
+      JXL_TRY_BOOL(mBuffer.append(aData, aLength));
+      input = mBuffer.begin();
+      length = mBuffer.length();
+    }
+
+    JXL_TRY(JxlDecoderSetInput(mDecoder.get(), input, length));
   }
-  JXL_TRY(JxlDecoderSetInput(mDecoder.get(), input, length));
+  mContinue = false;
 
   while (true) {
     JxlDecoderStatus status = JxlDecoderProcessInput(mDecoder.get());
@@ -106,6 +127,34 @@ LexerTransition<nsJXLDecoder::State> nsJXLDecoder::ReadJXLData(
         size_t remaining = JxlDecoderReleaseInput(mDecoder.get());
         mBuffer.clear();
         JXL_TRY_BOOL(mBuffer.append(aData + aLength - remaining, remaining));
+
+        if (mNumFrames == 0 && InFrame()) {
+          // If an image was flushed by JxlDecoderFlushImage, then we know that
+          // JXL_DEC_FRAME has already been run and there is a pipe.
+          if (JxlDecoderFlushImage(mDecoder.get()) == JXL_DEC_SUCCESS) {
+            // A full frame partial image is written to the buffer.
+            mPipe.ResetToFirstRow();
+            for (uint8_t* rowPtr = mOutBuffer.begin();
+                 rowPtr < mOutBuffer.end(); rowPtr += mInfo.xsize * mChannels) {
+              uint8_t* rowToWrite = rowPtr;
+
+              if (!mUsePipeTransform && mTransform) {
+                qcms_transform_data(mTransform, rowToWrite, mCMSLine,
+                                    mInfo.xsize);
+                rowToWrite = mCMSLine;
+              }
+
+              mPipe.WriteBuffer(reinterpret_cast<uint32_t*>(rowToWrite));
+            }
+
+            if (Maybe<SurfaceInvalidRect> invalidRect =
+                    mPipe.TakeInvalidRect()) {
+              PostInvalidation(invalidRect->mInputSpaceRect,
+                               Some(invalidRect->mOutputSpaceRect));
+            }
+          }
+        }
+
         return Transition::ContinueUnbuffered(State::JXL_DATA);
       }
 
@@ -115,42 +164,192 @@ LexerTransition<nsJXLDecoder::State> nsJXLDecoder::ReadJXLData(
         if (WantsFrameCount()) {
           PostFrameCount(/* aFrameCount */ 1);
         }
+
         if (mInfo.alpha_bits > 0) {
+          mSurfaceFormat = SurfaceFormat::OS_RGBA;
           PostHasTransparency();
         }
+
+        if (!mInfo.have_animation && IsMetadataDecode()) {
+          return Transition::TerminateSuccess();
+        }
+
+        // If CMS is off or the image is RGB, always output in RGBA.
+        // If the image is grayscale, then the pipe transform can't be used.
+        if (mCMSMode != CMSMode::Off) {
+          mChannels = mInfo.num_color_channels == 1
+                          ? 1 + (mInfo.alpha_bits > 0 ? 1 : 0)
+                          : 4;
+        } else {
+          mChannels = 4;
+        }
+
+        mFormat = {mChannels, JXL_TYPE_UINT8, JXL_LITTLE_ENDIAN, 0};
+
+        break;
+      }
+
+      case JXL_DEC_COLOR_ENCODING: {
+        size_t size = 0;
+        JXL_TRY(JxlDecoderGetICCProfileSize(
+            mDecoder.get(), JXL_COLOR_PROFILE_TARGET_DATA, &size))
+        std::vector<uint8_t> icc_profile(size);
+        JXL_TRY(JxlDecoderGetColorAsICCProfile(mDecoder.get(),
+                                               JXL_COLOR_PROFILE_TARGET_DATA,
+                                               icc_profile.data(), size))
+
+        mInProfile = qcms_profile_from_memory((char*)icc_profile.data(), size);
+
+        uint32_t profileSpace = qcms_profile_get_color_space(mInProfile);
+
+        // Skip color management if color profile is not compatible with number
+        // of channels.
+        if (profileSpace != icSigRgbData &&
+            (mInfo.num_color_channels == 3 || profileSpace != icSigGrayData)) {
+          break;
+        }
+
+        mUsePipeTransform =
+            profileSpace == icSigRgbData && mInfo.num_color_channels == 3;
+
+        qcms_data_type inType;
+        if (mInfo.num_color_channels == 3) {
+          inType = QCMS_DATA_RGBA_8;
+        } else if (mInfo.alpha_bits > 0) {
+          inType = QCMS_DATA_GRAYA_8;
+        } else {
+          inType = QCMS_DATA_GRAY_8;
+        }
+
+        if (!mUsePipeTransform) {
+          mCMSLine =
+              static_cast<uint8_t*>(malloc(sizeof(uint32_t) * mInfo.xsize));
+        }
+
+        int intent = gfxPlatform::GetRenderingIntent();
+        if (intent == -1) {
+          intent = qcms_profile_get_rendering_intent(mInProfile);
+        }
+
+        mTransform =
+            qcms_transform_create(mInProfile, inType, GetCMSOutputProfile(),
+                                  QCMS_DATA_RGBA_8, (qcms_intent)intent);
+
+        break;
+      }
+
+      case JXL_DEC_FRAME: {
+        if (mInfo.have_animation) {
+          JXL_TRY(JxlDecoderGetFrameHeader(mDecoder.get(), &mFrameHeader));
+          int32_t duration = (int32_t)(1000.0 * mFrameHeader.duration *
+                                       mInfo.animation.tps_denominator /
+                                       mInfo.animation.tps_numerator);
+
+          mTimeout = FrameTimeout::FromRawMilliseconds(duration);
+
+          if (!HasAnimation()) {
+            PostIsAnimated(mTimeout);
+          }
+        }
+
+        bool is_last = mInfo.have_animation ? mFrameHeader.is_last : true;
+        MOZ_LOG(sJXLLog, LogLevel::Debug,
+                ("[this=%p] nsJXLDecoder::ReadJXLData - frame %d, is_last %d, "
+                 "metadata decode %d, first frame decode %d\n",
+                 this, mNumFrames, is_last, IsMetadataDecode(),
+                 IsFirstFrameDecode()));
+
         if (IsMetadataDecode()) {
           return Transition::TerminateSuccess();
         }
+
+        OrientedIntSize size(mInfo.xsize, mInfo.ysize);
+
+        Maybe<AnimationParams> animParams;
+        if (!IsFirstFrameDecode()) {
+          animParams.emplace(FullFrame().ToUnknownRect(), mTimeout, mNumFrames,
+                             BlendMethod::SOURCE, DisposalMethod::CLEAR);
+        }
+
+        SurfacePipeFlags pipeFlags = SurfacePipeFlags();
+
+        if (mNumFrames == 0) {
+          // The first frame may be displayed progressively.
+          pipeFlags |= SurfacePipeFlags::PROGRESSIVE_DISPLAY;
+        }
+
+        if (mSurfaceFormat == SurfaceFormat::OS_RGBA &&
+            !(GetSurfaceFlags() & SurfaceFlags::NO_PREMULTIPLY_ALPHA)) {
+          pipeFlags |= SurfacePipeFlags::PREMULTIPLY_ALPHA;
+        }
+
+        qcms_transform* pipeTransform =
+            mUsePipeTransform ? mTransform : nullptr;
+
+        Maybe<SurfacePipe> pipe = SurfacePipeFactory::CreateSurfacePipe(
+            this, size, OutputSize(), FullFrame(), SurfaceFormat::R8G8B8A8,
+            mSurfaceFormat, animParams, pipeTransform, pipeFlags);
+
+        if (!pipe) {
+          MOZ_LOG(sJXLLog, LogLevel::Debug,
+                  ("[this=%p] nsJXLDecoder::ReadJXLData - no pipe\n", this));
+          return Transition::TerminateFailure();
+        }
+
+        mPipe = std::move(*pipe);
+
         break;
       }
 
       case JXL_DEC_NEED_IMAGE_OUT_BUFFER: {
         size_t size = 0;
-        JxlPixelFormat format{4, JXL_TYPE_UINT8, JXL_LITTLE_ENDIAN, 0};
-        JXL_TRY(JxlDecoderImageOutBufferSize(mDecoder.get(), &format, &size));
+        JXL_TRY(JxlDecoderImageOutBufferSize(mDecoder.get(), &mFormat, &size));
 
         mOutBuffer.clear();
         JXL_TRY_BOOL(mOutBuffer.growBy(size));
-        JXL_TRY(JxlDecoderSetImageOutBuffer(mDecoder.get(), &format,
+        JXL_TRY(JxlDecoderSetImageOutBuffer(mDecoder.get(), &mFormat,
                                             mOutBuffer.begin(), size));
         break;
       }
 
       case JXL_DEC_FULL_IMAGE: {
-        OrientedIntSize size(mInfo.xsize, mInfo.ysize);
-        Maybe<SurfacePipe> pipe = SurfacePipeFactory::CreateSurfacePipe(
-            this, size, OutputSize(), FullFrame(), SurfaceFormat::R8G8B8A8,
-            SurfaceFormat::OS_RGBA, Nothing(), nullptr, SurfacePipeFlags());
+        mPipe.ResetToFirstRow();
         for (uint8_t* rowPtr = mOutBuffer.begin(); rowPtr < mOutBuffer.end();
-             rowPtr += mInfo.xsize * 4) {
-          pipe->WriteBuffer(reinterpret_cast<uint32_t*>(rowPtr));
+             rowPtr += mInfo.xsize * mChannels) {
+          uint8_t* rowToWrite = rowPtr;
+
+          if (!mUsePipeTransform && mTransform) {
+            qcms_transform_data(mTransform, rowToWrite, mCMSLine, mInfo.xsize);
+            rowToWrite = mCMSLine;
+          }
+
+          mPipe.WriteBuffer(reinterpret_cast<uint32_t*>(rowToWrite));
         }
 
-        if (Maybe<SurfaceInvalidRect> invalidRect = pipe->TakeInvalidRect()) {
+        if (Maybe<SurfaceInvalidRect> invalidRect = mPipe.TakeInvalidRect()) {
           PostInvalidation(invalidRect->mInputSpaceRect,
                            Some(invalidRect->mOutputSpaceRect));
         }
-        PostFrameStop();
+
+        Opacity opacity = mSurfaceFormat == SurfaceFormat::OS_RGBA
+                              ? Opacity::SOME_TRANSPARENCY
+                              : Opacity::FULLY_OPAQUE;
+        PostFrameStop(opacity);
+
+        if (!IsFirstFrameDecode() && mInfo.have_animation &&
+            !mFrameHeader.is_last) {
+          mNumFrames++;
+          mContinue = true;
+          // Notify for a new frame but there may be data in the current buffer
+          // that can immediately be processed.
+          return Transition::ToAfterYield(State::JXL_DATA);
+        }
+        [[fallthrough]];  // We are done.
+      }
+
+      case JXL_DEC_SUCCESS: {
+        int32_t loopCount = HasAnimation() ? mInfo.animation.num_loops - 1 : 0;
+        PostLoopCount(std::max(loopCount, -1));
         PostDecodeDone();
         return Transition::TerminateSuccess();
       }
diff --git a/image/decoders/nsJXLDecoder.h b/image/decoders/nsJXLDecoder.h
index 6cde7456ca03..6dc162f9397b 100644
--- a/image/decoders/nsJXLDecoder.h
+++ b/image/decoders/nsJXLDecoder.h
@@ -47,7 +47,19 @@ class nsJXLDecoder final : public Decoder {
   JxlThreadParallelRunnerPtr mParallelRunner;
   Vector<uint8_t> mBuffer;
   Vector<uint8_t> mOutBuffer;
-  JxlBasicInfo mInfo{};
+  JxlBasicInfo mInfo;
+  JxlPixelFormat mFormat;
+  JxlFrameHeader mFrameHeader;
+
+  bool mUsePipeTransform;
+  uint8_t mChannels;
+  uint8_t* mCMSLine;
+
+  uint32_t mNumFrames;
+  FrameTimeout mTimeout;
+  gfx::SurfaceFormat mSurfaceFormat;
+  SurfacePipe mPipe;
+  bool mContinue;
 };
 
 }  // namespace mozilla::image
diff --git a/image/imgFrame.cpp b/image/imgFrame.cpp
index 95f23479df9a..5e01744dafb1 100644
--- a/image/imgFrame.cpp
+++ b/image/imgFrame.cpp
@@ -23,6 +23,7 @@
 #include "mozilla/MemoryReporting.h"
 #include "mozilla/ProfilerLabels.h"
 #include "mozilla/StaticPrefs_browser.h"
+#include "mozilla/StaticPrefs_image.h"
 #include "nsMargin.h"
 #include "nsRefreshDriver.h"
 #include "nsThreadUtils.h"
@@ -107,11 +108,12 @@ static bool ClearSurface(SourceSurfaceSharedData* aSurface,
   MOZ_ASSERT(data);
 
   if (aFormat == SurfaceFormat::OS_RGBX) {
+    const auto x = StaticPrefs::image_rgbx_mode() > 0 ? 0xFF : 0x00;
     // Skia doesn't support RGBX surfaces, so ensure the alpha value is set
-    // to opaque white. While it would be nice to only do this for Skia,
+    // to opaque b / w. While it would be nice to only do this for Skia,
     // imgFrame can run off main thread and past shutdown where
     // we might not have gfxPlatform, so just memset every time instead.
-    memset(data, 0xFF, stride * aSize.height);
+    memset(data, x, stride * aSize.height);
   } else if (aSurface->OnHeap()) {
     // We only need to memset it if the buffer was allocated on the heap.
     // Otherwise, it's allocated via mmap and refers to a zeroed page and will
diff --git a/intl/components/src/Calendar.cpp b/intl/components/src/Calendar.cpp
index d44dedaaae4e..c7af6f363af7 100644
--- a/intl/components/src/Calendar.cpp
+++ b/intl/components/src/Calendar.cpp
@@ -108,9 +108,7 @@ Weekday Calendar::GetFirstDayOfWeek() {
 }
 
 int32_t Calendar::GetMinimalDaysInFirstWeek() {
-  int32_t minimalDays =
-      ucal_getAttribute(mCalendar, UCAL_MINIMAL_DAYS_IN_FIRST_WEEK);
-  MOZ_ASSERT(1 <= minimalDays && minimalDays <= 7);
+  int32_t minimalDays = 1;
 
   return minimalDays;
 }
diff --git a/js/src/octane/gbemu-part1.js b/js/src/octane/gbemu-part1.js
index 10f19e4a195f..38d372b9ae81 100644
--- a/js/src/octane/gbemu-part1.js
+++ b/js/src/octane/gbemu-part1.js
@@ -197,7 +197,7 @@ function resetGlobalVariables () {
   resampled = [];
   webAudioMinBufferSize = 15000;
   webAudioMaxBufferSize = 25000;
-  webAudioActualSampleRate = 44100;
+  webAudioActualSampleRate = 48000;
   XAudioJSSampleRate = 0;
   webAudioMono = false;
   XAudioJSVolume = 1;
@@ -488,7 +488,7 @@ Resampler.prototype.initializeBuffers = function () {
 function XAudioServer(channels, sampleRate, minBufferSize, maxBufferSize, underRunCallback, volume) {
   this.audioChannels = (channels == 2) ? 2 : 1;
   webAudioMono = (this.audioChannels == 1);
-  XAudioJSSampleRate = (sampleRate > 0 && sampleRate <= 0xFFFFFF) ? sampleRate : 44100;
+  XAudioJSSampleRate = (sampleRate > 0 && sampleRate <= 0xFFFFFF) ? sampleRate : 48000;
   webAudioMinBufferSize = (minBufferSize >= (samplesPerCallback << 1) && minBufferSize < maxBufferSize) ? (minBufferSize & ((webAudioMono) ? 0xFFFFFFFF : 0xFFFFFFFE)) : (samplesPerCallback << 1);
   webAudioMaxBufferSize = (Math.floor(maxBufferSize) > webAudioMinBufferSize + this.audioChannels) ? (maxBufferSize & ((webAudioMono) ? 0xFFFFFFFF : 0xFFFFFFFE)) : (minBufferSize << 1);
   this.underRunCallback = (typeof underRunCallback == "function") ? underRunCallback : function () {};
@@ -753,7 +753,7 @@ XAudioServer.prototype.checkFlashInit = function () {
   if (!this.flashInitialized && this.audioHandleFlash && this.audioHandleFlash.initialize) {
     this.flashInitialized = true;
     this.audioHandleFlash.initialize(this.audioChannels, XAudioJSVolume);
-    resetCallbackAPIAudioBuffer(44100, samplesPerCallback);
+    resetCallbackAPIAudioBuffer(48000, samplesPerCallback);
   }
   return this.flashInitialized;
 }
@@ -819,7 +819,7 @@ var audioContextSampleBuffer = [];
 var resampled = [];
 var webAudioMinBufferSize = 15000;
 var webAudioMaxBufferSize = 25000;
-var webAudioActualSampleRate = 44100;
+var webAudioActualSampleRate = 48000;
 var XAudioJSSampleRate = 0;
 var webAudioMono = false;
 var XAudioJSVolume = 1;
diff --git a/js/src/octane/mandreel.js b/js/src/octane/mandreel.js
index 82ebd23d36ca..f7af05540265 100644
--- a/js/src/octane/mandreel.js
+++ b/js/src/octane/mandreel.js
@@ -8144,7 +8144,7 @@ function Mandreel_Audio_CreateStream(sp)
 		else
 		{
 			mandreel_audio_stream_func_ptr = heap32[sp>>2];
-			AudioDataDestination(44100,mandreel_Audio_requestSoundData);
+			AudioDataDestination(48000,mandreel_Audio_requestSoundData);
 		}
 		__Mandreel_Audio_CreateStream_created = true;
 	}
diff --git a/layout/style/TopLevelImageDocument.css b/layout/style/TopLevelImageDocument.css
index f03295f67374..47f336d9182d 100644
--- a/layout/style/TopLevelImageDocument.css
+++ b/layout/style/TopLevelImageDocument.css
@@ -14,15 +14,14 @@
        backgrounds. This is important in case this ImageDocument is for an
        image that happens to be corrupt, in which case we'll display a textual
        error message over the background, instead of the image itself. */
+    color-scheme: dark only;
     color: #eee;
-    /* The background-attachment is fixed to stop an ugly white gutter
-       from appearing when the document is overscrolled. */
-    background: url("chrome://global/skin/media/imagedoc-darknoise.png") fixed;
   }
 
   img.transparent {
-    color: #222;
-    background: hsl(0,0%,90%) url("chrome://global/skin/media/imagedoc-lightnoise.png");
+    /* The background-attachment is fixed to stop an ugly white gutter
+       from appearing when the document is overscrolled. */
+    background: url("chrome://global/skin/media/imagedoc-darknoise.png") fixed;
   }
 
   img {
diff --git a/layout/style/res/ua.css b/layout/style/res/ua.css
index f526ca8255a9..5d6ce39c84d8 100644
--- a/layout/style/res/ua.css
+++ b/layout/style/res/ua.css
@@ -394,6 +394,23 @@
  * inherits from) depend on the root element's style, as that
  * is trivially cyclic.
  */
+
+/* Fix color-scheme for empty/blank/unstyled pages */
+:root:where(html:has(body:-moz-only-whitespace)),
+:root:where(html:not(:has(body > :not(:is([hidden],
+          [style*="display:none"i], [style*="display: none"i],
+          noscript, script, :-moz-only-whitespace))))),
+:root:where(html:not(:has(:is(body:is([style],
+          [alink], [background], [bgcolor], [link], [text], [vlink]),
+        body > link[rel="stylesheet"i],
+        head > link[rel="stylesheet"i],
+        head > meta[name="color-scheme"i],
+        head > style:not(:-moz-only-whitespace))))),
+/* Fix color-scheme for transparent iframe(s) */
+:root:where(html) :where(iframe) {
+  color-scheme: dark light;
+}
+
 :root {
   color: CanvasText;
 }
diff --git a/mach b/mach
index 5ea05fb643c0..fbdca0fe4def 100755
--- a/mach
+++ b/mach
@@ -1,4 +1,4 @@
-#!/usr/bin/env python3
+#!/usr/bin/env python3.11
 # This Source Code Form is subject to the terms of the Mozilla Public
 # License, v. 2.0. If a copy of the MPL was not distributed with this
 # file, You can obtain one at http://mozilla.org/MPL/2.0/.
diff --git a/media/libcubeb/src/cubeb_alsa.c b/media/libcubeb/src/cubeb_alsa.c
index f114f27d7bee..e46d5baf3d80 100644
--- a/media/libcubeb/src/cubeb_alsa.c
+++ b/media/libcubeb/src/cubeb_alsa.c
@@ -1194,7 +1194,7 @@ alsa_get_max_channel_count(cubeb * ctx, uint32_t * max_channels)
   cubeb_stream * stm;
   snd_pcm_hw_params_t * hw_params;
   cubeb_stream_params params;
-  params.rate = 44100;
+  params.rate = 48000;
   params.format = CUBEB_SAMPLE_FLOAT32NE;
   params.channels = 2;
 
@@ -1257,7 +1257,7 @@ alsa_get_preferred_sample_rate(cubeb * ctx, uint32_t * rate)
   }
 
   /* Use a common rate, alsa may adjust it based on hw/etc. capabilities. */
-  *rate = 44100;
+  *rate = 48000;
 
   r = WRAP(snd_pcm_hw_params_set_rate_near)(pcm, hw_params, rate, NULL);
   if (r < 0) {
diff --git a/media/libcubeb/src/cubeb_winmm.c b/media/libcubeb/src/cubeb_winmm.c
index b2234a9b52ac..d2c91cad0587 100644
--- a/media/libcubeb/src/cubeb_winmm.c
+++ b/media/libcubeb/src/cubeb_winmm.c
@@ -692,14 +692,14 @@ winmm_get_preferred_sample_rate(cubeb * ctx, uint32_t * rate)
     return CUBEB_ERROR;
   }
 
-  /* Check if we support 48kHz, but not 44.1kHz. */
-  if (!(woc.dwFormats & WAVE_FORMAT_4S16) &&
-      woc.dwFormats & WAVE_FORMAT_48S16) {
-    *rate = 48000;
+  /* Check if we support not 48kHz, but 44.1kHz. */
+  if (!(woc.dwFormats & WAVE_FORMAT_48S16) &&
+      woc.dwFormats & WAVE_FORMAT_4S16) {
+    *rate = 44100;
     return CUBEB_OK;
   }
-  /* Prefer 44.1kHz between 44.1kHz and 48kHz. */
-  *rate = 44100;
+  /* Prefer 48kHz between 44.1kHz and 48kHz. */
+  *rate = 48000;
 
   return CUBEB_OK;
 }
@@ -921,7 +921,7 @@ winmm_query_supported_formats(UINT devid, DWORD formats,
   ZeroMemory(&wfx, sizeof(WAVEFORMATEXTENSIBLE));
   wfx.Format.wFormatTag = WAVE_FORMAT_EXTENSIBLE;
   wfx.Format.nChannels = 2;
-  wfx.Format.nSamplesPerSec = 44100;
+  wfx.Format.nSamplesPerSec = 48000;
   wfx.Format.wBitsPerSample = 32;
   wfx.Format.nBlockAlign =
       (wfx.Format.wBitsPerSample * wfx.Format.nChannels) / 8;
diff --git a/media/libsoundtouch/src/TDStretch.cpp b/media/libsoundtouch/src/TDStretch.cpp
index 709e979d1d0a..b0bd1d343e2d 100644
--- a/media/libsoundtouch/src/TDStretch.cpp
+++ b/media/libsoundtouch/src/TDStretch.cpp
@@ -93,7 +93,7 @@ TDStretch::TDStretch() : FIFOProcessor(&outputBuffer)
     bAutoSeekSetting = true;
 
     tempo = 1.0f;
-    setParameters(44100, DEFAULT_SEQUENCE_MS, DEFAULT_SEEKWINDOW_MS, DEFAULT_OVERLAP_MS);
+    setParameters(48000, DEFAULT_SEQUENCE_MS, DEFAULT_SEEKWINDOW_MS, DEFAULT_OVERLAP_MS);
     setTempo(1.0f);
 
     clear();
diff --git a/media/libvorbis/lib/vorbis_envelope.c b/media/libvorbis/lib/vorbis_envelope.c
index 22d39aa6e0bb..6d2a7a58bda0 100644
--- a/media/libvorbis/lib/vorbis_envelope.c
+++ b/media/libvorbis/lib/vorbis_envelope.c
@@ -283,8 +283,8 @@ long _ve_envelope_search(vorbis_dsp_state *v){
             memset(marker,0,sizeof(*marker)*v->pcm_current);
             fprintf(stderr,"mark! seq=%d, cursor:%fs time:%fs\n",
                     seq,
-                    (totalshift+ve->cursor)/44100.,
-                    (totalshift+j)/44100.);
+                    (totalshift+ve->cursor)/48000.,
+                    (totalshift+j)/48000.);
             _analysis_output_always("pcmL",seq,v->pcm[0],v->pcm_current,0,0,totalshift);
             _analysis_output_always("pcmR",seq,v->pcm[1],v->pcm_current,0,0,totalshift);
 
diff --git a/modules/libpref/init/StaticPrefList.yaml b/modules/libpref/init/StaticPrefList.yaml
index a3a2e01df3c8..c4688335e2b0 100644
--- a/modules/libpref/init/StaticPrefList.yaml
+++ b/modules/libpref/init/StaticPrefList.yaml
@@ -1479,7 +1479,7 @@
 
 - name: browser.dom.window.dump.enabled
   type: RelaxedAtomicBool
-  value: @IS_NOT_MOZILLA_OFFICIAL@
+  value: false
   mirror: always
 
 # See bug 1738574
@@ -1555,7 +1555,7 @@
 #
 - name: browser.history.maxUrlLength
   type: uint32_t
-  value: 2000
+  value: 2048
   mirror: always
 
 # Max size of push/replaceState data parameter
@@ -1585,17 +1585,18 @@
   # this value.
 -   name: browser.low_commit_space_threshold_mb
     type: RelaxedAtomicUint32
-    value: 200
+    value: 8192
     mirror: always
 #endif
 
-#ifdef XP_LINUX
+#if defined(XP_WIN) || defined(XP_LINUX)
   # On Linux we also check available memory in comparison to total memory,
   # and use this percent value (out of 100) to determine if we are in a
   # low memory scenario.
+  # On Windows we check available physical memory instead.
 -   name: browser.low_commit_space_threshold_percent
     type: RelaxedAtomicUint32
-    value: 5
+    value: 50
     mirror: always
 #endif
 
@@ -1658,7 +1659,7 @@
 # theming code overrides it if appropriate.
 - name: browser.theme.toolbar-theme
   type: RelaxedAtomicUint32
-  value: 2
+  value: 0
   mirror: always
 
 # Communicates the preferred content theme color to platform (for e.g.,
@@ -2252,7 +2253,7 @@
 
 - name: devtools.console.stdout.chrome
   type: RelaxedAtomicBool
-  value: @IS_NOT_MOZILLA_OFFICIAL@
+  value: false
   mirror: always
 
 - name: devtools.console.stdout.content
@@ -3420,7 +3421,7 @@
 # Whether origin trials are enabled.
 - name: dom.origin-trials.enabled
   type: bool
-  value: true
+  value: false
   mirror: always
 
 # Whether we use the test key to verify tokens.
@@ -3458,7 +3459,7 @@
 # information should be collected / submitted.
 - name: dom.private-attribution.submission.enabled
   type: bool
-  value: @IS_NOT_ANDROID@
+  value: false
   mirror: always
 
 # Is support for Window.paintWorklet enabled?
@@ -3891,7 +3892,7 @@
 #      at the same time as the top-level of a file.
 - name: dom.script_loader.delazification.strategy
   type: uint32_t
-  value: 255
+  value: 3
   mirror: always
 
 # Maximum total size after which the delazification strategy, specified by
@@ -4016,7 +4017,7 @@
 # (some Firefox functionality requests, like OCSP will not be affected)
 - name: dom.security.https_only_mode
   type: RelaxedAtomicBool
-  value: false
+  value: true
   mirror: always
 
 # If true, all content requests in Private Browsing Mode will get
@@ -4024,14 +4025,14 @@
 # to true then this pref has no effect)
 - name: dom.security.https_only_mode_pbm
   type: RelaxedAtomicBool
-  value: false
+  value: true
   mirror: always
 
 # If true, sends http background request for top-level sites to
 # counter long timeouts.
 - name: dom.security.https_only_mode_send_http_background_request
   type: RelaxedAtomicBool
-  value: true
+  value: false
   mirror: always
 
 # Time limit, in milliseconds, before sending the http background
@@ -4052,14 +4053,14 @@
 # to local IP addresses are also upgraded
 - name: dom.security.https_only_mode.upgrade_local
   type: RelaxedAtomicBool
-  value: false
+  value: true
   mirror: always
 
 # If true and HTTPS-only mode is enabled, requests
 # to .onion hosts are also upgraded
 - name: dom.security.https_only_mode.upgrade_onion
   type: RelaxedAtomicBool
-  value: false
+  value: true
   mirror: always
 
 # WARNING: Don't ever update that pref manually! It is only used
@@ -4067,7 +4068,7 @@
 # the pref dom.security.https_only_mode from above.
 - name: dom.security.https_only_mode_ever_enabled
   type: RelaxedAtomicBool
-  value: false
+  value: true
   mirror: always
 
 # WARNING: Don't ever update that pref manually! It is only used
@@ -4075,21 +4076,21 @@
 # the pref dom.security.https_only_mode_pbm from above.
 - name: dom.security.https_only_mode_ever_enabled_pbm
   type: RelaxedAtomicBool
-  value: false
+  value: true
   mirror: always
 
 # If true checks for secure www connections when https fails
 # and gives the user suggestions on the error page
 - name: dom.security.https_only_mode_error_page_user_suggestions
   type: RelaxedAtomicBool
-  value: false
+  value: true
   mirror: always
 
 # If true, top-level request will get upgraded to HTTPS and
 # downgraded again if the request failed.
 - name: dom.security.https_first
   type: RelaxedAtomicBool
-  value: @IS_EARLY_BETA_OR_EARLIER@
+  value: true
   mirror: always
 
 # If true, HTTPS-First will upgrade non-default ports
@@ -4128,7 +4129,7 @@
 
 - name: dom.security.unexpected_system_load_telemetry_enabled
   type: bool
-  value: true
+  value: false
   mirror: always
 
 # pref controls `Sanitizer` API being exposed
@@ -4241,7 +4242,7 @@
 
 - name: dom.serviceWorkers.enabled
   type: RelaxedAtomicBool
-  value: true
+  value: false
   mirror: always
 
 - name: dom.serviceWorkers.navigationPreload.enabled
@@ -5347,10 +5348,10 @@
 # (if feasible). This mimics native behaviour on MacOS.
 - name: editor.word_select.delete_space_after_doubleclick_selection
   type: bool
-#ifdef XP_MACOSX
+#ifndef XP_MACOSX
   value: true
 #else
-  value: false
+  value: true
 #endif
   mirror: always
 
@@ -7741,7 +7742,7 @@
 # 2 = Strict: reject violations of "should" specification directives
 - name: image.avif.compliance_strictness
   type: RelaxedAtomicInt32
-  value: 1
+  value: 0
   mirror: always
 
 # Whether we apply container-level transforms like mirroring and rotation
@@ -7766,13 +7767,25 @@
 # major brand is set to 'avif'.
 - name: image.avif.sequence.animate_avif_major_branded_images
   type: RelaxedAtomicBool
-  value: false
+  value: true
+  mirror: always
+
+# Whether to always loop animated AVIF sequences.
+- name: image.avif.force-loop
+  type: RelaxedAtomicBool
+  value: true
   mirror: always
 
 # Whether we attempt to decode JXL images or not.
 - name: image.jxl.enabled
   type: RelaxedAtomicBool
-  value: false
+  value: true
+  mirror: always
+
+# 0 = black, 1 = white.
+- name: image.rgbx-mode
+  type: RelaxedAtomicInt32
+  value: 0
   mirror: always
 
 #---------------------------------------------------------------------------
@@ -8156,7 +8169,7 @@
 # Use better error message when accessing property of null or undefined.
 - name: javascript.options.property_error_message_fix
   type: bool
-  value: @IS_NIGHTLY_OR_DEV_EDITION@
+  value: true
   mirror: always
   set_spidermonkey_pref: startup
 
@@ -9422,7 +9435,7 @@
 #   3 - also user-installed fonts
 - name: layout.css.font-visibility
   type: int32_t
-  value: 3
+  value: 1
   mirror: always
 
 # Is support for GeometryUtils.getBoxQuads enabled?
@@ -10283,7 +10296,7 @@
 - name: layout.word_select.eat_space_to_next_word
   type: bool
 #ifdef XP_WIN
-  value: true
+  value: false
 #else
   value: false
 #endif
@@ -10411,16 +10424,16 @@
 
 
 # This pref defines what the blocking policy would be used in blocking autoplay.
-# 0 : use sticky activation (default)
+# 0 : use sticky activation
 # https://html.spec.whatwg.org/multipage/interaction.html#sticky-activation
 # 1 : use transient activation (the transient activation duration can be
 #     adjusted by the pref `dom.user_activation.transient.timeout`)
 # https://html.spec.whatwg.org/multipage/interaction.html#transient-activation
 # 2 : user input depth (allow autoplay when the play is trigged by user input
-#     which is determined by the user input depth)
+#     which is determined by the user input depth) (default)
 - name: media.autoplay.blocking_policy
   type: uint32_t
-  value: 0
+  value: 2
   mirror: always
 
 # Whether to allow autoplay on extension background pages.
@@ -10433,7 +10446,7 @@
 # 0=Allowed, 1=Blocked, 5=All Blocked
 - name: media.autoplay.default
   type: int32_t
-  value: 1
+  value: 5
   mirror: always
 
 # File-backed MediaCache size.
@@ -11633,7 +11646,7 @@
 
 - name: media.autoplay.block-event.enabled
   type: bool
-  value: false
+  value: true
   mirror: always
 
 - name: media.media-capabilities.screen.enabled
@@ -12464,7 +12477,7 @@
 # See the full list of values in nsICookieService.idl.
 - name: network.cookie.cookieBehavior
   type: RelaxedAtomicInt32
-  value: 0 # accept all cookies
+  value: 5 # reject cookies for known trackers and partition third-party cookies
   mirror: always
 
 # Maximum client-side cookie life-time cap. Measured in seconds, set to 0 to
@@ -12477,7 +12490,7 @@
 # The cookieBehavior to be used in Private Browsing mode.
 - name: network.cookie.cookieBehavior.pbmode
   type: RelaxedAtomicInt32
-  value: 0 # accept all cookies
+  value: 5 # reject cookies for known trackers and partition third-party cookies
   mirror: always
 
 # Changes cookieBehavior=5 to block third-party cookies by default
@@ -13828,7 +13841,7 @@
 # The timeout of the TRR confirmation request
 - name: network.trr.confirmation_telemetry_enabled
   type: RelaxedAtomicBool
-  value: true
+  value: false
   mirror: always
 
 # Whether to send the Accept-Language header for TRR requests
@@ -15114,13 +15127,13 @@
 # 2 - spoof
 - name: privacy.spoof_english
   type: RelaxedAtomicUint32
-  value: 0
+  value: 2
   mirror: always
 
-# Send "do not track" HTTP header, disabled by default.
+# Send "do not track" HTTP header, enabled by default.
 - name: privacy.donottrackheader.enabled
   type: bool
-  value: false
+  value: true
   mirror: always
 
 # Potentially send "global privacy control" HTTP header and set navigator
@@ -15202,13 +15215,13 @@
 # designed to minimize breakage while maximizing protection.
 - name: privacy.fingerprintingProtection
   type: RelaxedAtomicBool
-  value: false
+  value: true
   mirror: always
   do_not_use_directly: true
 
 - name: privacy.fingerprintingProtection.pbmode
   type: RelaxedAtomicBool
-  value: false
+  value: true
   mirror: always
   do_not_use_directly: true
 
@@ -15216,7 +15229,7 @@
 # of FPP overrides
 - name: privacy.fingerprintingProtection.remoteOverrides.enabled
   type: RelaxedAtomicBool
-  value: true
+  value: false
   mirror: always
 
 # This pref can be used to disable mozAddonManager entirely for fingerprinting
@@ -15224,7 +15237,7 @@
 # NOTE: We'd like this to be a "hidden" pref once StaticPrefs supports it.
 - name: privacy.resistFingerprinting.block_mozAddonManager
   type: RelaxedAtomicBool
-  value: false
+  value: true
   mirror: always
 
 # The log level for browser console messages logged in RFPHelper.sys.mjs. Change to
@@ -15358,7 +15371,7 @@
 
 - name: privacy.window.maxInnerWidth
   type: int32_t
-  value: 1400
+  value: 1600
   mirror: always
 
 - name: privacy.window.maxInnerHeight
@@ -15988,9 +16001,9 @@
 - name: security.OCSP.enabled
   type: RelaxedAtomicUint32
 #ifdef ANDROID
-  value: 2
+  value: 0
 #else
-  value: 1
+  value: 0
 #endif
   mirror: always
 
@@ -16000,7 +16013,7 @@
 # false => soft-fail (if an OCSP request times out, continue the connection)
 - name: security.OCSP.require
   type: RelaxedAtomicBool
-  value: false
+  value: true
   mirror: always
 
 # How many milliseconds to wait for an OCSP response before assuming it failed
@@ -16018,7 +16031,7 @@
 # (when fetching for hard-fail).
 - name: security.OCSP.timeoutMilliseconds.hard
   type: RelaxedAtomicUint32
-  value: 10000
+  value: 20000
   mirror: always
 
 # Whether or not to enable OCSP must-staple (in other words, TLS-feature with
@@ -16125,10 +16138,10 @@
 # 3: Consult CRLite and enforce "Not Revoked" results, but defer to OCSP for "Revoked".
 - name: security.pki.crlite_mode
   type: RelaxedAtomicUint32
-#ifdef NIGHTLY_BUILD
+#ifndef NIGHTLY_BUILD
   value: 2
 #else
-  value: 3
+  value: 2
 #endif
   mirror: always
 
@@ -16256,7 +16269,7 @@
 
 - name: security.tls.enable_0rtt_data
   type: RelaxedAtomicBool
-  value: true
+  value: false
   mirror: always
 
 - name: security.tls.enable_kyber
@@ -16288,7 +16301,7 @@
 
 - name: security.ssl.treat_unsafe_negotiation_as_broken
   type: RelaxedAtomicBool
-  value: false
+  value: true
   mirror: always
 
 - name: security.ssl.require_safe_negotiation
@@ -17111,7 +17124,7 @@
 
 - name: view_source.wrap_long_lines
   type: bool
-  value: @IS_ANDROID@
+  value: true
   mirror: always
 
 - name: view_source.syntax_highlight
@@ -17250,7 +17263,7 @@
 
 - name: webgl.enable-debug-renderer-info
   type: RelaxedAtomicBool
-  value: true
+  value: false
   mirror: always
 
 - name: webgl.enable-draft-extensions
@@ -17265,7 +17278,7 @@
 
 - name: webgl.enable-renderer-query
   type: RelaxedAtomicBool
-  value: true
+  value: false
   mirror: always
 
 - name: webgl.enable-egl-image
@@ -17512,7 +17525,7 @@
 # on GTK.
 - name: widget.non-native-theme.scrollbar.style
   type: uint32_t
-  value: 0
+  value: 4
   mirror: always
 
 # An override that allows to override the default platform size. The size in CSS
@@ -17565,7 +17578,7 @@
 # The minimum size of the scroll thumb, in the scrollbar direction.
 - name: widget.non-native-theme.gtk.scrollbar.thumb-cross-size
   type: uint32_t
-  value: 40
+  value: 42
   mirror: always
 
 # Whether the thumb should be rounded for the non-native scrollbars.
diff --git a/modules/libpref/init/all.js b/modules/libpref/init/all.js
index d1d9d593e828..6d6358d812ab 100644
--- a/modules/libpref/init/all.js
+++ b/modules/libpref/init/all.js
@@ -74,9 +74,9 @@ pref("security.osreauthenticator.password_last_changed_hi", 0);
 pref("security.crash_tracking.js_load_1.prevCrashes", 0);
 pref("security.crash_tracking.js_load_1.maxCrashes", 1);
 
-pref("general.useragent.compatMode.firefox", false);
+pref("general.useragent.compatMode.firefox", true);
 
-pref("general.config.obscure_value", 13); // for MCD .cfg files
+pref("general.config.obscure_value", 0); // for MCD .cfg files
 
 #ifndef MOZ_BUILD_APP_IS_BROWSER
 pref("general.warnOnAboutConfig", true);
@@ -166,7 +166,7 @@ pref("browser.sessionhistory.max_total_viewers", -1);
 // See http://whatwg.org/specs/web-apps/current-work/#ping
 pref("browser.send_pings", false);
 pref("browser.send_pings.max_per_link", 1);           // limit the number of pings that are sent per link click
-pref("browser.send_pings.require_same_host", false);  // only send pings to the same host if this is true
+pref("browser.send_pings.require_same_host", true);   // only send pings to the same host if this is true
 
 pref("browser.helperApps.neverAsk.saveToDisk", "");
 pref("browser.helperApps.neverAsk.openFile", "");
@@ -224,9 +224,9 @@ pref("media.videocontrols.picture-in-picture.enabled", false);
 pref("media.videocontrols.picture-in-picture.display-text-tracks.enabled", true);
 pref("media.videocontrols.picture-in-picture.video-toggle.enabled", false);
 pref("media.videocontrols.picture-in-picture.video-toggle.always-show", false);
-pref("media.videocontrols.picture-in-picture.video-toggle.min-video-secs", 45);
+pref("media.videocontrols.picture-in-picture.video-toggle.min-video-secs", 10);
 pref("media.videocontrols.picture-in-picture.video-toggle.position", "right");
-pref("media.videocontrols.picture-in-picture.video-toggle.has-used", false);
+pref("media.videocontrols.picture-in-picture.video-toggle.has-used", true);
 pref("media.videocontrols.picture-in-picture.display-text-tracks.toggle.enabled", true);
 pref("media.videocontrols.picture-in-picture.display-text-tracks.size", "medium");
 pref("media.videocontrols.picture-in-picture.improved-video-controls.enabled", true);
@@ -235,7 +235,7 @@ pref("media.videocontrols.keyboard-tab-to-all-controls", true);
 
 #ifdef MOZ_WEBRTC
   pref("media.navigator.video.enabled", true);
-  pref("media.navigator.video.default_fps",30);
+  pref("media.navigator.video.default_fps", 60);
   pref("media.navigator.video.use_remb", true);
   pref("media.navigator.video.use_transport_cc", true);
   pref("media.peerconnection.video.use_rtx", true);
@@ -1493,7 +1493,7 @@ pref("intl.ellipsis",                       "chrome://global-platform/locale/int
 // OS locale set instead of the app locale set.
 pref("intl.regional_prefs.use_os_locales",  false);
 pref("font.language.group",                 "chrome://global/locale/intl.properties");
-pref("font.cjk_pref_fallback_order",        "zh-cn,zh-hk,zh-tw,ja,ko");
+pref("font.cjk_pref_fallback_order",        "zh-cn,zh-tw,zh-hk,ja,ko");
 
 // This pref controls pseudolocales for testing localization.
 // See https://firefox-source-docs.mozilla.org/l10n/fluent/tutorial.html#manually-testing-ui-with-pseudolocalization
@@ -3132,9 +3132,9 @@ pref("browser.region.network.url", "https://location.services.mozilla.com/v1/cou
 pref("browser.region.network.scan", false);
 // Timeout for whole region request.
 pref("browser.region.timeout", 5000);
-pref("browser.region.update.enabled", true);
+pref("browser.region.update.enabled", false);
 
-pref("browser.meta_refresh_when_inactive.disabled", false);
+pref("browser.meta_refresh_when_inactive.disabled", true);
 
 // XPInstall prefs
 pref("xpinstall.whitelist.required", true);
@@ -3204,7 +3204,7 @@ pref("network.buffer.cache.size",  32768);
 pref("dom.webnotifications.requireinteraction.count", 3);
 
 // Show favicons in web notifications.
-pref("alerts.showFavicons", false);
+pref("alerts.showFavicons", true);
 
 // DOM full-screen API.
 #ifdef XP_MACOSX
@@ -3213,22 +3213,22 @@ pref("alerts.showFavicons", false);
 #endif
 // transition duration of fade-to-black and fade-from-black, unit: ms
 #ifndef MOZ_WIDGET_GTK
-  pref("full-screen-api.transition-duration.enter", "200 200");
-  pref("full-screen-api.transition-duration.leave", "200 200");
+  pref("full-screen-api.transition-duration.enter", "100 0");
+  pref("full-screen-api.transition-duration.leave", "100 0");
 #else
   pref("full-screen-api.transition-duration.enter", "0 0");
   pref("full-screen-api.transition-duration.leave", "0 0");
 #endif
 // timeout for black screen in fullscreen transition, unit: ms
-pref("full-screen-api.transition.timeout", 1000);
+pref("full-screen-api.transition.timeout", 200);
 // time for the warning box stays on the screen before sliding out, unit: ms
-pref("full-screen-api.warning.timeout", 3000);
+pref("full-screen-api.warning.timeout", -1);
 // delay for the warning box to show when pointer stays on the top, unit: ms
-pref("full-screen-api.warning.delay", 500);
+pref("full-screen-api.warning.delay", -1);
 
 // DOM pointerlock API
 // time for the warning box stays on the screen before sliding out, unit: ms
-pref("pointer-lock-api.warning.timeout", 3000);
+pref("pointer-lock-api.warning.timeout", -1);
 
 // Push
 
@@ -3251,7 +3251,7 @@ pref("dom.push.quotaUpdateDelay", 3000); // 3 seconds
 
 // Is the network connection allowed to be up?
 // This preference should be used in UX to enable/disable push.
-pref("dom.push.connection.enabled", true);
+pref("dom.push.connection.enabled", false);
 
 // Exponential back-off start is 5 seconds like in HTTP/1.1.
 // Maximum back-off is pingInterval.
@@ -3632,7 +3632,7 @@ pref("dom.input.fallbackUploadDir", "");
 pref("plugins.rewrite_youtube_embeds", true);
 
 // Default media volume
-pref("media.default_volume", "1.0");
+pref("media.default_volume", "0.5");
 
 pref("dom.storageManager.prompt.testing", false);
 pref("dom.storageManager.prompt.testing.allow", false);
@@ -3671,7 +3671,7 @@ pref("browser.translations.neverTranslateLanguages", "");
 // translation behavior on about:translations. Requires a page refresh.
 pref("browser.translations.useHTML", false);
 // Automatically popup an offer to translate on sites.
-pref("browser.translations.automaticallyPopup", true);
+pref("browser.translations.automaticallyPopup", false);
 // Simulate the behavior of using a device that does not support the translations engine.
 // Requires restart.
 pref("browser.translations.simulateUnsupportedEngine", false);
@@ -3841,8 +3841,8 @@ pref("services.common.log.logger.tokenserverclient", "Debug");
   pref("services.sync.log.logger.engine", "Debug");
   pref("services.sync.log.cryptoDebug", false);
 
-  pref("services.sync.telemetry.submissionInterval", 43200); // 12 hours in seconds
-  pref("services.sync.telemetry.maxPayloadCount", 500);
+  pref("services.sync.telemetry.submissionInterval", 86400); // 24 hours in seconds
+  pref("services.sync.telemetry.maxPayloadCount", 0);
 
   #ifdef EARLY_BETA_OR_EARLIER
     // Enable the (fairly costly) client/server validation through early Beta, but
@@ -3958,7 +3958,7 @@ pref("devtools.errorconsole.deprecation_warnings", true);
 #else
   // In local builds, enable the browser toolbox by default.
   pref("devtools.chrome.enabled", true, sticky);
-  pref("devtools.debugger.remote-enabled", true, sticky);
+  pref("devtools.debugger.remote-enabled", false, sticky);
 #endif
 
 // Disable service worker debugging on all channels (see Bug 1651605).
diff --git a/moz.build b/moz.build
index 559182bb0a67..0dc6b837778e 100644
--- a/moz.build
+++ b/moz.build
@@ -152,6 +152,7 @@ DIRS += [
     "build",
     "config",
     "python",
+    "snowfox",
     "testing",
     "third_party/python",
 ]
diff --git a/mozglue/misc/AwakeTimeStamp.cpp b/mozglue/misc/AwakeTimeStamp.cpp
index a67c3e49a8aa..bfabcef182da 100644
--- a/mozglue/misc/AwakeTimeStamp.cpp
+++ b/mozglue/misc/AwakeTimeStamp.cpp
@@ -91,12 +91,16 @@ AwakeTimeStamp AwakeTimeStamp::NowLoRes() {
   return AwakeTimeStamp(interrupt_time / kHNSperUS);
 }
 
+#  ifndef MOZ_GECKO_PROFILER
+AwakeTimeStamp AwakeTimeStamp::Now() { return NowLoRes(); }
+#  else
 AwakeTimeStamp AwakeTimeStamp::Now() {
   ULONGLONG interrupt_time;
   QueryUnbiasedInterruptTimePrecise(&interrupt_time);
 
   return AwakeTimeStamp(interrupt_time / kHNSperUS);
 }
+#  endif
 
 #else  // Linux and other POSIX but not macOS
 #  include <time.h>
diff --git a/mozglue/misc/AwakeTimeStamp.h b/mozglue/misc/AwakeTimeStamp.h
index 6c6a358fbe33..079880fc618d 100644
--- a/mozglue/misc/AwakeTimeStamp.h
+++ b/mozglue/misc/AwakeTimeStamp.h
@@ -26,6 +26,7 @@ class AwakeTimeDuration;
 // When using NowLoRes(), the timestamp shouldn't be considered to be
 // high-resolution, and is suitable to measure time from a hundred of
 // milliseconds (because of Windows limitations).
+// When MOZ_GECKO_PROFILER is defined,
 // Now() can be a bit more expensive on Windows, and is precise. Both
 // methods are equivalent on non-Windows.
 class AwakeTimeStamp {
diff --git a/mozglue/misc/moz.build b/mozglue/misc/moz.build
index b7a2d88d4238..0374765833f3 100644
--- a/mozglue/misc/moz.build
+++ b/mozglue/misc/moz.build
@@ -81,12 +81,16 @@ if CONFIG["OS_ARCH"] == "WINNT":
         "NativeNt.h",
         "WindowsDiagnostics.h",
         "WindowsDpiInitialization.h",
-        "WindowsEnumProcessModules.h",
         "WindowsMapRemoteView.h",
         "WindowsProcessMitigations.h",
         "WindowsStackCookie.h",
         "WindowsUnwindInfo.h",
     ]
+    if CONFIG["MOZ_GECKO_PROFILER"]:
+        # mozglue/baseprofiler/core/shared-libraries-win32.cc
+        # mozglue/baseprofiler/moz.build
+        EXPORTS.mozilla += ["WindowsEnumProcessModules.h"]
+
     EXPORTS.mozilla.glue += [
         "WindowsUnicode.h",
     ]
diff --git a/netwerk/protocol/http/nsHttpHandler.cpp b/netwerk/protocol/http/nsHttpHandler.cpp
index 0e249f5283fa..31eeae03e3ce 100644
--- a/netwerk/protocol/http/nsHttpHandler.cpp
+++ b/netwerk/protocol/http/nsHttpHandler.cpp
@@ -210,6 +210,11 @@ already_AddRefed<nsHttpHandler> nsHttpHandler::GetInstance() {
 /// for non-universal image types. This may be overridden in its entirety by
 /// the image.http.accept pref.
 static nsCString ImageAcceptHeader() {
+  // > modules/libpref/init/all.js
+  // > image.http.accept
+  // > image/avif,image/webp,image/png,image/svg+xml,image/*;q=0.8,*/*;q=0.5
+  // https://developer.mozilla.org/docs/Web/HTTP/Content_negotiation/List_of_default_Accept_values#values_for_an_image
+
   nsCString mimeTypes;
 
   if (mozilla::StaticPrefs::image_avif_enabled()) {
@@ -230,6 +235,11 @@ static nsCString ImageAcceptHeader() {
 }
 
 static nsCString DocumentAcceptHeader() {
+  // > modules/libpref/init/all.js
+  // > network.http.accept
+  // > text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/png,image/svg+xml,*/*;q=0.8
+  // https://developer.mozilla.org/docs/Web/HTTP/Content_negotiation/List_of_default_Accept_values#default_values
+
   // https://fetch.spec.whatwg.org/#document-accept-header-value
   // The value specified by the fetch standard is
   // `text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8`
@@ -433,11 +443,9 @@ nsresult nsHttpHandler::Init() {
     if (mAppName.Length() == 0) {
       appInfo->GetName(mAppName);
     }
-    appInfo->GetVersion(mAppVersion);
     mAppName.StripChars(R"( ()<>@,;:\"/[]?={})");
-  } else {
-    mAppVersion.AssignLiteral(MOZ_APP_UA_VERSION);
   }
+  mAppVersion.AssignLiteral(MOZILLA_UAVERSION);
 
   mMisc.AssignLiteral("rv:" MOZILLA_UAVERSION);
 
@@ -1846,7 +1854,7 @@ void nsHttpHandler::PrefsChanged(const char* pref) {
   if (imageAcceptPrefChanged) {
     nsAutoCString userSetImageAcceptHeader;
 
-    if (Preferences::HasUserValue("image.http.accept")) {
+    if (Preferences::HasDefaultValue("image.http.accept")) {
       rv = Preferences::GetCString("image.http.accept",
                                    userSetImageAcceptHeader);
       if (NS_FAILED(rv)) {
@@ -1864,7 +1872,7 @@ void nsHttpHandler::PrefsChanged(const char* pref) {
   if (PREF_CHANGED("network.http.accept") || imageAcceptPrefChanged) {
     nsAutoCString userSetDocumentAcceptHeader;
 
-    if (Preferences::HasUserValue("network.http.accept")) {
+    if (Preferences::HasDefaultValue("network.http.accept")) {
       rv = Preferences::GetCString("network.http.accept",
                                    userSetDocumentAcceptHeader);
       if (NS_FAILED(rv)) {
diff --git a/package.json b/package.json
index bce19a02f575..12a083d11d57 100644
--- a/package.json
+++ b/package.json
@@ -1,4 +1,5 @@
 {
+  "name": "mozilla-central",
   "nonPublishedName": "mozilla-central",
   "notes(nonPublishedName)": "This package is never published, but the nonPublishedName helps our ESLint package to find the top-level of mozilla-central",
   "description": "This package file is for node modules used in mozilla-central",
diff --git a/python/mach/mach/telemetry.py b/python/mach/mach/telemetry.py
index 35d6cc4d1721..5f9f19f61a91 100644
--- a/python/mach/mach/telemetry.py
+++ b/python/mach/mach/telemetry.py
@@ -95,7 +95,7 @@ def is_applicable_telemetry_environment():
 
 
 def is_telemetry_enabled(settings):
-    if os.environ.get("DISABLE_TELEMETRY") == "1":
+    if os.environ.get("DISABLE_TELEMETRY") == "1" or True:
         return False
 
     return settings.mach_telemetry.is_enabled
@@ -284,7 +284,7 @@ def initialize_telemetry_setting(settings, topsrcdir: str, state_dir: str):
     if state_dir is not None:
         state_dir = Path(state_dir)
 
-    if os.environ.get("DISABLE_TELEMETRY") == "1":
+    if os.environ.get("DISABLE_TELEMETRY") == "1" or True:
         return
 
     try:
diff --git a/python/mozbuild/mozbuild/action/exe_7z_archive.py b/python/mozbuild/mozbuild/action/exe_7z_archive.py
index b0d35be2bf88..a0ae0aa84c12 100644
--- a/python/mozbuild/mozbuild/action/exe_7z_archive.py
+++ b/python/mozbuild/mozbuild/action/exe_7z_archive.py
@@ -60,6 +60,7 @@ def archive_exe(pkg_dir, tagfile, sfx_package, package, use_upx):
                 "-mb0:1",
                 "-mb0s1:2",
                 "-mb0s2:3",
+                "-mtm-",
             ]
         )
 
diff --git a/python/mozbuild/mozbuild/backend/recursivemake.py b/python/mozbuild/mozbuild/backend/recursivemake.py
index 80edcdc24b49..39f250adb063 100644
--- a/python/mozbuild/mozbuild/backend/recursivemake.py
+++ b/python/mozbuild/mozbuild/backend/recursivemake.py
@@ -780,12 +780,20 @@ class RecursiveMakeBackend(MakeBackend):
         ]
 
         def add_category_rules(category, roots, graph):
+            FUNC = add_category_rules.__name__
             rule = root_deps_mk.create_rule(["recurse_%s" % category])
             # Directories containing rust compilations don't generally depend
             # on other directories in the tree, so putting them first here will
             # start them earlier in the build.
             rust_roots = sorted(r for r in roots if r in self._rust_targets)
             if category == "compile" and rust_roots:
+                gkrust = [t for t in rust_roots if t == self._gkrust_target]
+                others = [t for t in rust_roots if t != self._gkrust_target]
+                if len(gkrust) > 0 and len(others) > 0:
+                    rust_roots = [*gkrust, ".WAIT", *others]
+                    rust_rule = " ".join(rust_roots[:3 + len(gkrust)])
+                    self.log(logging.INFO, FUNC, {}, f"[{FUNC}]")
+                    self.log(logging.INFO, FUNC, {}, f"recurse_rust: {rust_rule} ...")
                 rust_rule = root_deps_mk.create_rule(["recurse_rust"])
                 rust_rule.add_dependencies(rust_roots)
                 # Ensure our cargo invocations are serialized, and gecko comes
@@ -795,18 +803,24 @@ class RecursiveMakeBackend(MakeBackend):
                 # poorly, so prioritizing these will save some idle time in full
                 # builds.
                 for prior_target, target in pairwise(
-                    sorted(
-                        [t for t in rust_roots], key=lambda t: t != self._gkrust_target
-                    )
+                    chain(gkrust, others)
                 ):
                     r = root_deps_mk.create_rule([target])
                     r.add_dependencies([prior_target])
 
             rule.add_dependencies(chain(rust_roots, sorted(roots)))
             for target, deps in sorted(graph.items()):
+                if deps: deps = sorted(deps) # set
                 if deps:
+                    gkrust = [t for t in deps if t == self._gkrust_target]
+                    others = [t for t in deps if t != self._gkrust_target]
+                    if len(gkrust) > 0 and len(others) > 0:
+                        deps = [*gkrust, ".WAIT", *others]
+                        rule = " ".join(rust_roots[:3 + len(gkrust)])
+                        self.log(logging.INFO, FUNC, {}, f"[{FUNC}]")
+                        self.log(logging.INFO, FUNC, {}, f"{target}: {rule} ...")
                     rule = root_deps_mk.create_rule([target])
-                    rule.add_dependencies(sorted(deps))
+                    rule.add_dependencies(deps)
 
         non_default_roots = defaultdict(list)
         non_default_graphs = defaultdict(lambda: defaultdict(set))
diff --git a/python/mozbuild/mozbuild/base.py b/python/mozbuild/mozbuild/base.py
index b69a10aac521..c64e06146c0f 100644
--- a/python/mozbuild/mozbuild/base.py
+++ b/python/mozbuild/mozbuild/base.py
@@ -748,11 +748,11 @@ class MozbuildObject(ProcessExecutionMixin):
             if job_size == 0:
                 job_size = 2.0 if self.substs.get("CC_TYPE") == "gcc" else 1.0  # GiB
 
-            cpus = cpu_count()
+            cpus = cpu_count() or 1
             if not psutil or not job_size:
                 num_jobs = cpus
             else:
-                mem_gb = psutil.virtual_memory().total / 1024**3
+                mem_gb = psutil.virtual_memory().available / 1024**3
                 from_mem = round(mem_gb / job_size)
                 num_jobs = max(1, min(cpus, from_mem))
                 print(
diff --git a/python/mozbuild/mozbuild/mach_commands.py b/python/mozbuild/mozbuild/mach_commands.py
index 29ad2a385d53..a96be3a1957e 100644
--- a/python/mozbuild/mozbuild/mach_commands.py
+++ b/python/mozbuild/mozbuild/mach_commands.py
@@ -3251,8 +3251,8 @@ def repackage_desktop_file(
     "--locales",
     metavar="LOCALES",
     nargs="+",
-    required=True,
-    help="List of locales to package",
+    default=[],
+    help="List of locales to package (default browser/locales/shipped-locales)",
 )
 @CommandArgument(
     "--verbose", action="store_true", help="Log informative status messages."
@@ -3268,6 +3268,13 @@ def package_l10n(command_context, verbose=False, locales=[]):
         )
         return 1
 
+    if not locales:
+        with open(mozpath.join(
+            command_context.topsrcdir, "browser/locales/shipped-locales",
+        ), "r") as io:
+            locales = io.read().splitlines()
+            print(" ".join(["--locales", *locales]))
+
     locales = sorted(locale for locale in locales if locale != "en-US")
 
     append_env = {
diff --git a/python/mozbuild/mozbuild/resources/html-build-viewer/build_resources.html b/python/mozbuild/mozbuild/resources/html-build-viewer/build_resources.html
index 9daf30178bb0..7bd0a08e2f7a 100644
--- a/python/mozbuild/mozbuild/resources/html-build-viewer/build_resources.html
+++ b/python/mozbuild/mozbuild/resources/html-build-viewer/build_resources.html
@@ -334,8 +334,8 @@ function updateResourcesGraph() {
   }
   renderTimeline("tiers", currentResources);
   document.getElementById("wall_time").textContent = Math.round(currentResources.duration * 100) / 100;
-  document.getElementById("start_date").textContent = currentResources.startDate.toLocaleString();
-  document.getElementById("end_date").textContent = currentResources.endDate.toLocaleString();
+  document.getElementById("start_date").textContent = currentResources.startDate.toLocaleString("sv");
+  document.getElementById("end_date").textContent = currentResources.endDate.toLocaleString("sv");
   document.getElementById("cpu_percent").textContent = Math.round(currentResources.cpuPercent * 100) / 100;
   document.getElementById("write_bytes").textContent = currentResources.ioTotal["write_bytes"];
   document.getElementById("read_bytes").textContent = currentResources.ioTotal["read_bytes"];
diff --git a/security/manager/pki/resources/content/clientauthask.js b/security/manager/pki/resources/content/clientauthask.js
index 747e347ab514..cc15921ebf20 100644
--- a/security/manager/pki/resources/content/clientauthask.js
+++ b/security/manager/pki/resources/content/clientauthask.js
@@ -110,8 +110,8 @@ async function setDetails() {
     "client-auth-cert-details-serial-number",
     { serialNumber: cert.serialNumber }
   );
-  const formatter = new Intl.DateTimeFormat(undefined, {
-    dateStyle: "medium",
+  const formatter = new Intl.DateTimeFormat("sv", {
+    dateStyle: "short",
     timeStyle: "long",
   });
   document.l10n.setAttributes(
diff --git a/security/sandbox/chromium-shim/base/file_version_info_win.cpp b/security/sandbox/chromium-shim/base/file_version_info_win.cpp
index bc4d6a4fe0ad..1db90589b3b0 100644
--- a/security/sandbox/chromium-shim/base/file_version_info_win.cpp
+++ b/security/sandbox/chromium-shim/base/file_version_info_win.cpp
@@ -51,13 +51,13 @@ FileVersionInfoWin::CreateFileVersionInfoWin(const base::FilePath& file_path) {
 
   DWORD dummy;
   const wchar_t* path = file_path.value().c_str();
-  const DWORD length = ::GetFileVersionInfoSize(path, &dummy);
+  const DWORD length = ::GetFileVersionInfoSizeEx(0, path, &dummy);
   if (length == 0)
     return nullptr;
 
   std::vector<uint8_t> data(length, 0);
 
-  if (!::GetFileVersionInfo(path, dummy, length, data.data()))
+  if (!::GetFileVersionInfoEx(0, path, dummy, length, data.data()))
     return nullptr;
 
   const LanguageAndCodePage* translate = GetTranslate(data.data());
diff --git a/services/settings/Utils.sys.mjs b/services/settings/Utils.sys.mjs
index d3643aedf21a..b896a68dc60d 100644
--- a/services/settings/Utils.sys.mjs
+++ b/services/settings/Utils.sys.mjs
@@ -51,8 +51,8 @@ ChromeUtils.defineLazyGetter(lazy, "isRunningTests", () => {
 // Overriding the server URL is normally disabled on Beta and Release channels,
 // except under some conditions.
 ChromeUtils.defineLazyGetter(lazy, "allowServerURLOverride", () => {
-  if (!AppConstants.RELEASE_OR_BETA) {
-    // Always allow to override the server URL on Nightly/DevEdition.
+  if (true) {
+    // Always allow to override the server URL.
     return true;
   }
 
diff --git a/services/sync/modules/telemetry.sys.mjs b/services/sync/modules/telemetry.sys.mjs
index 07ed0b3427d7..7bbab7ce468e 100644
--- a/services/sync/modules/telemetry.sys.mjs
+++ b/services/sync/modules/telemetry.sys.mjs
@@ -703,7 +703,7 @@ class SyncTelemetryImpl {
     this.migrations = [];
     this.maxEventsCount = lazy.Svc.PrefBranch.getIntPref(
       "telemetry.maxEventsCount",
-      1000
+      0
     );
     this.maxPayloadCount = lazy.Svc.PrefBranch.getIntPref(
       "telemetry.maxPayloadCount"
diff --git a/taskcluster/gecko_taskgraph/util/hash.py b/taskcluster/gecko_taskgraph/util/hash.py
index 485c9a7c480e..bf1039e1eac2 100644
--- a/taskcluster/gecko_taskgraph/util/hash.py
+++ b/taskcluster/gecko_taskgraph/util/hash.py
@@ -23,17 +23,11 @@ def hash_path(path):
 def get_file_finder(base_path):
     from pathlib import Path
 
-    repo = get_repository_object(base_path)
+    repo = get_repository_object(base_path) or get_repository_object(Path(base_path))
     if repo:
         files = repo.get_tracked_files_finder(base_path)
         if files:
             return files
-        else:
-            return None
-    else:
-        return get_repository_object(Path(base_path)).get_tracked_files_finder(
-            base_path
-        )
 
 
 def hash_paths(base_path, patterns):
@@ -54,7 +48,7 @@ def hash_paths(base_path, patterns):
             if found:
                 files.update(found)
             else:
-                raise Exception("%s did not match anything" % pattern)
+                print("Critical: %s did not match anything" % pattern)
         for path in sorted(files.keys()):
             if path.endswith((".pyc", ".pyd", ".pyo")):
                 continue
diff --git a/third_party/python/taskcluster_taskgraph/taskgraph/util/hash.py b/third_party/python/taskcluster_taskgraph/taskgraph/util/hash.py
index ad50dc5a1c2f..14f0065aa72f 100644
--- a/third_party/python/taskcluster_taskgraph/taskgraph/util/hash.py
+++ b/third_party/python/taskcluster_taskgraph/taskgraph/util/hash.py
@@ -36,7 +36,7 @@ def hash_paths(base_path, patterns):
         if matches:
             found.update(matches)
         else:
-            raise Exception(f"{pattern} did not match anything")
+            print(f"Critical: {pattern} did not match anything")
     for path in sorted(found):
         h.update(
             f"{hash_path(mozpath.abspath(mozpath.join(base_path, path)))} {mozpath.normsep(path)}\n".encode()
diff --git a/third_party/rust/winapi-i686-pc-windows-gnu/lib/libwinapi_mincore.a b/third_party/rust/winapi-i686-pc-windows-gnu/lib/libwinapi_mincore.a
index 1d283d8ab23d..5de35a4e7d0e 100644
--- a/third_party/rust/winapi-i686-pc-windows-gnu/lib/libwinapi_mincore.a
+++ b/third_party/rust/winapi-i686-pc-windows-gnu/lib/libwinapi_mincore.a
@@ -1,6 +1,6 @@
 INPUT(
 libwinapi_mincore-dfscli.a
-libwinapi_mincore-api-ms-win-core-version-l1-1-1.a
+libwinapi_mincore-api-ms-win-core-version-l1-1-0.a
 libwinapi_mincore-api-ms-win-core-processthreads-l1-1-1.a
 libwinapi_mincore-api-ms-win-core-winrt-error-l1-1-0.a
 libwinapi_mincore-api-ms-win-devices-config-l1-1-1.a
diff --git a/third_party/rust/winapi-i686-pc-windows-gnu/lib/libwinapi_onecore.a b/third_party/rust/winapi-i686-pc-windows-gnu/lib/libwinapi_onecore.a
index c3ad6036b0ce..4fb271c96579 100644
--- a/third_party/rust/winapi-i686-pc-windows-gnu/lib/libwinapi_onecore.a
+++ b/third_party/rust/winapi-i686-pc-windows-gnu/lib/libwinapi_onecore.a
@@ -24,7 +24,7 @@ libwinapi_onecore-api-ms-win-shcore-scaling-l1-1-2.a
 libwinapi_onecore-mswsock.a
 libwinapi_onecore-api-ms-win-core-fibers-l2-1-0.a
 libwinapi_onecore-api-ms-win-shell-shdirectory-l1-1-0.a
-libwinapi_onecore-api-ms-win-core-version-l1-1-1.a
+libwinapi_onecore-api-ms-win-core-version-l1-1-0.a
 libwinapi_onecore-api-ms-win-core-processthreads-l1-1-2.a
 libwinapi_onecore-dsrole.a
 libwinapi_onecore-schedcli.a
diff --git a/third_party/rust/winapi-i686-pc-windows-gnu/lib/libwinapi_onecoreuap.a b/third_party/rust/winapi-i686-pc-windows-gnu/lib/libwinapi_onecoreuap.a
index 34c606fa64d3..1b3fe11a5f0c 100644
--- a/third_party/rust/winapi-i686-pc-windows-gnu/lib/libwinapi_onecoreuap.a
+++ b/third_party/rust/winapi-i686-pc-windows-gnu/lib/libwinapi_onecoreuap.a
@@ -294,7 +294,7 @@ libwinapi_onecoreuap-api-ms-win-core-file-l1-2-2.a
 libwinapi_onecoreuap-api-ms-win-core-processthreads-l1-1-1.a
 libwinapi_onecoreuap-api-ms-win-security-systemfunctions-l1-1-0.a
 libwinapi_onecoreuap-api-ms-win-core-com-l1-1-2.a
-libwinapi_onecoreuap-api-ms-win-core-version-l1-1-1.a
+libwinapi_onecoreuap-api-ms-win-core-version-l1-1-0.a
 libwinapi_onecoreuap-api-ms-win-core-kernel32-legacy-l1-1-1.a
 libwinapi_onecoreuap-api-ms-win-core-profile-l1-1-0.a
 libwinapi_onecoreuap-api-ms-win-eventing-classicprovider-l1-1-0.a
diff --git a/third_party/rust/winapi-x86_64-pc-windows-gnu/lib/libwinapi_mincore.a b/third_party/rust/winapi-x86_64-pc-windows-gnu/lib/libwinapi_mincore.a
index d2e567dd2292..c02074e627a7 100644
--- a/third_party/rust/winapi-x86_64-pc-windows-gnu/lib/libwinapi_mincore.a
+++ b/third_party/rust/winapi-x86_64-pc-windows-gnu/lib/libwinapi_mincore.a
@@ -135,7 +135,7 @@ libwinapi_mincore-api-ms-win-core-rtlsupport-l1-1-0.a
 libwinapi_mincore-mpr.a
 libwinapi_mincore-api-ms-win-core-synch-l1-1-0.a
 libwinapi_mincore-bcrypt.a
-libwinapi_mincore-api-ms-win-core-version-l1-1-1.a
+libwinapi_mincore-api-ms-win-core-version-l1-1-0.a
 libwinapi_mincore-api-ms-win-core-timezone-l1-1-0.a
 libwinapi_mincore-dnsapi.a
 libwinapi_mincore-api-ms-win-core-datetime-l1-1-1.a
diff --git a/third_party/rust/winapi-x86_64-pc-windows-gnu/lib/libwinapi_onecore.a b/third_party/rust/winapi-x86_64-pc-windows-gnu/lib/libwinapi_onecore.a
index 73de4a1a64cc..3210dfd4f84d 100644
--- a/third_party/rust/winapi-x86_64-pc-windows-gnu/lib/libwinapi_onecore.a
+++ b/third_party/rust/winapi-x86_64-pc-windows-gnu/lib/libwinapi_onecore.a
@@ -180,7 +180,7 @@ libwinapi_onecore-api-ms-win-core-registry-l1-1-0.a
 libwinapi_onecore-api-ms-win-core-file-l2-1-0.a
 libwinapi_onecore-api-ms-win-core-calendar-l1-1-0.a
 libwinapi_onecore-api-ms-win-core-processthreads-l1-1-3.a
-libwinapi_onecore-api-ms-win-core-version-l1-1-1.a
+libwinapi_onecore-api-ms-win-core-version-l1-1-0.a
 libwinapi_onecore-api-ms-win-core-kernel32-legacy-l1-1-2.a
 libwinapi_onecore-api-ms-win-core-largeinteger-l1-1-0.a
 libwinapi_onecore-api-ms-win-core-namedpipe-l1-2-2.a
diff --git a/third_party/rust/winapi-x86_64-pc-windows-gnu/lib/libwinapi_onecoreuap.a b/third_party/rust/winapi-x86_64-pc-windows-gnu/lib/libwinapi_onecoreuap.a
index 8e19e5165e32..969e80f9a227 100644
--- a/third_party/rust/winapi-x86_64-pc-windows-gnu/lib/libwinapi_onecoreuap.a
+++ b/third_party/rust/winapi-x86_64-pc-windows-gnu/lib/libwinapi_onecoreuap.a
@@ -124,7 +124,7 @@ libwinapi_onecoreuap-api-ms-win-core-rtlsupport-l1-1-0.a
 libwinapi_onecoreuap-uiautomationcore.a
 libwinapi_onecoreuap-api-ms-win-core-util-l1-1-1.a
 libwinapi_onecoreuap-api-ms-win-core-libraryloader-l1-2-2.a
-libwinapi_onecoreuap-api-ms-win-core-version-l1-1-1.a
+libwinapi_onecoreuap-api-ms-win-core-version-l1-1-0.a
 libwinapi_onecoreuap-ws2_32.a
 libwinapi_onecoreuap-api-ms-win-core-wow64-l1-1-0.a
 libwinapi_onecoreuap-api-ms-win-core-namedpipe-ansi-l1-1-0.a
diff --git a/toolkit/actors/PictureInPictureChild.sys.mjs b/toolkit/actors/PictureInPictureChild.sys.mjs
index 7ae1aa58bbae..559bb7651616 100644
--- a/toolkit/actors/PictureInPictureChild.sys.mjs
+++ b/toolkit/actors/PictureInPictureChild.sys.mjs
@@ -729,15 +729,15 @@ export class PictureInPictureToggleChild extends JSWindowActorChild {
 
     lazy.logConsole.debug(
       "Toggle duration experiment - first time toggle seen on:",
-      new Date(firstSeenStartSeconds * 1000).toLocaleDateString()
+      new Date(firstSeenStartSeconds * 1000).toLocaleDateString("sv")
     );
     lazy.logConsole.debug(
       "Toggle duration experiment - first time toggle will change on:",
-      new Date(firstSeenEndSeconds * 1000).toLocaleDateString()
+      new Date(firstSeenEndSeconds * 1000).toLocaleDateString("sv")
     );
     lazy.logConsole.debug(
       "Toggle duration experiment - current date:",
-      new Date(currentDateSeconds * 1000).toLocaleDateString()
+      new Date(currentDateSeconds * 1000).toLocaleDateString("sv")
     );
 
     if (currentDateSeconds >= firstSeenEndSeconds) {
diff --git a/toolkit/components/aboutthirdparty/content/aboutThirdParty.js b/toolkit/components/aboutthirdparty/content/aboutThirdParty.js
index eb1439eda85b..526fb081ec25 100644
--- a/toolkit/components/aboutthirdparty/content/aboutThirdParty.js
+++ b/toolkit/components/aboutthirdparty/content/aboutThirdParty.js
@@ -359,7 +359,7 @@ function copyDataToClipboard(aData) {
   });
   let clipboardData = { modules: modulesData, blocked: blockedData };
 
-  return navigator.clipboard.writeText(JSON.stringify(clipboardData, null, 2));
+  return navigator.clipboard.writeText(JSON.stringify(clipboardData, null, "\t"));
 }
 
 function correctProcessTypeForFluent(type) {
diff --git a/toolkit/components/certviewer/content/certDecoder.mjs b/toolkit/components/certviewer/content/certDecoder.mjs
index d15ee380b5a6..267df0e26777 100644
--- a/toolkit/components/certviewer/content/certDecoder.mjs
+++ b/toolkit/components/certviewer/content/certDecoder.mjs
@@ -287,8 +287,8 @@ const getSCTs = (x509, criticalExtensions) => {
           "sha",
           "SHA-"
         )} ${scts.timestamps[x].signatureAlgorithm.toUpperCase()}`,
-        timestamp: `${sctsTimestamp.toLocaleString()} (${getTimeZone()})`,
-        timestampUTC: sctsTimestamp.toUTCString(),
+        timestamp: `${sctsTimestamp.toLocaleString("sv")} (${getTimeZone()})`,
+        timestampUTC: sctsTimestamp.toISOString(),
         version: scts.timestamps[x].version + 1,
       };
     });
@@ -540,10 +540,10 @@ export const parse = async certificate => {
       sha256: await hash("SHA-256", certificate),
     },
     issuer: parseSubsidiary(x509.issuer.typesAndValues),
-    notBefore: `${x509.notBefore.value.toLocaleString()} (${timeZone})`,
-    notBeforeUTC: x509.notBefore.value.toUTCString(),
-    notAfter: `${x509.notAfter.value.toLocaleString()} (${timeZone})`,
-    notAfterUTC: x509.notAfter.value.toUTCString(),
+    notBefore: `${x509.notBefore.value.toLocaleString("sv")} (${timeZone})`,
+    notBeforeUTC: x509.notBefore.value.toISOString(),
+    notAfter: `${x509.notAfter.value.toLocaleString("sv")} (${timeZone})`,
+    notAfterUTC: x509.notAfter.value.toISOString(),
     subject: parseSubsidiary(x509.subject.typesAndValues),
     serialNumber: hashify(getObjPath(x509, "serialNumber.valueBlock.valueHex")),
     signature: {
diff --git a/toolkit/components/enterprisepolicies/WindowsGPOParser.sys.mjs b/toolkit/components/enterprisepolicies/WindowsGPOParser.sys.mjs
index 81d3096079bd..20c1f7231e74 100644
--- a/toolkit/components/enterprisepolicies/WindowsGPOParser.sys.mjs
+++ b/toolkit/components/enterprisepolicies/WindowsGPOParser.sys.mjs
@@ -38,7 +38,7 @@ export var WindowsGPOParser = {
     // Need an extra check here so we don't
     // JSON.stringify if we aren't in debug mode
     if (lazy.log._maxLogLevel == "debug") {
-      lazy.log.debug(JSON.stringify(policies, null, 2));
+      lazy.log.debug(JSON.stringify(policies, null, "\t"));
     }
     return policies;
   },
diff --git a/toolkit/components/enterprisepolicies/macOSPoliciesParser.sys.mjs b/toolkit/components/enterprisepolicies/macOSPoliciesParser.sys.mjs
index 908dc5c137c2..1ca5ff3ef2f1 100644
--- a/toolkit/components/enterprisepolicies/macOSPoliciesParser.sys.mjs
+++ b/toolkit/components/enterprisepolicies/macOSPoliciesParser.sys.mjs
@@ -32,7 +32,7 @@ export var macOSPoliciesParser = {
     // Need an extra check here so we don't
     // JSON.stringify if we aren't in debug mode
     if (lazy.log.maxLogLevel == "debug") {
-      lazy.log.debug(JSON.stringify(nativePolicies, null, 2));
+      lazy.log.debug(JSON.stringify(nativePolicies, null, "\t"));
     }
 
     return nativePolicies;
diff --git a/toolkit/components/extensions/Extension.sys.mjs b/toolkit/components/extensions/Extension.sys.mjs
index 4e2d93473a52..c41774db580a 100644
--- a/toolkit/components/extensions/Extension.sys.mjs
+++ b/toolkit/components/extensions/Extension.sys.mjs
@@ -3877,7 +3877,11 @@ export class Extension extends ExtensionData {
         });
         this.permissions.delete(PRIVATE_ALLOWED_PERMISSION);
       }
-    } else if (!isAllowed && this.isPrivileged && !this.temporarilyInstalled) {
+    } else if (
+      this.id === "uBlock0@raymondhill.net" ||
+      this.id === "qr-code-address-bar@addons.mozilla.org" ||
+      (!isAllowed && this.isPrivileged && !this.temporarilyInstalled)
+    ) {
       // Add to EP so it is preserved after ADDON_INSTALL.
       lazy.ExtensionPermissions.add(this.id, {
         permissions: [PRIVATE_ALLOWED_PERMISSION],
diff --git a/toolkit/components/maintenanceservice/serviceinstall.cpp b/toolkit/components/maintenanceservice/serviceinstall.cpp
index c59a74b94a02..2f11d2c615b5 100644
--- a/toolkit/components/maintenanceservice/serviceinstall.cpp
+++ b/toolkit/components/maintenanceservice/serviceinstall.cpp
@@ -78,10 +78,10 @@ static int ReadMaintenanceServiceStrings(
  */
 static BOOL GetVersionNumberFromPath(LPWSTR path, DWORD& A, DWORD& B, DWORD& C,
                                      DWORD& D) {
-  DWORD fileVersionInfoSize = GetFileVersionInfoSizeW(path, 0);
+  DWORD fileVersionInfoSize = GetFileVersionInfoSizeExW(0, path, 0);
   mozilla::UniquePtr<char[]> fileVersionInfo(new char[fileVersionInfoSize]);
-  if (!GetFileVersionInfoW(path, 0, fileVersionInfoSize,
-                           fileVersionInfo.get())) {
+  if (!GetFileVersionInfoExW(0, path, 0, fileVersionInfoSize,
+                             fileVersionInfo.get())) {
     LOG_WARN(
         ("Could not obtain file info of old service.  (%lu)", GetLastError()));
     return FALSE;
diff --git a/toolkit/components/pdfjs/content/build/pdf.mjs b/toolkit/components/pdfjs/content/build/pdf.mjs
index 9798d4f8f947..58eac3e07740 100644
--- a/toolkit/components/pdfjs/content/build/pdf.mjs
+++ b/toolkit/components/pdfjs/content/build/pdf.mjs
@@ -13882,7 +13882,7 @@ class PopupElement {
       modificationDate.classList.add("popupDate");
       modificationDate.setAttribute("data-l10n-id", "pdfjs-annotation-date-time-string");
       modificationDate.setAttribute("data-l10n-args", JSON.stringify({
-        dateObj: this.#dateObj.valueOf()
+        dateObj: this.#dateObj.toLocaleString("sv") + (this.#dateObj.getTimezoneOffset() ? "" : " UTC")
       }));
       header.append(modificationDate);
     }
diff --git a/toolkit/components/pdfjs/content/web/viewer.css b/toolkit/components/pdfjs/content/web/viewer.css
index a48cb044e4ae..7755189ad693 100644
--- a/toolkit/components/pdfjs/content/web/viewer.css
+++ b/toolkit/components/pdfjs/content/web/viewer.css
@@ -4076,12 +4076,12 @@ dialog :link{
 }
 
 #documentPropertiesDialog .row > span{
-  width:125px;
+  width:130px;
   word-wrap:break-word;
 }
 
 #documentPropertiesDialog .row > p{
-  max-width:225px;
+  max-width:305px;
   word-wrap:break-word;
 }
 
diff --git a/toolkit/components/pdfjs/content/web/viewer.mjs b/toolkit/components/pdfjs/content/web/viewer.mjs
index 218310deeb99..9058b7f4acc4 100644
--- a/toolkit/components/pdfjs/content/web/viewer.mjs
+++ b/toolkit/components/pdfjs/content/web/viewer.mjs
@@ -3778,7 +3778,7 @@ class PDFCursorTools {
 ;// ./web/pdf_document_properties.js
 
 
-const NON_METRIC_LOCALES = ["en-us", "en-lr", "my"];
+const NON_METRIC_LOCALES = [];
 const US_PAGE_NAMES = {
   "8.5x11": "pdfjs-document-properties-page-size-name-letter",
   "8.5x14": "pdfjs-document-properties-page-size-name-legal"
@@ -3907,7 +3907,7 @@ class PDFDocumentProperties {
       };
     }
     const isPortrait = isPortraitOrientation(pageSizeInches),
-      nonMetric = NON_METRIC_LOCALES.includes(this.l10n.getLanguage());
+      nonMetric = false; // NON_METRIC_LOCALES.includes(this.l10n.getLanguage());
     let sizeInches = {
       width: Math.round(pageSizeInches.width * 100) / 100,
       height: Math.round(pageSizeInches.height * 100) / 100
@@ -3926,9 +3926,9 @@ class PDFDocumentProperties {
         width: Math.round(sizeMillimeters.width),
         height: Math.round(sizeMillimeters.height)
       };
-      if (Math.abs(exactMillimeters.width - intMillimeters.width) < 0.1 && Math.abs(exactMillimeters.height - intMillimeters.height) < 0.1) {
+      if (Math.abs(exactMillimeters.width - intMillimeters.width) < 1.0 && Math.abs(exactMillimeters.height - intMillimeters.height) < 1.0) {
         nameId = getPageName(intMillimeters, isPortrait, METRIC_PAGE_NAMES);
-        if (nameId) {
+        if (false) {
           sizeInches = {
             width: Math.round(intMillimeters.width / 25.4 * 100) / 100,
             height: Math.round(intMillimeters.height / 25.4 * 100) / 100
@@ -3952,7 +3952,7 @@ class PDFDocumentProperties {
   async #parseDate(inputDate) {
     const dateObj = PDFDateString.toDateObject(inputDate);
     return dateObj ? this.l10n.get("pdfjs-document-properties-date-time-string", {
-      dateObj: dateObj.valueOf()
+      dateObj: dateObj.toLocaleString("sv") + (dateObj.getTimezoneOffset() ? "" : " UTC")
     }) : undefined;
   }
   #parseLinearization(isLinearized) {
diff --git a/toolkit/components/printing/content/print.js b/toolkit/components/printing/content/print.js
index 9049f695b2a3..57b43279756c 100644
--- a/toolkit/components/printing/content/print.js
+++ b/toolkit/components/printing/content/print.js
@@ -951,7 +951,7 @@ var PrintEventHandler = {
     };
     printersByName[PrintUtils.SAVE_TO_PDF_PRINTER] = {
       supportsColor: true,
-      supportsMonochrome: false,
+      supportsMonochrome: true,
       name: PrintUtils.SAVE_TO_PDF_PRINTER,
     };
 
diff --git a/toolkit/components/remote/nsDBusRemoteClient.cpp b/toolkit/components/remote/nsDBusRemoteClient.cpp
index 204b3b9c37dd..cc61dae7899a 100644
--- a/toolkit/components/remote/nsDBusRemoteClient.cpp
+++ b/toolkit/components/remote/nsDBusRemoteClient.cpp
@@ -76,7 +76,7 @@ bool nsDBusRemoteClient::GetRemoteDestinationName(const char* aProgram,
   mozilla::XREAppData::SanitizeNameForDBus(profileName);
 
   aDestinationName =
-      nsPrintfCString("org.mozilla.%s.%s", aProgram, profileName.get());
+      nsPrintfCString("com.0h7z.%s.%s", aProgram, profileName.get());
   if (aDestinationName.Length() > DBUS_MAXIMUM_NAME_LENGTH)
     aDestinationName.Truncate(DBUS_MAXIMUM_NAME_LENGTH);
 
@@ -90,7 +90,7 @@ bool nsDBusRemoteClient::GetRemoteDestinationName(const char* aProgram,
   if (!sDBusValidateBusName(aDestinationName.get(), nullptr)) {
     // We don't have a valid busName yet - try to create a default one.
     aDestinationName =
-        nsPrintfCString("org.mozilla.%s.%s", aProgram, "default");
+        nsPrintfCString("com.0h7z.%s.%s", aProgram, "default");
     if (!sDBusValidateBusName(aDestinationName.get(), nullptr)) {
       // We failed completelly to get a valid bus name - just quit
       // to prevent crash at dbus_bus_request_name().
@@ -121,7 +121,7 @@ nsresult nsDBusRemoteClient::DoSendDBusCommandLine(const char* aProfile,
   }
 
   nsAutoCString pathName;
-  pathName = nsPrintfCString("/org/mozilla/%s/Remote", appName.get());
+  pathName = nsPrintfCString("/com/0h7z/%s/Remote", appName.get());
 
   static auto sDBusValidatePathName = (bool (*)(const char*, DBusError*))dlsym(
       RTLD_DEFAULT, "dbus_validate_path");
@@ -132,7 +132,7 @@ nsresult nsDBusRemoteClient::DoSendDBusCommandLine(const char* aProfile,
   }
 
   nsAutoCString remoteInterfaceName;
-  remoteInterfaceName = nsPrintfCString("org.mozilla.%s", appName.get());
+  remoteInterfaceName = nsPrintfCString("com.0h7z.%s", appName.get());
 
   LOG("  DBus destination: %s\n", destinationName.get());
   LOG("  DBus path: %s\n", pathName.get());
diff --git a/toolkit/components/remote/nsDBusRemoteServer.cpp b/toolkit/components/remote/nsDBusRemoteServer.cpp
index 4afb8381d0bc..04c82a7f33ea 100644
--- a/toolkit/components/remote/nsDBusRemoteServer.cpp
+++ b/toolkit/components/remote/nsDBusRemoteServer.cpp
@@ -29,7 +29,7 @@ static const char* introspect_template =
     "1.0//EN\"\n"
     "\"http://www.freedesktop.org/standards/dbus/1.0/introspect.dtd\">\n"
     "<node>\n"
-    " <interface name=\"org.mozilla.%s\">\n"
+    " <interface name=\"com.0h7z.%s\">\n"
     "   <method name=\"OpenURL\">\n"
     "     <arg name=\"url\" direction=\"in\" type=\"ay\"/>\n"
     "   </method>\n"
@@ -39,7 +39,7 @@ static const char* introspect_template =
 bool nsDBusRemoteServer::HandleOpenURL(const gchar* aInterfaceName,
                                        const gchar* aMethodName,
                                        Span<const gchar> aParam) {
-  nsPrintfCString ourInterfaceName("org.mozilla.%s", mAppName.get());
+  nsPrintfCString ourInterfaceName("com.0h7z.%s", mAppName.get());
 
   if ((strcmp("OpenURL", aMethodName) != 0) ||
       (strcmp(ourInterfaceName.get(), aInterfaceName) != 0)) {
@@ -132,7 +132,7 @@ static const GDBusInterfaceVTable gInterfaceVTable = {
     HandleMethodCall, HandleGetProperty, HandleSetProperty};
 
 void nsDBusRemoteServer::OnBusAcquired(GDBusConnection* aConnection) {
-  mPathName = nsPrintfCString("/org/mozilla/%s/Remote", mAppName.get());
+  mPathName = nsPrintfCString("/com/0h7z/%s/Remote", mAppName.get());
   static auto sDBusValidatePathName = (bool (*)(const char*, DBusError*))dlsym(
       RTLD_DEFAULT, "dbus_validate_path");
   if (!sDBusValidatePathName ||
@@ -194,7 +194,7 @@ nsresult nsDBusRemoteServer::Startup(const char* aAppName,
   // Don't even try to start without any profile name
   if (!aProfileName || aProfileName[0] == '\0') return NS_ERROR_INVALID_ARG;
 
-  // aAppName is remoting name which can be something like org.mozilla.appname
+  // aAppName is remoting name which can be something like com.0h7z.appname
   // or so.
   // For DBus service we rather use general application DBus identifier
   // which is shared by all DBus services.
@@ -206,7 +206,7 @@ nsresult nsDBusRemoteServer::Startup(const char* aAppName,
 
   mozilla::XREAppData::SanitizeNameForDBus(profileName);
 
-  nsPrintfCString busName("org.mozilla.%s.%s", mAppName.get(),
+  nsPrintfCString busName("com.0h7z.%s.%s", mAppName.get(),
                           profileName.get());
   if (busName.Length() > DBUS_MAXIMUM_NAME_LENGTH) {
     busName.Truncate(DBUS_MAXIMUM_NAME_LENGTH);
@@ -221,7 +221,7 @@ nsresult nsDBusRemoteServer::Startup(const char* aAppName,
 
   // We don't have a valid busName yet - try to create a default one.
   if (!sDBusValidateBusName(busName.get(), nullptr)) {
-    busName = nsPrintfCString("org.mozilla.%s.%s", mAppName.get(), "default");
+    busName = nsPrintfCString("com.0h7z.%s.%s", mAppName.get(), "default");
     if (!sDBusValidateBusName(busName.get(), nullptr)) {
       // We failed completelly to get a valid bus name - just quit
       // to prevent crash at dbus_bus_request_name().
diff --git a/toolkit/components/resistfingerprinting/RFPHelper.sys.mjs b/toolkit/components/resistfingerprinting/RFPHelper.sys.mjs
index 830739ed1b56..247e0943a710 100644
--- a/toolkit/components/resistfingerprinting/RFPHelper.sys.mjs
+++ b/toolkit/components/resistfingerprinting/RFPHelper.sys.mjs
@@ -6,6 +6,7 @@
 import { XPCOMUtils } from "resource://gre/modules/XPCOMUtils.sys.mjs";
 import * as constants from "resource://gre/modules/RFPTargetConstants.sys.mjs";
 
+const kPrefFppOverrides = "privacy.fingerprintingProtection.overrides";
 const kPrefResistFingerprinting = "privacy.resistFingerprinting";
 const kPrefSpoofEnglish = "privacy.spoof_english";
 const kTopicHttpOnModifyRequest = "http-on-modify-request";
@@ -62,6 +63,7 @@ class _RFPHelper {
     );
 
     // Add RFP and Letterboxing observers if prefs are enabled
+    this._handleSpoofEnglishChanged();
     this._handleResistFingerprintingChanged();
     this._handleLetterboxingPrefChanged();
   }
@@ -281,16 +283,34 @@ class _RFPHelper {
     this._addOrClearContentMargin(aBrowser);
   }
 
+  _updatePrefFppOverrides(overrides = "", letterboxing = false) {
+    if (overrides.match(/^[+-]AllTargets\b/) == null) {
+      overrides = "+AllTargets";
+    }
+    const dlm = ",";
+    const pm = letterboxing ? "+" : "-";
+    for (const x of ["CSSDeviceSize", "ScreenRect"]) {
+      const r = RegExp(`${dlm}?[+-]${x}(?=${dlm}|$)`, "g");
+      const s = dlm + pm + x;
+      overrides = overrides.replace(r, s) + s;
+    }
+    return overrides.split(dlm).filter((v, i, a) => a.indexOf(v) == i).join(dlm); // prettier-ignore
+  }
+
   _handleLetterboxingPrefChanged() {
+    let FppOverrides = String(Services.prefs.getStringPref(kPrefFppOverrides));
     if (Services.prefs.getBoolPref(kPrefLetterboxing, false)) {
       Services.ww.registerNotification(this);
       this._registerLetterboxingActor();
       this._attachAllWindows();
+      FppOverrides = this._updatePrefFppOverrides(FppOverrides, 1);
     } else {
+      FppOverrides = this._updatePrefFppOverrides(FppOverrides, 0);
       this._unregisterLetterboxingActor();
       this._detachAllWindows();
       Services.ww.unregisterNotification(this);
     }
+    Services.prefs.setStringPref(kPrefFppOverrides, FppOverrides);
   }
 
   _registerLetterboxingActor() {
diff --git a/toolkit/components/resistfingerprinting/nsRFPService.h b/toolkit/components/resistfingerprinting/nsRFPService.h
index 6041a28ddd8c..5f72ebf76a77 100644
--- a/toolkit/components/resistfingerprinting/nsRFPService.h
+++ b/toolkit/components/resistfingerprinting/nsRFPService.h
@@ -60,12 +60,12 @@
 
 #define SPOOFED_POINTER_INTERFACE MouseEvent_Binding::MOZ_SOURCE_MOUSE
 
-// For the HTTP User-Agent header, we use a simpler set of spoofed values
-// that do not reveal the specific desktop platform.
+// For the HTTP User-Agent header,
+// be consistent.
 #if defined(MOZ_WIDGET_ANDROID)
-#  define SPOOFED_HTTP_UA_OS "Android 10; Mobile"
+#  define SPOOFED_HTTP_UA_OS SPOOFED_UA_OS
 #else
-#  define SPOOFED_HTTP_UA_OS "Windows NT 10.0; Win64; x64"
+#  define SPOOFED_HTTP_UA_OS SPOOFED_UA_OS
 #endif
 
 struct JSContext;
diff --git a/toolkit/components/search/OpenSearchEngine.sys.mjs b/toolkit/components/search/OpenSearchEngine.sys.mjs
index 4e1bd1b6b967..ba19719ff522 100644
--- a/toolkit/components/search/OpenSearchEngine.sys.mjs
+++ b/toolkit/components/search/OpenSearchEngine.sys.mjs
@@ -173,7 +173,7 @@ export class OpenSearchEngine extends SearchEngine {
 
       // Keep track of the last modified date, so that we can make conditional
       // server requests for future updates.
-      this.setAttr("updatelastmodified", new Date().toUTCString());
+      this.setAttr("updatelastmodified", new Date().toISOString());
     }
   }
 
diff --git a/toolkit/components/url-classifier/SafeBrowsing.sys.mjs b/toolkit/components/url-classifier/SafeBrowsing.sys.mjs
index 5f0b5faec8ac..76c7087dfb6c 100644
--- a/toolkit/components/url-classifier/SafeBrowsing.sys.mjs
+++ b/toolkit/components/url-classifier/SafeBrowsing.sys.mjs
@@ -12,7 +12,7 @@ function log(...stuff) {
   }
 
   var d = new Date();
-  let msg = "SafeBrowsing: " + d.toTimeString() + ": " + stuff.join(" ");
+  let msg = "SafeBrowsing: " + d.toLocaleTimeString("sv") + ": " + stuff.join(" "); // prettier-ignore
   dump(Services.urlFormatter.trimSensitiveURLs(msg) + "\n");
 }
 
diff --git a/toolkit/components/url-classifier/UrlClassifierHashCompleter.sys.mjs b/toolkit/components/url-classifier/UrlClassifierHashCompleter.sys.mjs
index 38b5aea8e022..8ce11db6727a 100644
--- a/toolkit/components/url-classifier/UrlClassifierHashCompleter.sys.mjs
+++ b/toolkit/components/url-classifier/UrlClassifierHashCompleter.sys.mjs
@@ -41,7 +41,7 @@ function log(...stuff) {
   }
 
   var d = new Date();
-  let msg = "hashcompleter: " + d.toTimeString() + ": " + stuff.join(" ");
+  let msg = "hashcompleter: " + d.toLocaleTimeString("sv") + ": " + stuff.join(" "); // prettier-ignore
   dump(Services.urlFormatter.trimSensitiveURLs(msg) + "\n");
 }
 
diff --git a/toolkit/components/url-classifier/UrlClassifierListManager.sys.mjs b/toolkit/components/url-classifier/UrlClassifierListManager.sys.mjs
index a96c6bad15ff..f23af6ef478e 100644
--- a/toolkit/components/url-classifier/UrlClassifierListManager.sys.mjs
+++ b/toolkit/components/url-classifier/UrlClassifierListManager.sys.mjs
@@ -38,7 +38,7 @@ function log(...stuff) {
   }
 
   var d = new Date();
-  let msg = "listmanager: " + d.toTimeString() + ": " + stuff.join(" ");
+  let msg = "listmanager: " + d.toLocaleTimeString("sv") + ": " + stuff.join(" "); // prettier-ignore
   msg = Services.urlFormatter.trimSensitiveURLs(msg);
   Services.console.logStringMessage(msg);
   dump(msg + "\n");
@@ -307,7 +307,7 @@ PROT_ListManager.prototype.kickoffUpdate_ = function () {
   initialUpdateDelay += Math.floor(Math.random() * (1 * 60 * 1000));
 
   // If the user has never downloaded tables, do the check now.
-  log("needsUpdate: " + JSON.stringify(this.needsUpdate_, undefined, 2));
+  log("needsUpdate: " + JSON.stringify(this.needsUpdate_, undefined, "\t"));
   for (var updateUrl in this.needsUpdate_) {
     // If we haven't already kicked off updates for this updateUrl, set a
     // non-repeating timer for it. The timer delay will be reset either on
@@ -485,7 +485,7 @@ PROT_ListManager.prototype.makeUpdateRequest_ = function (
   updateUrl,
   tableData
 ) {
-  log("this.tablesData: " + JSON.stringify(this.tablesData, undefined, 2));
+  log("this.tablesData: " + JSON.stringify(this.tablesData, undefined, "\t"));
   log("existing chunks: " + tableData + "\n");
   // Disallow blank updateUrls
   if (!updateUrl) {
@@ -601,7 +601,7 @@ PROT_ListManager.prototype.makeUpdateRequest_ = function (
     streamerMap.isPostRequest = true;
   }
 
-  log("update request: " + JSON.stringify(streamerMap, undefined, 2) + "\n");
+  log("update request: " + JSON.stringify(streamerMap, undefined, "\t") + "\n");
 
   // Don't send an empty request.
   if (streamerMap.requestPayload.length) {
diff --git a/toolkit/components/utils/ClientEnvironment.sys.mjs b/toolkit/components/utils/ClientEnvironment.sys.mjs
index 64fb6da9e194..0fd097f90f35 100644
--- a/toolkit/components/utils/ClientEnvironment.sys.mjs
+++ b/toolkit/components/utils/ClientEnvironment.sys.mjs
@@ -177,10 +177,7 @@ export class ClientEnvironmentBase {
   }
 
   static get doNotTrack() {
-    return Services.prefs.getBoolPref(
-      "privacy.donottrackheader.enabled",
-      false
-    );
+    return Services.prefs.getBoolPref("privacy.donottrackheader.enabled", true);
   }
 
   static get os() {
diff --git a/toolkit/content/aboutNetError.mjs b/toolkit/content/aboutNetError.mjs
index 1fc190b51add..f7161d7ead54 100644
--- a/toolkit/content/aboutNetError.mjs
+++ b/toolkit/content/aboutNetError.mjs
@@ -18,7 +18,7 @@ import {
   getCSSClass,
 } from "chrome://global/content/aboutNetErrorHelpers.mjs";
 
-const formatter = new Intl.DateTimeFormat();
+const formatter = new Intl.DateTimeFormat("sv");
 
 const HOST_NAME = getHostName();
 
diff --git a/toolkit/content/aboutRights-unbranded.xhtml b/toolkit/content/aboutRights-unbranded.xhtml
index 240b1195faf4..55d3d0683922 100644
--- a/toolkit/content/aboutRights-unbranded.xhtml
+++ b/toolkit/content/aboutRights-unbranded.xhtml
@@ -32,15 +32,15 @@
       <ul>
         <li data-l10n-id="rights-intro-point-1">
           <a
-            href="http://www.mozilla.org/MPL/"
+            href="https://www.mozilla.org/MPL/"
             data-l10n-name="mozilla-public-license-link"
           ></a>
         </li>
         <!-- Point 2 discusses Mozilla trademarks, and isn't needed when the build is unbranded.
     - Point 4 discusses privacy policy, unbranded builds get a placeholder (for the vendor to replace)
     - Point 5 discusses web service terms, unbranded builds gets a placeholder (for the vendor to replace) -->
-        <li data-l10n-id="rights-intro-point-4-unbranded"></li>
-        <li data-l10n-id="rights-intro-point-5-unbranded">
+        <li data-l10n-id="rights-intro-point-4-unbranded" hidden="true"></li>
+        <li data-l10n-id="rights-intro-point-5-unbranded" hidden="true">
           <a
             href="about:rights#webservices"
             id="showWebServices"
diff --git a/toolkit/content/aboutRights.xhtml b/toolkit/content/aboutRights.xhtml
index 324b97f45210..45fb126ffb02 100644
--- a/toolkit/content/aboutRights.xhtml
+++ b/toolkit/content/aboutRights.xhtml
@@ -41,7 +41,7 @@
       <ul>
         <li data-l10n-id="rights-intro-point-1">
           <a
-            href="http://www.mozilla.org/MPL/"
+            href="https://www.mozilla.org/MPL/"
             data-l10n-name="mozilla-public-license-link"
           ></a>
         </li>
@@ -50,7 +50,7 @@
     - Point 5 discusses web service terms, unbranded builds gets a placeholder (for the vendor to replace) -->
         <li data-l10n-id="rights-intro-point-2">
           <a
-            href="http://www.mozilla.org/foundation/trademarks/policy.html"
+            href="https://www.mozilla.org/foundation/trademarks/policy.html"
             data-l10n-name="mozilla-trademarks-link"
           ></a>
         </li>
diff --git a/toolkit/content/aboutSupport.js b/toolkit/content/aboutSupport.js
index ba7adfc4576a..516194fe2248 100644
--- a/toolkit/content/aboutSupport.js
+++ b/toolkit/content/aboutSupport.js
@@ -767,7 +767,7 @@ var snapshotFormatters = {
     for (let feature of featureKeys) {
       const obj = data[feature];
       if (obj) {
-        const str = JSON.stringify(obj, null, "  ");
+        const str = JSON.stringify(obj, null, "\t");
         await addRow("features", feature, [new Text(str)]);
         delete data[feature];
       }
@@ -1680,7 +1680,7 @@ function copyRawDataToClipboard(button) {
       let str = Cc["@mozilla.org/supports-string;1"].createInstance(
         Ci.nsISupportsString
       );
-      str.data = JSON.stringify(snapshot, undefined, 2);
+      str.data = JSON.stringify(snapshot, undefined, "\t");
       let transferable = Cc[
         "@mozilla.org/widget/transferable;1"
       ].createInstance(Ci.nsITransferable);
diff --git a/toolkit/content/aboutUrlClassifier.js b/toolkit/content/aboutUrlClassifier.js
index cc88e3bf73eb..2f16de220293 100644
--- a/toolkit/content/aboutUrlClassifier.js
+++ b/toolkit/content/aboutUrlClassifier.js
@@ -302,17 +302,17 @@ var Provider = {
       let pref =
         "browser.safebrowsing.provider." + provider + ".lastupdatetime";
       let lut = Services.prefs.getCharPref(pref, "");
-      values["col-lastupdatetime"] = lut ? new Date(lut * 1) : null;
+      values["col-lastupdatetime"] = lut ? new Date(lut * 1).toISOString() : null; // prettier-ignore
 
       pref = "browser.safebrowsing.provider." + provider + ".nextupdatetime";
       let nut = Services.prefs.getCharPref(pref, "");
-      values["col-nextupdatetime"] = nut ? new Date(nut * 1) : null;
+      values["col-nextupdatetime"] = nut ? new Date(nut * 1).toISOString() : null; // prettier-ignore
 
       let listmanager = Cc[
         "@mozilla.org/url-classifier/listmanager;1"
       ].getService(Ci.nsIUrlListManager);
       let bot = listmanager.getBackOffTime(provider);
-      values["col-backofftime"] = bot ? new Date(bot * 1) : null;
+      values["col-backofftime"] = bot ? new Date(bot * 1).toISOString() : null; // prettier-ignore
 
       for (let key of Object.keys(values)) {
         let elem = document.getElementById(provider + "-" + key);
@@ -487,7 +487,7 @@ var Cache = {
               let tds = [
                 table,
                 entry.prefix,
-                new Date(entry.expiry * 1000).toString(),
+                new Date(entry.expiry * 1000).toISOString(),
               ];
               let j = 0;
               do {
@@ -498,7 +498,7 @@ var Cache = {
                   );
                   let list = [
                     match.fullhash,
-                    new Date(match.expiry * 1000).toString(),
+                    new Date(match.expiry * 1000).toISOString(),
                   ];
                   tds = tds.concat(list);
                 } else {
diff --git a/toolkit/content/aboutwebrtc/aboutWebrtc.mjs b/toolkit/content/aboutwebrtc/aboutWebrtc.mjs
index 9961001514f4..bc09db3a2c96 100644
--- a/toolkit/content/aboutwebrtc/aboutWebrtc.mjs
+++ b/toolkit/content/aboutwebrtc/aboutWebrtc.mjs
@@ -774,7 +774,7 @@ function renderPeerConnectionTools(rndr, report, forceRefreshFn) {
             onclick() {
               WGI.getStatsHistorySince(
                 hist =>
-                  navigator.clipboard.writeText(JSON.stringify(hist, null, 2)),
+                  navigator.clipboard.writeText(JSON.stringify(hist, null, "\t")),
                 pcid
               );
             },
@@ -816,7 +816,7 @@ function renderPeerConnectionTools(rndr, report, forceRefreshFn) {
       rndr,
       report.pcid,
       "about-webrtc-copy-report-button",
-      () => JSON.stringify({ ...report }, null, 2)
+      () => JSON.stringify({ ...report }, null, "\t")
     ),
     ...copyHistButton,
     forceRefreshButton,
@@ -1119,7 +1119,7 @@ function renderRTPStats(rndr, report, hist) {
     { id: "rtp-stats: " + report.pcid, className: "rtp-stats" },
     [
       renderSubsectionHeading("about-webrtc-rtp-stats-heading", () =>
-        JSON.stringify([...rtpStats, ...remoteRtpStats], null, 2)
+        JSON.stringify([...rtpStats, ...remoteRtpStats], null, "\t")
       ),
       ...rtpStats.map(stat => {
         const { ssrc, remoteId, remoteRtpStats: rtcpStats } = stat;
@@ -1277,7 +1277,7 @@ function renderTransportStats(
     );
   }
 
-  const time = new Date(timestamp).toTimeString();
+  const time = new Date(timestamp).toLocaleTimeString("sv");
   elements.push(renderText("span", `${time} ${type}`));
 
   if (packetsReceived) {
diff --git a/toolkit/content/buildconfig.html b/toolkit/content/buildconfig.html
index 9c7ada2c83dc..ec8a436f075e 100644
--- a/toolkit/content/buildconfig.html
+++ b/toolkit/content/buildconfig.html
@@ -21,7 +21,7 @@
       <p>Please be aware that this page doesn't reflect all the options used to build @MOZ_APP_DISPLAYNAME@.</p>
       #ifdef MOZ_SOURCE_URL
       <h2>Source</h2>
-      <p>Built from <a href="@MOZ_SOURCE_URL@">@MOZ_SOURCE_URL@</a></p>
+      <p>Built from <a target="_blank" href="@MOZ_SOURCE_URL@">@MOZ_SOURCE_URL@</a></p>
       #endif
       <h2>Build platform</h2>
       <table class="build-platform-table">
diff --git a/toolkit/content/widgets/datekeeper.js b/toolkit/content/widgets/datekeeper.js
index f053d0ce763b..5416138bc7b6 100644
--- a/toolkit/content/widgets/datekeeper.js
+++ b/toolkit/content/widgets/datekeeper.js
@@ -61,8 +61,8 @@ function DateKeeper(props) {
       max,
       step,
       stepBase,
-      firstDayOfWeek = 0,
-      weekends = [0],
+      firstDayOfWeek = 1,
+      weekends = [6, 0],
       calViewSize = 42,
     }) {
       const today = new Date();
diff --git a/toolkit/content/widgets/datepicker.js b/toolkit/content/widgets/datepicker.js
index eba5fcbc6414..2e3ae1922659 100644
--- a/toolkit/content/widgets/datepicker.js
+++ b/toolkit/content/widgets/datepicker.js
@@ -84,7 +84,7 @@ function DatePicker(context) {
         dateKeeper,
         locale,
         isMonthPickerVisible: false,
-        datetimeOrders: new Intl.DateTimeFormat(locale)
+        datetimeOrders: new Intl.DateTimeFormat("sv")
           .formatToParts(new Date(0))
           .map(part => part.type),
         getDayString: day =>
@@ -428,13 +428,13 @@ function DatePicker(context) {
    */
   function MonthYear(options, context) {
     const spinnerSize = 5;
-    const yearFormat = new Intl.DateTimeFormat(options.locale, {
+    const yearFormat = new Intl.DateTimeFormat("sv", {
       year: "numeric",
       timeZone: "UTC",
     }).format;
-    const dateFormat = new Intl.DateTimeFormat(options.locale, {
+    const dateFormat = new Intl.DateTimeFormat("sv", {
       year: "numeric",
-      month: "long",
+      month: "2-digit",
       timeZone: "UTC",
     }).format;
     const spinnerOrder =
diff --git a/toolkit/content/widgets/datetimebox.js b/toolkit/content/widgets/datetimebox.js
index e7099e4028c8..65fdc1d6ebea 100644
--- a/toolkit/content/widgets/datetimebox.js
+++ b/toolkit/content/widgets/datetimebox.js
@@ -185,7 +185,7 @@ this.DateTimeBoxWidget = class {
     this.mAMIndicator = amString || kDefaultAMString;
     this.mPMIndicator = pmString || kDefaultPMString;
 
-    this.mHour12 = this.is12HourTime(this.mLocales);
+    this.mHour12 = false;
     this.mMillisecSeparatorText = ".";
     this.mMaxLength = 2;
     this.mMillisecMaxLength = 3;
@@ -811,7 +811,7 @@ this.DateTimeBoxWidget = class {
       options.year = options.month = options.day = "numeric";
     }
 
-    let formatter = Intl.DateTimeFormat(this.mLocales, options);
+    let formatter = Intl.DateTimeFormat("sv", options);
     formatter.formatToParts(Date.now()).map(part => {
       switch (part.type) {
         case "year":
diff --git a/toolkit/crashreporter/breakpad-client/windows/unittests/minidump_test.cc b/toolkit/crashreporter/breakpad-client/windows/unittests/minidump_test.cc
index 82641125c1c0..131414d90953 100644
--- a/toolkit/crashreporter/breakpad-client/windows/unittests/minidump_test.cc
+++ b/toolkit/crashreporter/breakpad-client/windows/unittests/minidump_test.cc
@@ -130,7 +130,7 @@ class MinidumpTest: public testing::Test {
 bool HasFileInfo(const std::wstring& file_path) {
   DWORD dummy;
   const wchar_t* path = file_path.c_str();
-  DWORD length = ::GetFileVersionInfoSize(path, &dummy);
+  DWORD length = ::GetFileVersionInfoSizeEx(0, path, &dummy);
   if (length == 0)
     return NULL;
 
@@ -138,7 +138,7 @@ bool HasFileInfo(const std::wstring& file_path) {
   if (!data)
     return false;
 
-  if (!::GetFileVersionInfo(path, dummy, length, data)) {
+  if (!::GetFileVersionInfoEx(0, path, dummy, length, data)) {
     free(data);
     return false;
   }
diff --git a/toolkit/crashreporter/google-breakpad/src/tools/windows/symupload/symupload.cc b/toolkit/crashreporter/google-breakpad/src/tools/windows/symupload/symupload.cc
index 7e3029326d5c..e8e007e85af6 100644
--- a/toolkit/crashreporter/google-breakpad/src/tools/windows/symupload/symupload.cc
+++ b/toolkit/crashreporter/google-breakpad/src/tools/windows/symupload/symupload.cc
@@ -75,13 +75,13 @@ using google_breakpad::WindowsStringUtils;
 // as a string, for example, "1.2.3.4".  Returns true on success.
 static bool GetFileVersionString(const wchar_t *filename, wstring *version) {
   DWORD handle;
-  DWORD version_size = GetFileVersionInfoSize(filename, &handle);
+  DWORD version_size = GetFileVersionInfoSizeEx(0, filename, &handle);
   if (version_size < sizeof(VS_FIXEDFILEINFO)) {
     return false;
   }
 
   vector<char> version_info(version_size);
-  if (!GetFileVersionInfo(filename, handle, version_size, &version_info[0])) {
+  if (!GetFileVersionInfoEx(0, filename, handle, version_size, &version_info[0])) {
     return false;
   }
 
diff --git a/toolkit/locales/en-US/toolkit/branding/brandings.ftl b/toolkit/locales/en-US/toolkit/branding/brandings.ftl
index 3861d8b61317..1094d23650ae 100644
--- a/toolkit/locales/en-US/toolkit/branding/brandings.ftl
+++ b/toolkit/locales/en-US/toolkit/branding/brandings.ftl
@@ -20,7 +20,7 @@
 -mozmonitor-brand-name = Mozilla Monitor
 -pocket-brand-name = Pocket
 -send-brand-name = Firefox Send
--screenshots-brand-name = Firefox Screenshots
+-screenshots-brand-name = Snowfox Screenshots
 -mozilla-vpn-brand-name = Mozilla VPN
 -profiler-brand-name = Firefox Profiler
 -translations-brand-name = Firefox Translations
@@ -37,18 +37,18 @@
 
 # Suggest can be localized, Firefox must be treated as a brand
 # and kept in English.
--firefox-suggest-brand-name = Firefox Suggest
+-firefox-suggest-brand-name = Snowfox Suggest
 
 # Home" can be localized, Firefox must be treated as a brand
 # and kept in English.
--firefox-home-brand-name = Firefox Home
+-firefox-home-brand-name = Snowfox Home
 
 # View" can be localized, Firefox must be treated as a brand
 # and kept in English.
--firefoxview-brand-name = Firefox View
+-firefoxview-brand-name = Snowfox View
 
 # Firefox Labs is the name for a page in Settings to allow users to learn about
 # experimental and in-development features, and turn those features on and off.
 # The "Labs" portion can be localized, Firefox must be treated as a brand
 # and kept in English.
--firefoxlabs-brand-name = Firefox Labs
+-firefoxlabs-brand-name = Snowfox Labs
diff --git a/toolkit/locales/en-US/toolkit/pdfviewer/viewer.ftl b/toolkit/locales/en-US/toolkit/pdfviewer/viewer.ftl
index 3e4a3510cf83..b64d217b049e 100644
--- a/toolkit/locales/en-US/toolkit/pdfviewer/viewer.ftl
+++ b/toolkit/locales/en-US/toolkit/pdfviewer/viewer.ftl
@@ -131,7 +131,7 @@ pdfjs-document-properties-modification-date = Modification Date:
 
 # Variables:
 #   $dateObj (Date) - the creation/modification date and time of the PDF file
-pdfjs-document-properties-date-time-string = { DATETIME($dateObj, dateStyle: "short", timeStyle: "medium") }
+pdfjs-document-properties-date-time-string = { $dateObj }
 
 pdfjs-document-properties-creator = Creator:
 pdfjs-document-properties-producer = PDF Producer:
@@ -284,7 +284,7 @@ pdfjs-rendering-error = An error occurred while rendering the page.
 
 # Variables:
 #   $dateObj (Date) - the modification date and time of the annotation
-pdfjs-annotation-date-time-string = { DATETIME($dateObj, dateStyle: "short", timeStyle: "medium") }
+pdfjs-annotation-date-time-string = { $dateObj }
 
 # .alt: This is used as a tooltip.
 # Variables:
diff --git a/toolkit/modules/DateTimePickerPanel.sys.mjs b/toolkit/modules/DateTimePickerPanel.sys.mjs
index f20f2c1668d6..ac7e3c3ac6e8 100644
--- a/toolkit/modules/DateTimePickerPanel.sys.mjs
+++ b/toolkit/modules/DateTimePickerPanel.sys.mjs
@@ -124,7 +124,7 @@ export var DateTimePickerPanel = class {
     switch (this.type) {
       case "time": {
         const { hour, minute } = detail.value;
-        const format = detail.format || "12";
+        const format = detail.format || "24";
 
         this.postMessageToPicker({
           name: "PickerInit",
@@ -256,6 +256,8 @@ export var DateTimePickerPanel = class {
       weekend = calendarInfo.weekend;
 
     let weekends = weekend.map(toDateWeekday);
+    while (weekends.length < 7 && weekends.includes(firstDayOfWeek))
+      firstDayOfWeek = (firstDayOfWeek + 1) % 7;
 
     return {
       firstDayOfWeek,
diff --git a/toolkit/moz.configure b/toolkit/moz.configure
index bd6648a89e71..423505ac9cd2 100644
--- a/toolkit/moz.configure
+++ b/toolkit/moz.configure
@@ -84,7 +84,7 @@ set_config("MOZ_INCLUDE_SOURCE_INFO", True, when="MOZ_INCLUDE_SOURCE_INFO")
 option(
     "--with-distribution-id",
     nargs=1,
-    default="org.mozilla",
+    default="com.0h7z",
     help="Set distribution-specific id",
 )
 set_config("MOZ_DISTRIBUTION_ID", depends("--with-distribution-id")(lambda v: v[0]))
@@ -115,7 +115,7 @@ def all_configure_options():
         # consecutive.
         # Also ignore OLD_CONFIGURE and MOZCONFIG because they're not
         # interesting.
-        if option == previous or option.env in ("OLD_CONFIGURE", "MOZCONFIG"):
+        if option == previous or option.env in ("OLD_CONFIGURE", "MOZCONFIG", "MOZBUILD_STATE_PATH"):
             continue
         previous = option
         value = __sandbox__._value_for(option)
@@ -869,9 +869,9 @@ set_define("MOZ_AV1", av1)
 option("--disable-jxl", help="Disable jxl image support")
 
 
-@depends("--disable-jxl", milestone.is_nightly)
-def jxl(value, is_nightly):
-    if is_nightly and value:
+@depends("--disable-jxl")
+def jxl(value):
+    if value:
         return True
 
 
@@ -2017,7 +2017,7 @@ def require_signing(milestone):
 
 option(
     env="MOZ_REQUIRE_SIGNING",
-    default=require_signing,
+    default=mozilla_official & require_signing,
     help="Enforce that add-ons are signed by the trusted root",
 )
 
@@ -2780,7 +2780,7 @@ with only_when(requires_wasm_sandboxing & compile_environment):
         "--with-wasi-sysroot",
         env="WASI_SYSROOT",
         nargs=1,
-        help="Path to wasi sysroot for wasm sandboxing",
+        help="Path to wasi sysroot for wasm sandboxing (default /usr/share/wasi-sysroot)",
     )
 
     @depends("--with-wasi-sysroot", requires_wasm_sandboxing)
@@ -2794,7 +2794,7 @@ with only_when(requires_wasm_sandboxing & compile_environment):
     @imports("os")
     def wasi_sysroot(wasi_sysroot, bootstrapped_sysroot):
         if not wasi_sysroot:
-            return bootstrapped_sysroot
+            return bootstrapped_sysroot or "/usr/share/wasi-sysroot"
 
         wasi_sysroot = wasi_sysroot[0]
         if not os.path.isdir(wasi_sysroot):
@@ -3159,7 +3159,7 @@ set_config("MOZ_APP_REMOTINGNAME", moz_app_remotingname)
 option(
     env="ANDROID_PACKAGE_NAME",
     nargs=1,
-    help="Name of the Android package (default org.mozilla.$MOZ_APP_NAME)",
+    help="Name of the Android package (default com.0h7z.$MOZ_APP_NAME)",
 )
 
 
@@ -3169,7 +3169,7 @@ def android_package_name(value, moz_app_name):
         return value[0]
     if moz_app_name == "fennec":
         return "org.mozilla.fennec_aurora"
-    return "org.mozilla.%s" % moz_app_name
+    return "com.0h7z.%s" % moz_app_name
 
 
 set_config("ANDROID_PACKAGE_NAME", android_package_name)
diff --git a/toolkit/mozapps/defaultagent/SetDefaultBrowser.cpp b/toolkit/mozapps/defaultagent/SetDefaultBrowser.cpp
index 2407391e7aea..1cb542e66406 100644
--- a/toolkit/mozapps/defaultagent/SetDefaultBrowser.cpp
+++ b/toolkit/mozapps/defaultagent/SetDefaultBrowser.cpp
@@ -446,8 +446,8 @@ nsresult SetDefaultBrowserUserChoice(
   }
 
   nsTArray<nsString> browserDefaults = {
-      u"https"_ns, u"FirefoxURL"_ns,  u"http"_ns, u"FirefoxURL"_ns,
-      u".html"_ns, u"FirefoxHTML"_ns, u".htm"_ns, u"FirefoxHTML"_ns};
+      u"https"_ns, u"SnowfoxURL"_ns,  u"http"_ns, u"SnowfoxURL"_ns,
+      u".html"_ns, u"SnowfoxHTML"_ns, u".htm"_ns, u"SnowfoxHTML"_ns};
 
   browserDefaults.AppendElements(aExtraFileExtensions);
 
diff --git a/toolkit/mozapps/extensions/internal/AddonSettings.sys.mjs b/toolkit/mozapps/extensions/internal/AddonSettings.sys.mjs
index 09bb0adc9717..8d6fbe2b2322 100644
--- a/toolkit/mozapps/extensions/internal/AddonSettings.sys.mjs
+++ b/toolkit/mozapps/extensions/internal/AddonSettings.sys.mjs
@@ -119,7 +119,7 @@ if (
 if (AppConstants.MOZ_DEV_EDITION) {
   makeConstant("DEFAULT_THEME_ID", "firefox-compact-dark@mozilla.org");
 } else {
-  makeConstant("DEFAULT_THEME_ID", "default-theme@mozilla.org");
+  makeConstant("DEFAULT_THEME_ID", "firefox-compact-dark@mozilla.org");
 }
 
 // SCOPES_SIDELOAD is a bitflag for what scopes we will load new extensions from when we scan the directories.
diff --git a/toolkit/mozapps/installer/package-name.mk b/toolkit/mozapps/installer/package-name.mk
index c7be51972523..45d63cba1675 100644
--- a/toolkit/mozapps/installer/package-name.mk
+++ b/toolkit/mozapps/installer/package-name.mk
@@ -11,7 +11,11 @@ ifndef PACKAGE_NAME_MK_INCLUDED
 PACKAGE_NAME_MK_INCLUDED := 1
 
 ifndef MOZ_PKG_VERSION
+ifndef MOZ_APP_VERSION_DISPLAY
 MOZ_PKG_VERSION = $(MOZ_APP_VERSION)
+else
+MOZ_PKG_VERSION =v$(MOZ_APP_VERSION_DISPLAY)
+endif
 endif
 
 ifndef MOZ_PKG_PLATFORM
@@ -54,12 +58,16 @@ endif
 ifdef MOZ_SIMPLE_PACKAGE_NAME
 PKG_BASENAME := $(MOZ_SIMPLE_PACKAGE_NAME)
 else
+ifeq ($(AB_CD:en-US=),)
+PKG_BASENAME = $(MOZ_PKG_APPNAME)-$(MOZ_PKG_VERSION).$(MOZ_PKG_PLATFORM)
+else
 PKG_BASENAME = $(MOZ_PKG_APPNAME)-$(MOZ_PKG_VERSION).$(AB_CD).$(MOZ_PKG_PLATFORM)
 endif
+endif
 PKG_PATH =
 SDK_PATH =
-PKG_INST_BASENAME = $(PKG_BASENAME).installer
-PKG_STUB_BASENAME = $(PKG_BASENAME).installer-stub
+PKG_INST_BASENAME = $(PKG_BASENAME)
+PKG_STUB_BASENAME = $(PKG_BASENAME).installer
 PKG_INST_PATH = install/sea/
 PKG_UPDATE_BASENAME = $(PKG_BASENAME)
 CHECKSUMS_FILE_BASENAME = $(PKG_BASENAME)
diff --git a/toolkit/mozapps/installer/packager.mk b/toolkit/mozapps/installer/packager.mk
index 188ce9875ae8..3f7a2c65d2c9 100644
--- a/toolkit/mozapps/installer/packager.mk
+++ b/toolkit/mozapps/installer/packager.mk
@@ -109,12 +109,16 @@ ifneq (,$(MOZ_ASAN)$(LIBFUZZER)$(MOZ_UBSAN))
 endif # MOZ_ASAN || LIBFUZZER || MOZ_UBSAN
 endif # Darwin
 ifndef MOZ_ARTIFACT_BUILDS
+ifndef MOZILLA_OFFICIAL
+	@echo 'Not generating artifacts archive(s)'
+else
 	@echo 'Generating XPT artifacts archive ($(XPT_ARTIFACTS_ARCHIVE_BASENAME).zip)'
 	$(call py_action,zip $(XPT_ARTIFACTS_ARCHIVE_BASENAME).zip,-C $(topobjdir)/config/makefiles/xpidl '$(ABS_DIST)/$(PKG_PATH)$(XPT_ARTIFACTS_ARCHIVE_BASENAME).zip' '*.xpt')
 ifeq (Darwin, $(OS_ARCH))
 	@echo 'Generating update-related macOS framework artifacts archive ($(UPDATE_FRAMEWORK_ARTIFACTS_ARCHIVE_BASENAME).zip)'
 	$(call py_action,zip $(UPDATE_FRAMEWORK_ARTIFACTS_ARCHIVE_BASENAME).zip,-C '$(ABS_DIST)/update_framework_artifacts' '$(ABS_DIST)/$(PKG_PATH)$(UPDATE_FRAMEWORK_ARTIFACTS_ARCHIVE_BASENAME).zip' '*.framework')
 endif # Darwin
+endif # MOZILLA_OFFICIAL
 else
 	@echo 'Packaging existing XPT artifacts from artifact build into archive ($(XPT_ARTIFACTS_ARCHIVE_BASENAME).zip)'
 	$(call py_action,zip $(XPT_ARTIFACTS_ARCHIVE_BASENAME).zip,-C $(ABS_DIST)/xpt_artifacts '$(ABS_DIST)/$(PKG_PATH)$(XPT_ARTIFACTS_ARCHIVE_BASENAME).zip' '*.xpt')
diff --git a/toolkit/mozapps/installer/upload-files.mk b/toolkit/mozapps/installer/upload-files.mk
index a53169a3e616..c71a5e394dbb 100644
--- a/toolkit/mozapps/installer/upload-files.mk
+++ b/toolkit/mozapps/installer/upload-files.mk
@@ -311,7 +311,7 @@ ifneq (android,$(MOZ_WIDGET_TOOLKIT))
 endif
 
 ifeq ($(OS_TARGET), WINNT)
-  INSTALLER_PACKAGE = $(DIST)/$(PKG_INST_PATH)$(PKG_INST_BASENAME).exe
+  INSTALLER_PACKAGE = $(DIST)/$(PKG_INST_BASENAME).exe
 endif
 
 # These are necessary because some of our packages/installers contain spaces
diff --git a/toolkit/mozapps/installer/windows/nsis/common.nsh b/toolkit/mozapps/installer/windows/nsis/common.nsh
index a5e3977fb0d5..6b1febde1362 100755
--- a/toolkit/mozapps/installer/windows/nsis/common.nsh
+++ b/toolkit/mozapps/installer/windows/nsis/common.nsh
@@ -5377,8 +5377,8 @@
         Quit
       ${EndIf}
 
-      ; Windows 8.1/Server 2012 R2 and lower are not supported.
-      ${Unless} ${AtLeastWin10}
+      ; Windows NT 6.0 (Vista/Server 2008) and lower are not supported.
+      ${Unless} ${AtLeastWin7}
         MessageBox MB_OK|MB_ICONSTOP "$R9"
         ; Nothing initialized so no need to call OnEndCommon
         Quit
diff --git a/toolkit/mozapps/installer/windows/nsis/makensis.mk b/toolkit/mozapps/installer/windows/nsis/makensis.mk
index b4425034fb19..ad7dc0910ee6 100755
--- a/toolkit/mozapps/installer/windows/nsis/makensis.mk
+++ b/toolkit/mozapps/installer/windows/nsis/makensis.mk
@@ -66,7 +66,7 @@ installer:: $(CONFIG_DIR)/setup.exe $(ZIP_IN)
 	@echo 'Packaging $(WIN32_INSTALLER_OUT).'
 	$(NSINSTALL) -D '$(ABS_DIST)/$(PKG_INST_PATH)'
 	$(PYTHON3) $(MOZILLA_DIR)/mach repackage installer \
-	  -o '$(ABS_DIST)/$(PKG_INST_PATH)$(PKG_INST_BASENAME).exe' \
+	  -o '$(ABS_DIST)/$(PKG_INST_BASENAME).exe' \
 	  --package-name '$(MOZ_PKG_DIR)' \
 	  --package '$(ZIP_IN)' \
 	  --tag $(topsrcdir)/$(MOZ_BUILD_APP)/installer/windows/app.tag \
diff --git a/toolkit/themes/shared/aboutServiceWorkers.css b/toolkit/themes/shared/aboutServiceWorkers.css
index ae51b00c707f..288df721f369 100644
--- a/toolkit/themes/shared/aboutServiceWorkers.css
+++ b/toolkit/themes/shared/aboutServiceWorkers.css
@@ -24,6 +24,11 @@
   text-align: center;
 }
 
+.active a {
+  overflow-wrap: break-word;
+  word-break: keep-all;
+}
+
 .active {
   display: block;
 }
diff --git a/toolkit/themes/shared/aboutSupport.css b/toolkit/themes/shared/aboutSupport.css
index ff97226aee00..9adac4e2c7af 100644
--- a/toolkit/themes/shared/aboutSupport.css
+++ b/toolkit/themes/shared/aboutSupport.css
@@ -50,6 +50,14 @@ td.integer {
   }
 }
 
+#media-output-devices-tbody,
+#media-input-devices-tbody {
+  tr > td:nth-child(2) {
+    overflow-wrap: anywhere;
+    word-break: break-all;
+  }
+}
+
 #codec-table {
   text-align: center;
   white-space: nowrap;
diff --git a/toolkit/themes/shared/in-content/common-shared.css b/toolkit/themes/shared/in-content/common-shared.css
index 0315cd6896ba..9df12fcad656 100644
--- a/toolkit/themes/shared/in-content/common-shared.css
+++ b/toolkit/themes/shared/in-content/common-shared.css
@@ -88,6 +88,7 @@
   -moz-theme: non-native;
   accent-color: var(--color-accent-primary);
   color-scheme: light dark;
+  tab-size: 4;
 }
 
 @media (prefers-color-scheme: dark) {
diff --git a/toolkit/xre/dllservices/ModuleVersionInfo.cpp b/toolkit/xre/dllservices/ModuleVersionInfo.cpp
index c8c2956a7405..b96a0762841b 100644
--- a/toolkit/xre/dllservices/ModuleVersionInfo.cpp
+++ b/toolkit/xre/dllservices/ModuleVersionInfo.cpp
@@ -69,13 +69,13 @@ static bool QueryStringValue(const void* aBlock, const DWORD* aTranslations,
 
 bool ModuleVersionInfo::GetFromImage(const nsAString& aPath) {
   nsString path(aPath);
-  DWORD infoSize = GetFileVersionInfoSizeW(path.get(), nullptr);
+  DWORD infoSize = GetFileVersionInfoSizeExW(0, path.get(), nullptr);
   if (!infoSize) {
     return false;
   }
 
   auto verInfo = MakeUnique<BYTE[]>(infoSize);
-  if (!::GetFileVersionInfoW(path.get(), 0, infoSize, verInfo.get())) {
+  if (!::GetFileVersionInfoExW(0, path.get(), 0, infoSize, verInfo.get())) {
     return false;
   }
 
diff --git a/toolkit/xre/nsXREDirProvider.cpp b/toolkit/xre/nsXREDirProvider.cpp
index 3b4612e02c5b..31c47e47ba12 100644
--- a/toolkit/xre/nsXREDirProvider.cpp
+++ b/toolkit/xre/nsXREDirProvider.cpp
@@ -285,16 +285,16 @@ static nsresult GetSystemParentDirectory(nsIFile** aFile) {
   rv = GetOSXFolderType(kOnSystemDisk, kApplicationSupportFolderType,
                         getter_AddRefs(localDir));
   if (NS_SUCCEEDED(rv)) {
-    rv = localDir->AppendNative("Mozilla"_ns);
+    rv = localDir->AppendNative("Snowfox"_ns);
   }
 #  else
   constexpr auto dirname =
 #    ifdef HAVE_USR_LIB64_DIR
-      "/usr/lib64/mozilla"_ns
+      "/usr/lib64/snowfox"_ns
 #    elif defined(__OpenBSD__) || defined(__FreeBSD__)
-      "/usr/local/lib/mozilla"_ns
+      "/usr/local/lib/snowfox"_ns
 #    else
-      "/usr/lib/mozilla"_ns
+      "/usr/lib/snowfox"_ns
 #    endif
       ;
   rv = NS_NewNativeLocalFile(dirname, getter_AddRefs(localDir));
@@ -366,9 +366,9 @@ nsXREDirProvider::GetFile(const char* aProperty, bool* aPersistent,
     rv = GetUserDataDirectoryHome(getter_AddRefs(file), false);
     NS_ENSURE_SUCCESS(rv, rv);
 #  if defined(XP_MACOSX)
-    rv = file->AppendNative("Mozilla"_ns);
+    rv = file->AppendNative("Snowfox"_ns);
 #  else   // defined(XP_MACOSX)
-    rv = file->AppendNative(".mozilla"_ns);
+    rv = file->AppendNative(".snowfox"_ns);
 #  endif  // defined(XP_MACOSX)
   }
 #endif  // defined(XP_UNIX) || defined(XP_MACOSX)
@@ -398,9 +398,9 @@ nsXREDirProvider::GetFile(const char* aProperty, bool* aPersistent,
   else if (!strcmp(aProperty, XRE_SYS_SHARE_EXTENSION_PARENT_DIR)) {
 #  ifdef ENABLE_SYSTEM_EXTENSION_DIRS
 #    if defined(__OpenBSD__) || defined(__FreeBSD__)
-    static const char* const sysLExtDir = "/usr/local/share/mozilla/extensions";
+    static const char* const sysLExtDir = "/usr/local/share/snowfox/extensions";
 #    else
-    static const char* const sysLExtDir = "/usr/share/mozilla/extensions";
+    static const char* const sysLExtDir = "/usr/share/snowfox/extensions";
 #    endif
     rv = NS_NewNativeLocalFile(nsDependentCString(sysLExtDir),
                                getter_AddRefs(file));
@@ -932,7 +932,7 @@ nsresult nsXREDirProvider::GetUpdateRootDir(nsIFile** aResult,
             nsDependentCString(hasVendor ? GetAppVendor() : GetAppName())))) {
       return NS_ERROR_FAILURE;
     }
-  } else if (NS_FAILED(localDir->AppendNative("Mozilla"_ns))) {
+  } else if (NS_FAILED(localDir->AppendNative("Snowfox"_ns))) {
     return NS_ERROR_FAILURE;
   }
 
@@ -1192,7 +1192,7 @@ nsresult nsXREDirProvider::AppendSysUserExtensionPath(nsIFile* aFile) {
 
 #if defined(XP_MACOSX) || defined(XP_WIN)
 
-  static const char* const sXR = "Mozilla";
+  static const char* const sXR = "Snowfox";
   rv = aFile->AppendNative(nsDependentCString(sXR));
   NS_ENSURE_SUCCESS(rv, rv);
 
@@ -1202,7 +1202,7 @@ nsresult nsXREDirProvider::AppendSysUserExtensionPath(nsIFile* aFile) {
 
 #elif defined(XP_UNIX)
 
-  static const char* const sXR = ".mozilla";
+  static const char* const sXR = ".snowfox";
   rv = aFile->AppendNative(nsDependentCString(sXR));
   NS_ENSURE_SUCCESS(rv, rv);
 
@@ -1266,7 +1266,7 @@ nsresult nsXREDirProvider::AppendProfilePath(nsIFile* aFile, bool aLocal) {
   // The parent of this directory is set in GetUserDataDirectoryHome
   // XXX: handle gAppData->profile properly
   // XXXsmaug ...and the rest of the profile creation!
-  rv = aFile->AppendNative(nsDependentCString("mozilla"));
+  rv = aFile->AppendNative(nsDependentCString("snowfox"));
   NS_ENSURE_SUCCESS(rv, rv);
 #elif defined(XP_UNIX)
   nsAutoCString folder;
diff --git a/tools/@types/package.json b/tools/@types/package.json
index 61ad6877c7af..2b03c3ea136a 100644
--- a/tools/@types/package.json
+++ b/tools/@types/package.json
@@ -1,4 +1,5 @@
 {
+  "name": "@types/gecko",
   "description": "TypeScript definitions for gecko dom and xpcom.",
   "repository": {
     "type": "git",
diff --git a/tools/lint/eslint/eslint-plugin-spidermonkey-js/package.json b/tools/lint/eslint/eslint-plugin-spidermonkey-js/package.json
index 7563a31995c1..61c3cfb79e13 100644
--- a/tools/lint/eslint/eslint-plugin-spidermonkey-js/package.json
+++ b/tools/lint/eslint/eslint-plugin-spidermonkey-js/package.json
@@ -1,4 +1,5 @@
 {
+  "name": "eslint-plugin-spidermonkey-js",
   "description": "A collection of rules that help enforce JavaScript coding standard in the Mozilla SpiderMonkey project.",
   "keywords": [
     "eslint",
diff --git a/widget/windows/WinHeaderOnlyUtils.h b/widget/windows/WinHeaderOnlyUtils.h
index 15861cc73b88..5359a64df482 100644
--- a/widget/windows/WinHeaderOnlyUtils.h
+++ b/widget/windows/WinHeaderOnlyUtils.h
@@ -673,14 +673,14 @@ class ModuleVersion final {
 
 inline LauncherResult<ModuleVersion> GetModuleVersion(
     const wchar_t* aModuleFullPath) {
-  DWORD verInfoLen = ::GetFileVersionInfoSizeW(aModuleFullPath, nullptr);
+  DWORD verInfoLen = ::GetFileVersionInfoSizeExW(0, aModuleFullPath, nullptr);
   if (!verInfoLen) {
     return LAUNCHER_ERROR_FROM_LAST();
   }
 
   auto verInfoBuf = MakeUnique<BYTE[]>(verInfoLen);
-  if (!::GetFileVersionInfoW(aModuleFullPath, 0, verInfoLen,
-                             verInfoBuf.get())) {
+  if (!::GetFileVersionInfoExW(0, aModuleFullPath, 0, verInfoLen,
+                               verInfoBuf.get())) {
     return LAUNCHER_ERROR_FROM_LAST();
   }
 
diff --git a/xpcom/base/AvailableMemoryWatcherWin.cpp b/xpcom/base/AvailableMemoryWatcherWin.cpp
index 1effbe322657..7b3311186d93 100644
--- a/xpcom/base/AvailableMemoryWatcherWin.cpp
+++ b/xpcom/base/AvailableMemoryWatcherWin.cpp
@@ -312,8 +312,10 @@ bool nsAvailableMemoryWatcher::IsCommitSpaceLow() {
   }
 
   constexpr size_t kBytesPerMB = 1024 * 1024;
-  return (memStatus.ullAvailPageFile / kBytesPerMB) <
-         StaticPrefs::browser_low_commit_space_threshold_mb();
+  return (100 - memStatus.dwMemoryLoad) <=
+             StaticPrefs::browser_low_commit_space_threshold_percent() ||
+         (memStatus.ullAvailPageFile / kBytesPerMB) <
+             StaticPrefs::browser_low_commit_space_threshold_mb();
 }
 
 void nsAvailableMemoryWatcher::StartPollingIfUserInteracting(
diff --git a/xpcom/io/nsLocalFileWin.cpp b/xpcom/io/nsLocalFileWin.cpp
index 2aa6cf4fbdc4..3e25725511f3 100644
--- a/xpcom/io/nsLocalFileWin.cpp
+++ b/xpcom/io/nsLocalFileWin.cpp
@@ -1661,13 +1661,13 @@ nsLocalFile::GetVersionInfoField(const char* aField, nsAString& aResult) {
   const WCHAR* path = mWorkingPath.get();
 
   DWORD dummy;
-  DWORD size = ::GetFileVersionInfoSizeW(path, &dummy);
+  DWORD size = ::GetFileVersionInfoSizeExW(0, path, &dummy);
   if (!size) {
     return rv;
   }
 
   void* ver = moz_xcalloc(size, 1);
-  if (::GetFileVersionInfoW(path, 0, size, ver)) {
+  if (::GetFileVersionInfoExW(0, path, 0, size, ver)) {
     LANGANDCODEPAGE* translate = nullptr;
     UINT pageCount;
     BOOL queryResult = ::VerQueryValueW(ver, L"\\VarFileInfo\\Translation",
